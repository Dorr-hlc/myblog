{"generatedAt":1701249349972,"generateTime":138,"contents":[{"_path":"/articles/12","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"12种常用的js函数","description":"","date":"2022-07-05T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"生成随机颜色"},"children":[{"type":"text","value":"生成随机颜色"}]},{"type":"element","tag":"code","props":{"code":"const generateRandomHexColor = () => `#${Math.floor(Math.random() * 0xffffff).toString(16)}`\r\n\r\nconsole.log(generateRandomHexColor())\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const generateRandomHexColor = () => `#${Math.floor(Math.random() * "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"xffffff).toString("}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"16"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")}`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"generateRandomHexColor"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"())"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"数组重排序"},"children":[{"type":"text","value":"数组重排序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对数组的元素进行重新排序是一项非常重要的技巧，但是原生 Array 中并没有这项功能"}]},{"type":"element","tag":"code","props":{"code":"const shuffle = (arr) => arr.sort(() => Math.random() - 0.5)\r\n\r\nconst arr = [1, 2, 3, 4, 5]\r\nconsole.log(shuffle(arr))\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const shuffle = (arr) => arr"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".sort"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(() => Math"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".random"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"() - "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"0.5"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const arr = ["}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"shuffle"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(arr))"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"复制到剪切板"},"children":[{"type":"text","value":"复制到剪切板"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"复制到剪切板是一项非常实用且能够提高用户便利性的功能。"}]},{"type":"element","tag":"code","props":{"code":"const copyToClipboard = (text) => navigator.clipboard && navigator.clipboard.writeText && navigator.clipboard.writeText(text)\r\n\r\ncopyToClipboard(\"Hello World!\")\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const copyToClipboard = ("}]},{"type":"element","tag":"span","props":{"class":"ct-ac126a"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":") => navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".clipboard"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" && navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".clipboard.writeText"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" && navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".clipboard.writeText"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ac126a"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"copyToClipboard"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"Hello World!\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"滚动到顶部"},"children":[{"type":"text","value":"滚动到顶部"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将元素滚动到顶部最简单的方法是使用 scrollIntoView。设置 block 为 start 可以滚动到顶部；设置 behavior 为 smooth 可以开启平滑滚动。"}]},{"type":"element","tag":"code","props":{"code":"const scrollToTop = (element) => \r\n  element.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const scrollToTop = (element) => \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  element"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".scrollIntoView"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"({ behavior: "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"smooth\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":", block: "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" });"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"检测元素是否在屏幕中"},"children":[{"type":"text","value":"检测元素是否在屏幕中"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"检查元素是否在窗口中最好的方法是使用 IntersectionObserver。"}]},{"type":"element","tag":"code","props":{"code":"const callback = (entries) => {\r\n  entries.forEach((entry) => {\r\n    if (entry.isIntersecting) {\r\n      // `entry.target` is the dom element\r\n      console.log(`${entry.target.id} is visible`);\r\n    }\r\n  });\r\n};\r\n\r\nconst options = {\r\n  threshold: 1.0,\r\n};\r\nconst observer = new IntersectionObserver(callback, options);\r\nconst btn = document.getElementById(\"btn\");\r\nconst bottomBtn = document.getElementById(\"bottom-btn\");\r\nobserver.observe(btn);\r\nobserver.observe(bottomBtn);\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const callback = (entries) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  entries"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"((entry) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-aa9f08"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" (entry"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".isIntersecting"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4510f5"},"children":[{"type":"text","value":"// `entry.target` is the dom element\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(`${entry.target.id} is visible`);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const options = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"threshold"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-07d543"},"children":[{"type":"text","value":"1.0"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const observer = new "}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"IntersectionObserver"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(callback, options);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const btn = document"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const bottomBtn = document"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"bottom-btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"observer"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".observe"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(btn);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"observer"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".observe"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(bottomBtn);"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"检测设备"},"children":[{"type":"text","value":"检测设备"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 navigator.userAgent 来检测网站运行在哪种平台设备上。"}]},{"type":"element","tag":"code","props":{"code":"const detectDeviceType = () =>\r\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n    navigator.userAgent\r\n  ) ? \"Mobile\" : \"Desktop\";\r\n\r\nconsole.log(detectDeviceType());\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const detectDeviceType = () =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":"i.test"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"    navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".userAgent\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  ) ? "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"Mobile\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"\"Desktop\""}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"detectDeviceType"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"());"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"隐藏元素"},"children":[{"type":"text","value":"隐藏元素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以将元素的 style.visibility 设置为 hidden，隐藏元素的可见性，但元素的空间仍然会被占用。如果设置元素的 style.display 为 none，会将元素从渲染流中删除。"}]},{"type":"element","tag":"code","props":{"code":"const hideElement = (el, removeFromFlow = false) => {\r\n  removeFromFlow ? (el.style.display = 'none')\r\n  : (el.style.visibility = 'hidden')\r\n}\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const hideElement = (el, removeFromFlow = "}]},{"type":"element","tag":"span","props":{"class":"ct-ac126a"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":") => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-99cb51"},"children":[{"type":"text","value":"removeFromFlow"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" ? (el.style.display = "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"'none'"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"  : (el"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".style.visibility"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6b90ae"},"children":[{"type":"text","value":"'hidden'"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"从-url-中获取参数"},"children":[{"type":"text","value":"从 URL 中获取参数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 中有一个 URL 对象，通过它可以非常方便的获取 URL 中的参数。"}]},{"type":"element","tag":"code","props":{"code":"const deepCopy = obj => JSON.parse(JSON.stringify(obj))\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"const deepCopy = obj => JSON"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".parse"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(JSON"}]},{"type":"element","tag":"span","props":{"class":"ct-6cc441"},"children":[{"type":"text","value":".stringify"}]},{"type":"element","tag":"span","props":{"class":"ct-c9f129"},"children":[{"type":"text","value":"(obj))"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4510f5{color:#6A9955}\n.ct-aa9f08{color:#C586C0}\n.ct-6b90ae{color:#CE9178}\n.ct-ac126a{color:#569CD6}\n.ct-99cb51{color:#DCDCAA}\n.ct-6cc441{color:#D7BA7D}\n.ct-07d543{color:#B5CEA8}\n.ct-c9f129{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"生成随机颜色","depth":2,"text":"生成随机颜色"},{"id":"数组重排序","depth":2,"text":"数组重排序"},{"id":"复制到剪切板","depth":2,"text":"复制到剪切板"},{"id":"滚动到顶部","depth":2,"text":"滚动到顶部"},{"id":"检测元素是否在屏幕中","depth":2,"text":"检测元素是否在屏幕中"},{"id":"检测设备","depth":2,"text":"检测设备"},{"id":"隐藏元素","depth":2,"text":"隐藏元素"},{"id":"从-url-中获取参数","depth":2,"text":"从 URL 中获取参数"}]}},"_type":"markdown","_id":"content:articles:12种常用的函数.md","_source":"content","_file":"articles/12种常用的函数.md","_extension":"md"},{"_path":"/articles/2020-04-01-js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"异步编程","description":"Javcscript是单线程机制，单线程模型指的是，JavaScript只在一个线程上运行。也就是说，JavaScript 同时只能执行一个任务，其他任务都必须在后面排队等待。JavaScript 之所以采用单线程，而不是多线程，原因是不想让浏览器变得太复杂，因为多线程需要共享资源、且有可能修改彼此的运行结果，对于一种网页脚本语言来说，这就太复杂了。","date":"2020-04-01T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Javcscript是单线程机制，单线程模型指的是，JavaScript只在一个线程上运行。也就是说，JavaScript 同时只能执行一个任务，其他任务都必须在后面排队等待。JavaScript 之所以采用单线程，而不是多线程，原因是不想让浏览器变得太复杂，因为多线程需要共享资源、且有可能修改彼此的运行结果，对于一种网页脚本语言来说，这就太复杂了。"}]},{"type":"element","tag":"h2","props":{"id":"异步编程解决了什么问题"},"children":[{"type":"text","value":"异步编程解决了什么问题？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"单线程的好处是实现起来比较简单，执行环境相对单纯；坏处是只要有一个任务耗时很长，后面的任务都必须排队等着，会拖延整个程序的执行。常见的浏览器无响应（假死），往往就是因为某一段JavaScript代码长时间运行（比如死循环），导致整个页面卡在这个地方，其他任务无法执行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了解决JavaScript执行任务只能一个一个排队执行得问题（同步执行）引入了异步编程方案来实现（异步并行执行任务），对于几种常见异步编程方案有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"回调函数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"事件监听"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"发布/订阅"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Promise对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Generator/yield（ES6）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"async/await（ES7）"}]}]},{"type":"element","tag":"h2","props":{"id":"同步和异步任务"},"children":[{"type":"text","value":"同步和异步任务"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"程序里面所有的任务，可以分成两类：同步任务（synchronous）和异步任务（asynchronous）。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"同步任务"}]},{"type":"text","value":":是指那些没有被引擎挂起、在主线程上排队执行的任务。只有前一个任务执行完毕，才能执行后一个任务。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"异步任务"}]},{"type":"text","value":":是指那些被引擎放在一边，不进入主线程、而进入任务队列的任务。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"只有引擎认为某个异步任务可以执行了（比如 Ajax 操作从服务器得到了结果），该任务（采用回调函数的形式）才会进入主线程执行。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"JavaScript"}]},{"type":"text","value":"运行时，除了一个正在运行的主线程，引擎还提供一个任务队列（task queue），里面是各种需要当前程序处理的异步任务。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"异步任务的写法通常是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"回调函数"}]},{"type":"text","value":"。一旦异步任务重新进入主线程，就会执行对应的回调函数。如果一个异步任务没有回调函数，就不会进入任务队列，也就是说，不会重新进入主线程，因为没有用回调函数指定下一步的操作。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"下面总结一下异步操作的几种模式。"}]}]},{"type":"element","tag":"h2","props":{"id":"_1回调函数"},"children":[{"type":"text","value":"1、回调函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"回调函数是异步操作最基本的方法，一般指函数里面嵌套函数来调用其他函数。"}]},{"type":"element","tag":"code","props":{"code":"function f1(callback) {\r\n  // ...\r\n  callback();\r\n}\r\n\r\nfunction f2() {\r\n  // ...\r\n}\r\n\r\nf1(f2);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"优点"}]},{"type":"text","value":"：简单、容易理解和实现。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"缺点"}]},{"type":"text","value":"：不利于代码的阅读和维护，容易形成‘回调地狱’，各个部分之间高度耦合（coupling），使得程序结构混乱、流程难以追踪（尤其是多个回调函数嵌套的情况），而且每个任务只能指定一个回调函数。"}]}]},{"type":"element","tag":"h2","props":{"id":"_2事件监听"},"children":[{"type":"text","value":"2、事件监听"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"事件监听是采用事件驱动模式。异步任务的执行不取决于代码的顺序，而取决于某个事件是否发生。"}]},{"type":"element","tag":"code","props":{"code":"f1.on('done', f2);\r\n\r\nfunction f1() {\r\n  setTimeout(function () {\r\n    // ...\r\n    f1.trigger('done'); // 触发done事情\r\n  }, 1000);\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"trigger"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// 触发done事情\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码使用JQuery编写， 首先，为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"绑定一个事件，当 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"发生 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"done"}]},{"type":"text","value":"事件，就执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"执行完成后，立即触发 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"done"}]},{"type":"text","value":"事件，从而开始执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"优点"}]},{"type":"text","value":"：比较容易理解，可以绑定多个事件，每个事件可以指定多个回调函数，而且可以\"去耦合\"（Decoupling），有利于实现模块化。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"缺点"}]},{"type":"text","value":"：整个程序都要变成事件驱动型，运行流程会变得很不清晰。"}]}]},{"type":"element","tag":"h2","props":{"id":"_3发布订阅"},"children":[{"type":"text","value":"3、发布/订阅"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"事件完全可以理解成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"信号"}]},{"type":"text","value":"，如果存在一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"信号中心"}]},{"type":"text","value":"，某个任务执行完成，就向信号中心 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"发布"}]},{"type":"text","value":"一个信号，其他任务可以向信号中心 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"订阅"}]},{"type":"text","value":"这个信号，从而知道什么时候自己可以开始执行。这就叫做 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"发布/订阅模式"}]},{"type":"text","value":"，又称 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"观察者模式"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"// 订阅信号\r\njQuery.subscribe('done', f2);\r\n\r\nfunction f1() {\r\n  setTimeout(function () {\r\n    // ...\r\n    // 向信号中心jQuery发布done信号,从而引发f2的执行\r\n    jQuery.publish('done');\r\n  }, 1000);\r\n}\r\n\r\n// 取消订阅\r\njQuery.unsubscribe('done', f2);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// 订阅信号\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"jQuery"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"subscribe"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// 向信号中心jQuery发布done信号,从而引发f2的执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"jQuery"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"publish"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// 取消订阅\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"jQuery"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"unsubscribe"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'done'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码使用JQuery编写，首先，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"向信号中心 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"订阅 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"done"}]},{"type":"text","value":"信号。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"执行完成后，向信号中心 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"发布 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"done"}]},{"type":"text","value":"信号，从而引发 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"的执行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这种方法的性质与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"事件监听"}]},{"type":"text","value":"类似，但是明显优于后者。因为可以通过查看 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"消息中心"}]},{"type":"text","value":"，了解存在多少信号、每个信号有多少订阅者，从而监控程序的运行。"}]},{"type":"element","tag":"h2","props":{"id":"_4promise"},"children":[{"type":"text","value":"4、Promise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" 实际就是一个对象， 从它可以获得异步操作的消息，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" 对象有三种状态，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pending"}]},{"type":"text","value":"(进行中)、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fulfilled"}]},{"type":"text","value":"（已成功）和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rejected"}]},{"type":"text","value":"（已失败）。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" 的状态一旦改变之后，就不会在发生任何变化,将回调函数变成了链式调用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" 的设计思想是，每一个异步任务返回一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":"对象，该对象有一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"then"}]},{"type":"text","value":"方法，用来指定下一步的回调函数。"}]},{"type":"element","tag":"code","props":{"code":"var p1 = new Promise(f1);\r\np1.then(f2);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d7a7da"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码中，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"的异步操作执行完成，就会执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"function f1(){\r\n    var dfd = $.Deferred();\r\n    setTimeout(function () {\r\n        // f1的任务代码\r\n        dfd.resolve();\r\n    }, 500);\r\n    return dfd.promise;\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"dfd"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"Deferred"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// f1的任务代码\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"dfd"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"dfd"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每次调用返回的都是一个新的Promise实例(then可用链式调用的原因)"}]},{"type":"element","tag":"code","props":{"code":"// 传统写法\r\nstep1(function (value1) {\r\n  step2(value1, function(value2) {\r\n    step3(value2, function(value3) {\r\n      step4(value3, function(value4) {\r\n        // ...\r\n      });\r\n    });\r\n  });\r\n});\r\n\r\n// Promise 的写法\r\n(new Promise(step1))\r\n  .then(step2)\r\n  .then(step3)\r\n  .then(step4);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// 传统写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"step1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"step2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"step3"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value3"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"step4"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value3"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"value4"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"      });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// Promise 的写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d7a7da"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"step1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"step2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"step3"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"step4"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"传统的写法可能需要把 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"作为回调函数传入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"，比如写成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1(f2)"}]},{"type":"text","value":"，异步操作完成后，在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"内部调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":"使得 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f1"}]},{"type":"text","value":"和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"f2"}]},{"type":"text","value":"变成了链式写法。不仅改善了可读性，而且对于多层嵌套的回调函数尤其方便。"}]},{"type":"element","tag":"h2","props":{"id":"_5generator"},"children":[{"type":"text","value":"5、Generator"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数是协程在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ES6"}]},{"type":"text","value":" 的实现，最大特点就是可以交出函数的执行权（即暂停执行）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数是一个状态机，封装了多个内部状态。执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数会返回一个遍历器对象，使用该对象的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"next()"}]},{"type":"text","value":" 方法，可以遍历 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数内部的每一个状态，直到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" 语句。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数的特征:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" 关键字与函数名之间有一个星号"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"函数体内部使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yield"}]},{"type":"text","value":" 表达式，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yield"}]},{"type":"text","value":" 是暂停执行的标记"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"next()"}]},{"type":"text","value":" 方法遇到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yield"}]},{"type":"text","value":" 表达式，就暂停执行后面的操作,并返回后面的值。"}]}]},{"type":"element","tag":"code","props":{"code":"function* gen(x){\r\n  var y = yield x + 2;\r\n  return y;\r\n}\r\n\r\nvar g = gen(1);\r\ng.next() // { value: 3, done: false }\r\ng.next(2) // { value: 2, done: true }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"gen"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"gen"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// { value: 3, done: false }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"next"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// { value: 2, done: true }"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码中，第一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"next"}]},{"type":"text","value":" 方法的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" 属性，返回表达式 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x + 2"}]},{"type":"text","value":" 的值 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"3"}]},{"type":"text","value":"。第二个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"next"}]},{"type":"text","value":" 方法带有参数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"2"}]},{"type":"text","value":"，这个参数可以传入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数，作为上个阶段异步任务的返回结果，被函数体内的变量 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"y"}]},{"type":"text","value":" 接收。因此，这一步的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" 属性，返回的就是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"2"}]},{"type":"text","value":"（变量 y 的值）。"}]},{"type":"element","tag":"h2","props":{"id":"_6asyncawait"},"children":[{"type":"text","value":"6、async/await"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" 函数就是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":" 函数的语法糖。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" 函数返回一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" 对象，可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"then"}]},{"type":"text","value":" 方法添加回调函数。当函数执行的时候，一旦遇到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" 就会先返回，等到触发的异步操作完成，再接着执行函数体内后面的语句。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async/await"}]},{"type":"text","value":"的特征有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async/await"}]},{"type":"text","value":"是基于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":"实现的，它不能用于普通的回调函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async/await"}]},{"type":"text","value":"与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":"一样，是非阻塞的。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async/await"}]},{"type":"text","value":"使得异步代码看起来像同步代码，这正是它的魔力所在。"}]}]},{"type":"element","tag":"code","props":{"code":"async function async1() {\r\n  return 2\r\n}\r\nconsole.log(async1()) // Promise {<resolved>: 2}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"async1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f729d8"},"children":[{"type":"text","value":"2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"async1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"()) "}]},{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// Promise {<resolved>: 2}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码中，函数前面加上 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" 就会返回一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"promise"}]},{"type":"text","value":" 对象。"}]},{"type":"element","tag":"code","props":{"code":"const fs = require('fs');\r\n\r\nconst readFile = function (fileName) {\r\n  return new Promise(function (resolve, reject) {\r\n    fs.readFile(fileName, function(error, data) {\r\n      if (error) return reject(error);\r\n      resolve(data);\r\n    });\r\n  });\r\n};\r\n// Generator 函数写法\r\nconst gen = function* () {\r\n  const f1 = yield readFile('/etc/fstab');\r\n  const f2 = yield readFile('/etc/shells');\r\n  console.log(f1.toString());\r\n  console.log(f2.toString());\r\n};\r\n\r\n// aynsc 函数写法\r\nconst asyncReadFile = async function () {\r\n  const f1 = await readFile('/etc/fstab');\r\n  const f2 = await readFile('/etc/shells');\r\n  console.log(f1.toString());\r\n  console.log(f2.toString());\r\n};\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14aa4b"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"fileName"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d7a7da"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"fileName"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// Generator 函数写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"gen"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function*"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14aa4b"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'/etc/fstab'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14aa4b"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"yield"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'/etc/shells'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca0565"},"children":[{"type":"text","value":"// aynsc 函数写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"asyncReadFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14aa4b"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'/etc/fstab'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4bb509"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-14aa4b"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6c4a9a"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2c5239"},"children":[{"type":"text","value":"'/etc/shells'"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f1"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-565978"},"children":[{"type":"text","value":"f2"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3df832"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-56eaea"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一比较就会发现，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":"函数就是将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":"函数的星号 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":"替换成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async"}]},{"type":"text","value":"，将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yield"}]},{"type":"text","value":"替换成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"await"}]},{"type":"text","value":"，仅此而已。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"优点"}]},{"type":"text","value":"：更好的语义,更广的适用性,返回值是 Promise。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JS 异步编程发展史："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callback"}]},{"type":"text","value":" -> "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"promise"}]},{"type":"text","value":" -> "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"generator"}]},{"type":"text","value":" -> "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async + await"}]},{"type":"text","value":"。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"async/await"}]},{"type":"text","value":"函数的实现是将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Generator"}]},{"type":"text","value":"函数和自动执行器，包装在一个函数里。它也是目前异步最好的解决方案了。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-14aa4b{color:#4FC1FF}\n.ct-6c4a9a{color:#C586C0}\n.ct-d7a7da{color:#4EC9B0}\n.ct-f729d8{color:#B5CEA8}\n.ct-2c5239{color:#CE9178}\n.ct-ca0565{color:#6A9955}\n.ct-565978{color:#9CDCFE}\n.ct-3df832{color:#DCDCAA}\n.ct-56eaea{color:#D4D4D4}\n.ct-4bb509{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"异步编程解决了什么问题","depth":2,"text":"异步编程解决了什么问题？"},{"id":"同步和异步任务","depth":2,"text":"同步和异步任务"},{"id":"_1回调函数","depth":2,"text":"1、回调函数"},{"id":"_2事件监听","depth":2,"text":"2、事件监听"},{"id":"_3发布订阅","depth":2,"text":"3、发布/订阅"},{"id":"_4promise","depth":2,"text":"4、Promise"},{"id":"_5generator","depth":2,"text":"5、Generator"},{"id":"_6asyncawait","depth":2,"text":"6、async/await"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:2020-04-01-Js异步编程方案总结.md","_source":"content","_file":"articles/2020-04-01-Js异步编程方案总结.md","_extension":"md"},{"_path":"/articles/2020-05-02-js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深入 JS 之作用域和闭包","description":"本篇博客主要是对 Javcscript 作用域和闭包学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 作用域和闭包学习理解"}]}]},"date":"2020-05-01T00:00:00.000Z","tags":["Closure","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 作用域和闭包学习理解"}]},{"type":"element","tag":"h2","props":{"id":"作用域"},"children":[{"type":"text","value":"作用域"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"编译原理对作用域的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用域是指声明的变量在程序中的一个区域，在其中对变量的使用都指向这个声明。如果仅通过阅读程序就可以确定一个变量的作用域，那么语言使用的是词法作用域，否则，这个语言使用的是动态作用域。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用域用一句话概括就是规定如何查找变量，检查是否对变量有访问权限。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 采用词法作用域，也叫静态作用域。"}]},{"type":"element","tag":"h2","props":{"id":"编译"},"children":[{"type":"text","value":"编译"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MDN 对 JavaScript 的定义为："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 是一种解释型或即时编译型的编程语言。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 语言是解释型语言，解释型语言的特点是逐个语句地执行源程序，会出现性能低下问题。而谷歌团队为解决 web 前端工作者的 JavaScript 性能低下问题，首次在脚本引擎（V8）中使用的即时编译（JIT），加上使用隐藏类和内联缓存等方法，使 JavaScript 语言拥有堪比主流编程语言（Java）的执行速度。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"思考下面 🌰 ："}]},{"type":"element","tag":"code","props":{"code":"var greeting = \"Hello\";\r\n\r\nconsole.log(greeting);\r\n\r\nvar greeting = .\"Hello\";\r\n\r\n// SyntaxError: Unexpected token '.'\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8bd768"},"children":[{"type":"text","value":"\"Hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = ."}]},{"type":"element","tag":"span","props":{"class":"ct-8bd768"},"children":[{"type":"text","value":"\"Hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// SyntaxError: Unexpected token '.'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先，根据解释型语言的定义，代码会在执行时被编译且逐行执行。上面代码执行结果应是先输出变量，接着赋值报错。但是实际结果是直接报错。是由于执行程序的前一刻会进行编译。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 脚本引擎的工作方式来进一步理解上面的 🌰："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"脚本引擎要开始解释执行，得通过词法分析和语法分析得到语法分析树后才可以。当要执行 script 代码段，它的执行顺序如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读入代码。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"做词法分析和语法分析，有错则报语法错误。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对 var 变量和 function 定义做“预解析”。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"执行代码，有错则报错。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后，我们可以清楚的明白，代码在程序执行的前一刻在编译做语法分析的时候，遇到语法错误所以直接报错，区别与传统的解释型语言，JavaScript 是解析器和编译器混合使用。程序最后其实并没有执行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面过程，可以将 JavaScript 引擎工作方式归结两个阶段：解析和执行。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"解析：通过语法分析和预解析构造合法的语法分析树。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"执行：执行具体的某个 function， JavaScript 引擎在执行每个函数实例时， 都会创建一个执行环境 (Execution Context) 和活动对象 (Active Object) 。"}]}]},{"type":"element","tag":"h2","props":{"id":"词法作用域"},"children":[{"type":"text","value":"词法作用域"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要真正理解首先要先了解几个比较重要的概念。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"词法作用域定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"词法作用域指变量的作用域不是执行时决定而是在定义时决定，也就是说通过静态分析就能确定，词法作用域取决于源码，因此词法作用域也叫做静态作用域。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ES5中使用词法环境管理词法作用域。ES6中作用域的概念变成了词法环境概念。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"编译原理对环境和状态的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"环境指的是名字到变量的映射（内存位置）。状态是内存位置到它们值的映射。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"词法环境的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"词法环境 是一个用于定义特定变量和函数标识符在 ECMAScript 代码的词法嵌套结构上关联关系的规范类型。简单来说是 JavaScript 引擎内部用来跟踪标识符和变量之间的映射关系。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"词法环境由一个环境记录项和可能为空的外部词法环境引用构成。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量环境组件和词法环境，又统称为词法环境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量环境的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"变量标识符和函数标识符对内存位置的映射，简单来说声明的变量函数它们知道自己的数据存储在哪里。（等同于词法环境）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行环境（也称执行上下文）的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行环境就是当前 JavaScript 代码被解析和执行时所在环境的抽象概念， JavaScript 中运行任何的代码都是在执行环境中运行。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每调用一个函数就会生成一个函数执行环境，script 标签里的代码可以看成是一个立即执行的“匿名函数”，这个被称为全局执行环境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ES5 执行环境组成部分："}]},{"type":"element","tag":"code","props":{"code":"ExecutionContext = {\r\n  ThisBinding: <this value>,\r\n  VariableEnvironment: { ... }, // 变量环境\r\n  LexicalEnvironment: { ... }   // 词法环境\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"ExecutionContext"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"ThisBinding:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-053ab1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-053ab1"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  VariableEnvironment: "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ... "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":", // 变量环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  LexicalEnvironment: "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ... "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"   // 词法环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"进一步理解，来看下面 🌰："}]},{"type":"element","tag":"code","props":{"code":"// __outer__：外部词法环境引用，x、y：环境记录项。\r\n// 全局环境变量 VariableEnvironment (global) = { __outer__: null }\r\n// 词法环境 LexicalEnvironment = VariableEnvironment (global)\r\n\r\n// 立即执行函数foo\r\n(function foo() {\r\n  //1、 这里命名为A（随便取用于区分下面） 的变量环境\r\n  //（可以理解为执行之前分配内存空间，初始化为undefined）\r\n  // VariableEnvironment (A) = { x: undefined, __outer__: global } \r\n  \r\n  //2、 词法环境等同于变量环境的原因，变量环境是词法环境的引用\r\n  // LexicalEnvironment = VariableEnvironment (A) \r\n\r\n  var x;\r\n  // 立即执行函数bar\r\n  (function bar(){\r\n    // 初始化词法环境\r\n    // VariableEnvironment (B) = { y: undefined, __outer__: A }\r\n    // LexicalEnvironment = VariableEnvironment (B)\r\n\r\n    var y;\r\n\r\n    x = 2;\r\n    // 初始化词法环境完成之后，立即执行 x=2 语句，通过__outer__找到外部的x\r\n    // VariableEnvironment (A) = { x: 2, __outer__: global }\r\n    // bar LexicalEnvironment 仍然是 VariableEnvironment (B)\r\n\r\n  })();\r\n\r\n})();\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// __outer__：外部词法环境引用，x、y：环境记录项。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 全局环境变量 VariableEnvironment (global) = { __outer__: null }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 词法环境 LexicalEnvironment = VariableEnvironment (global)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 立即执行函数foo\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"//1、 这里命名为A（随便取用于区分下面） 的变量环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"//（可以理解为执行之前分配内存空间，初始化为undefined）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// VariableEnvironment (A) = { x: undefined, __outer__: global } \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"//2、 词法环境等同于变量环境的原因，变量环境是词法环境的引用\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// LexicalEnvironment = VariableEnvironment (A) \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 立即执行函数bar\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  ("}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 初始化词法环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// VariableEnvironment (B) = { y: undefined, __outer__: A }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// LexicalEnvironment = VariableEnvironment (B)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 初始化词法环境完成之后，立即执行 x=2 语句，通过__outer__找到外部的x\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// VariableEnvironment (A) = { x: 2, __outer__: global }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// bar LexicalEnvironment 仍然是 VariableEnvironment (B)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  })();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"})();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建执行环境时，变量环境和词法环境最初是同一个值（变量环境指向词法环境），在执行环境执行相关代码过程中，变量环境组件永远不变，而词法环境组件有可能改变（with、eval可以改变词法环境），在函数即将执行前，会对var和function声明进行预解析，然后执行代码。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"再看一个 🌰："}]},{"type":"element","tag":"code","props":{"code":"var x = 10; // 语句会拆成两个阶段，预解析var x；执行代码 x = 10；\r\n\r\nfunction foo() {\r\n  var y = 20;\r\n console.log(x + y); // 30\r\n}\r\n\r\n// 词法环境由一个环境记录项（environmentRecord）和可能为空的\r\n// 外部词法环境 （outer environment）引用构成。\r\n\r\n// 执行环境执行之前的结果（创建函数阶段）\r\nVariableEnvironment (global) = {\r\n  environmentRecord: {\r\n    // 分配内存默认为undefined；\r\n    x: undefined\r\n  },\r\n  outer: null // 没有外部环境\r\n};\r\n\r\n//  \"foo\" 函数变量环境\r\nVariableEnvironment (foo) = {\r\n  environmentRecord: {\r\n    y: undefined\r\n  },\r\n  outer: globalEnvironment // 指向全局环境\r\n};\r\n\r\n\r\n// 全局作用域下的环境执行之后的结果\r\nVariableEnvironment (global) = {\r\n  environmentRecord: {\r\n    // 绑定的值\r\n    x: 10\r\n  },\r\n  outer: null // 没有外部环境\r\n};\r\n\r\n//  \"foo\" 函数环境\r\nVariableEnvironment (foo) = {\r\n  environmentRecord: {\r\n    y: 20\r\n  },\r\n  outer: globalEnvironment // 指向全局环境\r\n};\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 语句会拆成两个阶段，预解析var x；执行代码 x = 10；\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 30\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 词法环境由一个环境记录项（environmentRecord）和可能为空的\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 外部词法环境 （outer environment）引用构成。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 执行环境执行之前的结果（创建函数阶段）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"VariableEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"global"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":") = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"environmentRecord:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 分配内存默认为undefined；\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"outer:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 没有外部环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"//  \"foo\" 函数变量环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"VariableEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":") = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"environmentRecord:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"y:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"outer:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"globalEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 指向全局环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 全局作用域下的环境执行之后的结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"VariableEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"global"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":") = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"environmentRecord:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 绑定的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"x:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"10\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"outer:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 没有外部环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"//  \"foo\" 函数环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"VariableEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":") = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"environmentRecord:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"y:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"20\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"outer:"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"globalEnvironment"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// 指向全局环境\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行结果流程图："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/4/16/1717ea3374f17dff?w=452&h=333&f=png&s=40934"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过上面个栗子，无论何时调用函数都会创建一个新的执行环境，被推入执行上下文栈，此外还会创建与之关联的词法环境和变量环境。新建的词法环境通过外部环境引用进行关联。在执行代码之前，词法环境会访问并注册在当前词法作用域中所声明的变量，词法环境通过变量环境跟踪变量的作用域。特别注意是对 var 声明的变量和 function 声明函数！！！"}]},{"type":"element","tag":"code","props":{"code":"console.log(a);\r\n// Cannot access 'a' before initialization\r\n\r\nlet a = 1\r\n\r\nconsole.log(b)\r\n// undefined\r\n\r\nvar b = function() {\r\n    console.log(\"我调用了个函数\")\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// Cannot access 'a' before initialization\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-4d4437"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1851e"},"children":[{"type":"text","value":"// undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c42d0a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e43f92"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-43df80"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8bd768"},"children":[{"type":"text","value":"\"我调用了个函数\""}]},{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-3909c3"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"闭包"},"children":[{"type":"text","value":"闭包"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"MDN 中对闭包的定义："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"函数和对其周围状态（词法环境）的引用捆绑在一起构成闭包。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"面试官问什么是闭包？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我想大部分小伙伴都是闭包就是能够读取其他函数内部变量的函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"说实话没深入研究之前，我也是背背表面概念（毕竟网上一大堆都是这样说的）。通过对上面词法作用域的理解以后，我们突然会觉得上面的 MDN 定义太准确了。仔细分析就是外函数里面嵌套一个内函数并返回内函数，但调用内函数的时候，会创建词法环境，外部环境引用（上文的outer）指向外函数词法环境，直到全局词法环境执行指向 null。即使外函数词法环境已经消失，但还是可以通过内函数的词法环境外部环境指向访问到，这就是闭包。调用 N 次内函数，就会创建 N 个词法环境和 N 个闭包。"}]},{"type":"element","tag":"h2","props":{"id":"写在最后"},"children":[{"type":"text","value":"写在最后"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"用心写篇文章不易，如果内容中有不妥的地方欢迎指正，当然博客只是学习参考的依据，真正要学到掌握还是需要自己下功夫和研究的。毕竟别人的理解并不一定是自己的理解。如果对你有所帮助欢迎点赞收藏，码字不易，大家加油！！！"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4d4437{color:#B5CEA8}\n.ct-053ab1{color:#808080}\n.ct-b1851e{color:#6A9955}\n.ct-43df80{color:#DCDCAA}\n.ct-8bd768{color:#CE9178}\n.ct-e43f92{color:#9CDCFE}\n.ct-3909c3{color:#D4D4D4}\n.ct-c42d0a{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"作用域","depth":2,"text":"作用域"},{"id":"编译","depth":2,"text":"编译"},{"id":"词法作用域","depth":2,"text":"词法作用域"},{"id":"闭包","depth":2,"text":"闭包"},{"id":"写在最后","depth":2,"text":"写在最后"}]}},"_type":"markdown","_id":"content:articles:2020-05-02-深入Js之我是如何搞懂作用域和闭包的.md","_source":"content","_file":"articles/2020-05-02-深入Js之我是如何搞懂作用域和闭包的.md","_extension":"md"},{"_path":"/articles/2020-05-02","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"主题使用指南","description":"本篇博客主要是介绍本博客主题如何使用。","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是介绍本博客主题如何使用。"}]}]},"date":"2020-05-02T00:00:00.000Z","tags":["Vuepress","Vue"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是介绍本博客主题如何使用。"}]},{"type":"element","tag":"h2","props":{"id":"速览"},"children":[{"type":"text","value":"速览"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这是一款 Vuepress 主题，集成了博客所需的分类、TAG墙、分页、评论等功能。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主题追求极简，配置上手简单，适配移动端。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"www.ydlcq.cn"},"children":[{"type":"text","value":"预览地址"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/youdeliang/vuepress-theme-melodydl","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub地址"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"博客效果展示："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/5/2/171d4a46cd1c4caf?w=599&h=287&f=gif&s=1994152"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"主题使用"},"children":[{"type":"text","value":"主题使用"}]},{"type":"element","tag":"h3","props":{"id":"安装主题"},"children":[{"type":"text","value":"安装主题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建一个新的项目 my-blog："}]},{"type":"element","tag":"code","props":{"code":"mkdir my-blog\r\ncd my-blog\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"my"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"blog\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"my"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"blog"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"初始化 yarn 或 npm ："}]},{"type":"element","tag":"code","props":{"code":"yarn init  或 npm init -y\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"或"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"y"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装 vuepress 和 vuepress-theme-melodydl："}]},{"type":"element","tag":"code","props":{"code":"yarn add vuepress vuepress-theme-melodydl\r\n或\r\nnpm install vuepress vuepress-theme-melodydl\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"theme"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"melodydl\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"或\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"theme"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"melodydl"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建 src/_posts 文件夹和 Vuepress 配置文件，项目结构大致为："}]},{"type":"element","tag":"code","props":{"code":"my-blog\r\n├── src # Blog 源文件目录\r\n│   ├── .vuepress # Vuepress 目录\r\n│   │   └── public # Vuepress 静态资源文件\r\n│   │   └── config.js # Vuepress 配置文件\r\n│   └── about # About 页面 文件夹\r\n│   │   ├── index.md  # about 页面内容文件\r\n│   └── _posts # 博客文件夹\r\n│       ├── xxx.md\r\n│       ...\r\n└── package.json\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"my"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"blog\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"├── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"Blog"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"源文件目录\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   ├── ."}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"Vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"目录\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   │   └── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"Vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"静态资源文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   │   └── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"js"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"Vuepress"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"配置文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   └── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"about"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"About"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"页面"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"文件夹\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   │   ├── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"md"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"  # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"about"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"页面内容文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│   └── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"_posts"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" # "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"博客文件夹\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│       ├── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"xxx"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"md\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"│       ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"└── "}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"package"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":"json"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 package.json 加入 script 字段："}]},{"type":"element","tag":"code","props":{"code":"{\r\n  \"scripts\": {\r\n    \"dev\": \"vuepress dev src\",\r\n    \"build\": \"vuepress build src\"\r\n  }\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-446371"},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-446371"},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-446371"},"children":[{"type":"text","value":"\"vuepress dev src\""}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-446371"},"children":[{"type":"text","value":"\"build\""}]},{"type":"element","tag":"span","props":{"class":"ct-2edcd6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-446371"},"children":[{"type":"text","value":"\"vuepress build src\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e70047"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"配置主题"},"children":[{"type":"text","value":"配置主题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 src/.vuepress/config.js 中配置 Vuepress 和主题："}]},{"type":"element","tag":"details","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"summary","props":{},"children":[{"type":"text","value":"点击展示配置示例"}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\r\n    // 网站 Title\r\n      title: 'Top 的博客 ｜ Top Blog',\r\n\r\n// 网站描述\r\n      description: '个人博客',\r\n\r\n// 网站 favicon 图标设置等\r\n      head: [\r\n        ['link', { rel: 'icon', href: '/favicon.ico' }],\r\n        ['meta', { name: 'viewport', content: 'width=device-width,initial-scale=1,user-scalable=no' }]\r\n      ],\r\n\r\n// 使用的主题\r\n      theme: 'melodydl',\r\n\r\n// 主题配置\r\n      themeConfig: {\r\n        title: 'Top Blog',\r\n\r\n// 个人信息（没有或不想设置的，删掉对应字段即可）\r\n    personalInfo: {\r\n\r\n// 名称\r\n      name: 'melodydl',\r\n\r\n// 头像 public文件夹下\r\n      avatar: '/avatar-top.jpeg',\r\n\r\n// 头部背景图\r\n      headerBackgroundImg: '/avatar-bg.jpeg',\r\n\r\n// 个人简介 (支持 HTML)\r\n      description: 'In me the tiger sniffs the rose`<br/>`心有猛虎，细嗅蔷薇',\r\n\r\n// 电子邮箱\r\n      email: 'facecode@foxmail.com',\r\n\r\n// 所在地\r\n      location: 'Shanghai, China'\r\n    },\r\n    // 顶部导航栏内容\r\n    nav: [\r\n      {text: 'HOME', link: '/' },\r\n      {text: 'ABOUT', link: '/about/'},\r\n      {text: 'TAGS', link: '/tags/'}\r\n],\r\n\r\n// 首页头部标题背景图设置，图片直接放在 public 文件夹下\r\n    header: {\r\n      home: {\r\n        title: 'Top Blog',\r\n        subtitle: '好好生活，慢慢相遇',\r\n        headerImage: '/home-bg.jpeg'\r\n      },\r\n\r\n// tag页面头部标题背景图设置，图片直接放在 public 文件夹下\r\n      tags: {\r\n        title: 'Tags',\r\n        subtitle: '遇见你花光了我所有的运气',\r\n        headerImage: '/tags-bg.jpg'\r\n      },\r\n\r\n// 文章详情头部背景图\r\n      postHeaderImg: '/post-bg.jpeg',\r\n    },\r\n\r\n// 社交平台帐号信息\r\n    sns: {\r\n      // 简书账号和链接\r\n      \"jianshu\": {\r\n        account: \"jianshu\",\r\n        link: \"https://www.jianshu.com/u/5dddaee8f351\",\r\n      },\r\n\r\n// 新浪 账号和链接\r\n      \"weibo\": {\r\n        account: \"\",\r\n        link: \"\"\r\n      },\r\n\r\n// 知乎 帐号和链接\r\n      \"zhihu\": {\r\n        account: \"zhihu\",\r\n        link: \"https://www.zhihu.com/people/sheng-tang-de-xing-kong\"\r\n      },\r\n\r\n// Github 帐号和链接\r\n      \"github\": {\r\n        account: \"github\",\r\n        link: \"https://github.com/youdeliang\"\r\n      }\r\n    },\r\n    // 底部 footer 的相关设置\r\n    footer: {\r\n      // gitbutton  配置\r\n      gitbtn: {\r\n        // 仓库地址\r\n        repository: \"https://ghbtns.com/github-btn.html?user=youdeliang&repo=vuepress-theme-top&type=star&count=true\",\r\n        frameborder: 0,\r\n        scrolling: 0,\r\n        width: \"80px\",\r\n        height: \"20px\"\r\n      },\r\n\r\n// 添加自定义 footer\r\n      custom:`Copyright &copy; Top Blog 2020 <br />              Theme By <a href=\"https://www.vuepress.cn/\" target=\"_blank\">VuePress</a>             | <a href=\"https://www.github.com/youdeliang/\" target=\"_blank\">youdeliang</a>`\r\n    },\r\n\r\n// 分页配置\r\n    pagination: {\r\n      // 每页文章数量\r\n      perPage: 5,\r\n    },\r\n\r\n// vssue 评论配置, 如果不需要，可以设置 comments: false\r\n    comments: {\r\nowner: 'youdeliang',\r\n      repo: 'vuepress-theme-melodydl',\r\n      clientId: 'dfba8ecad544784fec1f',\r\n      clientSecret: '1358ac11bc8face24f598601991083e27372988d',\r\n      autoCreateIssue: false,\r\n    },\r\n  }\r\n}\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"module.exports = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    // 网站 Title\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      title: 'Top 的博客 ｜ Top Blog',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 网站描述\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      description: '个人博客',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 网站 favicon 图标设置等\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      head: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ['link', { rel: 'icon', href: '/favicon.ico' }],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        ['meta', { name: 'viewport', content: 'width=device-width,initial-scale=1,user-scalable=no' }]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 使用的主题\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      theme: 'melodydl',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 主题配置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      themeConfig: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        title: 'Top Blog',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 个人信息（没有或不想设置的，删掉对应字段即可）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    personalInfo: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 名称\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      name: 'melodydl',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 头像 public文件夹下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      avatar: '/avatar-top.jpeg',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 头部背景图\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      headerBackgroundImg: '/avatar-bg.jpeg',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 个人简介 (支持 HTML)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      description: 'In me the tiger sniffs the rose`<br/>`心有猛虎，细嗅蔷薇',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 电子邮箱\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      email: 'facecode@foxmail.com',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 所在地\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      location: 'Shanghai, China'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    // 顶部导航栏内容\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    nav: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      {text: 'HOME', link: '/' },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      {text: 'ABOUT', link: '/about/'},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      {text: 'TAGS', link: '/tags/'}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 首页头部标题背景图设置，图片直接放在 public 文件夹下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    header: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      home: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        title: 'Top Blog',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        subtitle: '好好生活，慢慢相遇',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        headerImage: '/home-bg.jpeg'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// tag页面头部标题背景图设置，图片直接放在 public 文件夹下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      tags: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        title: 'Tags',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        subtitle: '遇见你花光了我所有的运气',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        headerImage: '/tags-bg.jpg'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 文章详情头部背景图\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      postHeaderImg: '/post-bg.jpeg',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 社交平台帐号信息\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    sns: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      // 简书账号和链接\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      \"jianshu\": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        account: \"jianshu\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        link: \"https://www.jianshu.com/u/5dddaee8f351\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 新浪 账号和链接\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      \"weibo\": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        account: \"\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        link: \"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 知乎 帐号和链接\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      \"zhihu\": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        account: \"zhihu\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        link: \"https://www.zhihu.com/people/sheng-tang-de-xing-kong\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// Github 帐号和链接\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      \"github\": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        account: \"github\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        link: \"https://github.com/youdeliang\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    // 底部 footer 的相关设置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    footer: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      // gitbutton  配置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      gitbtn: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        // 仓库地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        repository: \"https://ghbtns.com/github-btn.html?user=youdeliang&repo=vuepress-theme-top&type=star&count=true\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        frameborder: 0,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        scrolling: 0,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        width: \"80px\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        height: \"20px\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 添加自定义 footer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      custom:`Copyright &copy; Top Blog 2020 <br />              Theme By <a href=\"https://www.vuepress.cn/\" target=\"_blank\">VuePress</a>             | <a href=\"https://www.github.com/youdeliang/\" target=\"_blank\">youdeliang</a>`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 分页配置\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    pagination: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      // 每页文章数量\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      perPage: 5,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":116},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// vssue 评论配置, 如果不需要，可以设置 comments: false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":117},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    comments: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":118},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"owner: 'youdeliang',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":119},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      repo: 'vuepress-theme-melodydl',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":120},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      clientId: 'dfba8ecad544784fec1f',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":121},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      clientSecret: '1358ac11bc8face24f598601991083e27372988d',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":122},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      autoCreateIssue: false,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":123},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":124},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":125},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"vssue-评论插件"},"children":[{"type":"text","value":"Vssue 评论插件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你知道 Gitment 和 Gitalk，那么 Vssue 其实和它们实现的功能没什么区别 —— 在 Github 的 Issue 系统中存储评论，在你的页面上发表和展示评论，还可以编辑和删除评论，提供了 Vuepress 的插件（最初的动力就是给自己的 Vuepress 博客开启评论）。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vssue 评论插件使用可以查看文档手册。"},{"type":"element","tag":"a","props":{"href":"https://vssue.js.org/guide/","rel":["nofollow"]},"children":[{"type":"text","value":"传送门"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"about页面配置"},"children":[{"type":"text","value":"about页面配置"}]},{"type":"element","tag":"code","props":{"code":"---\r\nlayout: about \r\ntitle: About\r\nsubtitle: 你可以很好，但你无需完美\r\nheaderImage: /about-bg.jpg # public 文件夹下的图片\r\n---\r\n\r\n下面为个人信息等内容...\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"---\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"layout: about \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"title: About\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"subtitle: 你可以很好，但你无需完美\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"headerImage: /about-bg.jpg # public 文件夹下的图片\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"---\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"下面为个人信息等内容..."}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"创建博文"},"children":[{"type":"text","value":"创建博文"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 src/_posts 下创建 md 文件"}]},{"type":"element","tag":"code","props":{"code":"<!-- _posts/2019-04-01-JS异步编程方案总结.md -->\r\n---\r\ntitle: \"JS异步编程方案总结\"\r\ndate: 2019-04-01\r\ntags:\r\n  - Promise\r\n  - JavaScript\r\n---\r\n\r\n本篇博客主要是对 Javcscript 异步编程方案总结\r\n\r\nmore 上面的内容是摘要，将显示在目录中。\r\n\r\n<!-- more -->\r\n\r\nmore 下面的内容只有浏览这篇文章时才会完全展示，不会显示在目录中。\r\n\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- _posts/2019-04-01-JS异步编程方案总结.md -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"---\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"title: \"JS异步编程方案总结\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"date: 2019-04-01\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"tags:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  - Promise\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  - JavaScript\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"---\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 异步编程方案总结\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"more 上面的内容是摘要，将显示在目录中。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- more -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"more 下面的内容只有浏览这篇文章时才会完全展示，不会显示在目录中。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"运行相应 script 生成你的博客网站"}]},{"type":"element","tag":"code","props":{"code":"# 开发\r\nnpm run dev\r\n# 构建\r\nnpm run build\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# 开发\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"npm run dev\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# 构建\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"npm run build"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"使用-github-pages-部署"},"children":[{"type":"text","value":"使用 GitHub pages 部署"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"部署具体步骤可以参考 Vuepress 官方文档。 "},{"type":"element","tag":"a","props":{"href":"https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages","rel":["nofollow"]},"children":[{"type":"text","value":"传送门"}]}]},{"type":"element","tag":"h2","props":{"id":"最后"},"children":[{"type":"text","value":"最后"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果觉得主题好用的话，欢迎点赞和 "},{"type":"element","tag":"a","props":{"href":"https://github.com/youdeliang/vuepress-theme-melodydl","rel":["nofollow"]},"children":[{"type":"text","value":"Star"}]},{"type":"text","value":"，你的鼓励是对我莫大的支持，谢谢🙏。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-446371{color:#CE9178}\n.ct-e70047{color:#D4D4D4}\n.ct-2edcd6{color:#9CDCFE}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"速览","depth":2,"text":"速览"},{"id":"主题使用","depth":2,"text":"主题使用","children":[{"id":"安装主题","depth":3,"text":"安装主题"},{"id":"配置主题","depth":3,"text":"配置主题"},{"id":"vssue-评论插件","depth":3,"text":"Vssue 评论插件"},{"id":"about页面配置","depth":3,"text":"about页面配置"},{"id":"创建博文","depth":3,"text":"创建博文"},{"id":"使用-github-pages-部署","depth":3,"text":"使用 GitHub pages 部署"}]},{"id":"最后","depth":2,"text":"最后"}]}},"_type":"markdown","_id":"content:articles:2020-05-02-主题使用指南.md","_source":"content","_file":"articles/2020-05-02-主题使用指南.md","_extension":"md"},{"_path":"/articles/2020-05-02-cssz-indexopacity","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"CSS中z-index属性在使用opacity后失效","description":"本篇博客主要是对 CSS 中 z-index 属性在使用 opacity 后失效","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 CSS 中 z-index 属性在使用 opacity 后失效"}]}]},"date":"2020-05-01T00:00:00.000Z","tags":["css"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 CSS 中 z-index 属性在使用 opacity 后失效"}]},{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当父盒子背景需要修改透明度 和 子盒子使用 z-index 提高层级的时候，会出现以下情况,会被阻挡"}]},{"type":"element","tag":"h2","props":{"id":"原因"},"children":[{"type":"text","value":"原因"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"父盒子的 opacity 会导致 子盒子在使用 z-index 的失效"}]},{"type":"element","tag":"h2","props":{"id":"解决办法"},"children":[{"type":"text","value":"解决办法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比如 父盒子背景需要设置颜色为白色， opacity 为 0.8 的时候，可以将背景颜色修改为 rgba 写法 通过第四个值，alpha 值，制定了色彩的透明度/不透明度，它的范围为 0.0 到 1.0 之间,0.5 为半透明。可以解决子元素 z-index 失效，这样就能避免使用 opacity."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"原因","depth":2,"text":"原因"},{"id":"解决办法","depth":2,"text":"解决办法"}]}},"_type":"markdown","_id":"content:articles:2020-05-02-CSS中z-index属性在使用opacity后失效.md","_source":"content","_file":"articles/2020-05-02-CSS中z-index属性在使用opacity后失效.md","_extension":"md"},{"_path":"/articles/2020-05-29","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深入 JS 之原型和原型链","description":"本篇博客主要是对 Javcscript 原型和原型链的学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 原型和原型链的学习理解"}]}]},"date":"2020-05-29T00:00:00.000Z","tags":["原型链","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 原型和原型链的学习理解"}]},{"type":"element","tag":"h2","props":{"id":"理解原型"},"children":[{"type":"text","value":"理解原型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 常被描述为一种基于原型的语言——每个对象拥有一个原型对象，对象以其原型为模板、从原型继承方法和属性。原型对象也可能拥有原型，并从中继承方法和属性，一层一层、以此类推。这种关系常被称为原型链。"}]},{"type":"element","tag":"h2","props":{"id":"构造函数创建对象"},"children":[{"type":"text","value":"构造函数创建对象"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 中使用 new 操作符，通过构造函数初始化新对象。我们先使用构造函数创建一个对象。"}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n    this.swung = true;\r\n}\r\n\r\nconst ninja = new Ninja()\r\nconsole.log(ninja.swung) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0726d4"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上面例子中，简单的通过 Ninja 构造器实例一个对象。接下来我们通过这个例子详细展开。"}]},{"type":"element","tag":"h2","props":{"id":"prototype"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 JavaScript 中，函数可以有属性。每个函数都有一个特殊的属性叫作原型（prototype）。例如："}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n  \r\n}\r\n\r\nNinja.prototype.swung = true\r\nconst ninja = new Ninja()\r\nconsole.log(ninja.swung) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-903337"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0726d4"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面例子中 Ninja 函数的 prototype 属性指向的是一个对象，被构建的实例对象 ninja 的原型也指向这个对象。关于 ninja 原型则在下面详细展开："}]},{"type":"element","tag":"h2","props":{"id":"__-proto__"},"children":[{"type":"text","value":"__ proto__"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 JavaScript 中，实例对象的原型属性是内置属性（使用标记 [[prototype]]）。ES6之前 ECMAScript 标准没有提供接口访问这个属性的，但是许多浏览器都实现了 JavaScript 非标准的内置属性__proto__来访问对象属性。"}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n    this.swung = true;\r\n}\r\n\r\nconst ninja = new Ninja()\r\nconsole.log(ninja.__proto__ === Ninja.prototype) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0726d4"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"__proto__"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-903337"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每一个JavaScript对象(除了null)都具有__proto__属性，这个属性会指向该对象的原型。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接着在看下面这个例子："}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n    this.swung = true;\r\n}\r\n\r\nconst ninja = new Ninja()\r\nconsole.log(Object.getPrototypeOf(ninja) === Ninja.prototype) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0726d4"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"getPrototypeOf"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") === "}]},{"type":"element","tag":"span","props":{"class":"ct-903337"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ES6开始，ECMAScript 标准提供了 Object.getPrototypeOf() 和 Object.setPrototypeOf() 访问器来访问和设置原型。__proto__它本质上是一个内部属性，而不是一个正式的对外的 API，只是由于浏览器广泛支持，才被加入了 ES6，所以建议不要使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面例子中构造函数原型和实例对象原型是相同的，它们的原型中还包含一个特殊的属性 constructor 用于指向构造函数。"}]},{"type":"element","tag":"h2","props":{"id":"constructor"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每个原型都有一个 constructor 属性指向关联的构造函数。"}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n  \r\n}\r\n\r\nconsole.log(Ninja.prototype.constructor === Ninja) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-903337"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"构造函数实例对象和-constructor-关系图"},"children":[{"type":"text","value":"构造函数、实例对象和 constructor 关系图"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/5/12/172093ef6ae12661?w=978&h=964&f=png&s=248312"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"原型链"},"children":[{"type":"text","value":"原型链"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当读取实例的属性时，如果找不到，就会查找与对象关联的原型中的属性，如果还查不到，就去找原型的原型，一直找到最顶层为止。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"举个例子："}]},{"type":"element","tag":"code","props":{"code":"function Ninja() { \r\n  \r\n}\r\n\r\nNinja.prototype.swung = true\r\nconst ninja = new Ninja()\r\nninja.swung = false\r\nconsole.log(ninja.swung) // false\r\n\r\ndelete ninja.swung\r\nconsole.log(ninja.swung) // true\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"() { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-903337"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0726d4"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"Ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-73223c"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a112f4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"ninja"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce39ad"},"children":[{"type":"text","value":"swung"}]},{"type":"element","tag":"span","props":{"class":"ct-864ce5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-10a531"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原型链的最顶层即原型链的终点 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.prototype"}]},{"type":"text","value":"为null,我们可以打印："}]},{"type":"element","tag":"code","props":{"code":"console.log(Object.prototype.__proto__) // null\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"console.log(Object.prototype.__proto__) // null"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"null 表示“没有对象”，即该处不应该有值。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以 Object.prototype.__ proto__ 的值为 null 跟 Object.prototype 没有原型，其实表达了一个意思。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以查找属性的时候查到 Object.prototype 就停止查找了。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-903337{color:#4EC9B0}\n.ct-10a531{color:#6A9955}\n.ct-0726d4{color:#4FC1FF}\n.ct-ce39ad{color:#9CDCFE}\n.ct-a112f4{color:#DCDCAA}\n.ct-864ce5{color:#D4D4D4}\n.ct-73223c{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"理解原型","depth":2,"text":"理解原型"},{"id":"构造函数创建对象","depth":2,"text":"构造函数创建对象"},{"id":"prototype","depth":2,"text":"prototype"},{"id":"__-proto__","depth":2,"text":"__ proto__"},{"id":"constructor","depth":2,"text":"constructor"},{"id":"构造函数实例对象和-constructor-关系图","depth":2,"text":"构造函数、实例对象和 constructor 关系图"},{"id":"原型链","depth":2,"text":"原型链"}]}},"_type":"markdown","_id":"content:articles:2020-05-29-原型和原型链.md","_source":"content","_file":"articles/2020-05-29-原型和原型链.md","_extension":"md"},{"_path":"/articles/2020-06-09-jsthis","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深入JS之this","description":"本篇博客主要是对 Javcscript this 学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript this 学习理解"}]}]},"date":"2020-06-09T00:00:00.000Z","tags":["this","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript this 学习理解"}]},{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们先从一个例题开始："}]},{"type":"element","tag":"code","props":{"code":"let foo = '哇'\r\nlet obj = {\r\n  foo: '蛙哇'，\r\n  fn: function() {\r\n    console.log(foo)\r\n  }\r\n}\r\nobj.fn()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"'哇'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"'蛙哇'"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"，\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后返回的是外部的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"哇"}]},{"type":"text","value":" 属性变量， 而不是对象内部的变量。我们知道在对象内部方法中使用对象内部属性是一种常见的需求。但 JavaScript 的作用域不支持这一点，基于这个需求，JavaScript 又搞出另一套 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" 机制。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以，在 JavaScript 中通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" 就可以访问对象里面的属性，调整上面的代码："}]},{"type":"element","tag":"code","props":{"code":"fn: function() {\r\n  console.log(this.foo)\r\n}\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"fn: function() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  console.log(this.foo)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最终返回的是对象的内部属性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"开始之前，需要我了解的是 JavaScript 中的作用域链和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" 是两套不一样的系统，他们之间没有太多的联系。"}]},{"type":"element","tag":"h2","props":{"id":"javascript中this是什么"},"children":[{"type":"text","value":"JavaScript中this是什么"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":"，还得从执行上下文说起，执行上下文中除了包含变量环境、词法环境、外部环境，还包含了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":"，一图胜前言，具体可参考下图："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"执行上下文中的this","src":"https://user-gold-cdn.xitu.io/2020/6/9/17297fddf5788ac9?w=327&h=244&f=png&s=8034"},"children":[]},{"type":"text","value":"\r\n从图中可以看出，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"this 是和执行上下文绑定的"}]},{"type":"text","value":"，也就是说每个执行上下文中都有一个 this。而执行上下文主要分为三种-全局执行上下文、函数执行上下文 和 eval 执行上下文。所以对应的 this 也分为三种-全局执行上下文中的 this、函数执行上下文中的 this 和 eval 执行上下文中的 this。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于 eval 使用的不多，所以这里只讨论全局和函数执行上下文中的 this。"}]},{"type":"element","tag":"h2","props":{"id":"全局执行上下文中的-this"},"children":[{"type":"text","value":"全局执行上下文中的 this"}]},{"type":"element","tag":"code","props":{"code":"console.log(this) // window\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-253b8d"},"children":[{"type":"text","value":"// window"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你可以在控制台打印 this， 最终输出的是 window 对象。所以你可以得出这样一个结论：全局执行上下文中的 this 是指向 window 对象的。这也是 this 和作用域链的唯一交点，作用域链的最底端包含了 window 对象，全局执行上下文中的 this 也是指向 window 对象。"}]},{"type":"element","tag":"h2","props":{"id":"函数执行上下文中的-this"},"children":[{"type":"text","value":"函数执行上下文中的 this"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在我们知道了全局对象中 this 的指向 window 对象，那么接下来，重点分析函数执行上下文的 this，还是先看下面这段代码："}]},{"type":"element","tag":"code","props":{"code":"function foo(){\r\n  console.log(this)\r\n}\r\nfunction bar(){\r\n  'use strict'\r\n  console.log(this)\r\n}\r\n\r\nfoo() // window\r\nbar() // undefined\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"'use strict'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-253b8d"},"children":[{"type":"text","value":"// window\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-253b8d"},"children":[{"type":"text","value":"// undefined"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行上面这段代码，打印出来也是 window 对象，这说明在非严格模式的默认情况下调用函数，其执行上下文中的 this 也是指向 window 对象的。严格模式下，this 为 undefined 。估计你会好奇，那能不能设置执行上下文中的 this 来指向其他对象呢？答案是肯定的。通常情况下，有下面三种方式来设置函数执行上下文中的 this 值。"}]},{"type":"element","tag":"h3","props":{"id":"_1通过函数的call方法设置"},"children":[{"type":"text","value":"1.通过函数的call方法设置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你可以通过函数的 call 方法来设置函数执行上下文的 this 指向，比如下面这段代码，我们就并没有直接调用 foo 函数，而是调用了 foo 的 call 方法，并将 bar 对象作为 call 方法的参数。"}]},{"type":"element","tag":"code","props":{"code":"\r\nlet bar = {\r\n  myName : \"哇\",\r\n  test1 : 1\r\n}\r\nfunction foo(){\r\n  this.myName = \"蛙哇\"\r\n}\r\nfoo.call(bar)\r\nconsole.log(bar)\r\nconsole.log(myName)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myName :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"test1 :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8f06e"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myName"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myName"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码，然后观察输出结果，你就能发现 foo 函数内部的 this 已经指向了 bar 对象。其实除了 call 方法，你还可以使用 bind 和 apply 方法来设置函数执行上下文中的 this。"}]},{"type":"element","tag":"h3","props":{"id":"_2-通过对象调用方法设置"},"children":[{"type":"text","value":"2. 通过对象调用方法设置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要改变函数执行上下文中的 this 指向，除了通过函数的 call 方法来实现外，还可以通过对象调用的方式，比如下面这段代码："}]},{"type":"element","tag":"code","props":{"code":"\r\nvar myObj = {\r\n  name : \"蛙哇\", \r\n  showThis: function(){\r\n    console.log(this)\r\n  }\r\n}\r\nmyObj.showThis()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码，你可以看到，最终输出的 this 值是指向 myObj 的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以，你可以得出这样的结论："},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"使用对象来调用其内部的一个方法，该方法的 this 是指向对象本身的"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其实，你也可以认为 JavaScript 引擎在执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"myObject.showThis()"}]},{"type":"text","value":"时，将其转化为了："}]},{"type":"element","tag":"code","props":{"code":"myObj.showThis.call(myObj)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"myObj.showThis.call(myObj)"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接下来我们稍微改变下调用方式，把 showThis 赋给一个全局对象，然后再调用该对象，代码如下所示："}]},{"type":"element","tag":"code","props":{"code":"\r\nvar myObj = {\r\n  name : \"哇\",\r\n  showThis: function(){\r\n    this.name = \"蛙哇\"\r\n    console.log(this)\r\n  }\r\n}\r\nvar foo = myObj.showThis\r\nfoo()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"showThis\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码，你会发现 this 又指向了全局 window 对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以通过以上两个例子的对比，你可以得出下面这样两个结论："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"在全局环境中调用一个函数，函数内部的 this 指向的是全局变量 window"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"通过一个对象来调用其内部的一个方法，该方法的执行上下文中的 this 指向对象本身"}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"h3","props":{"id":"_3-通过构造函数中设置"},"children":[{"type":"text","value":"3. 通过构造函数中设置"}]},{"type":"element","tag":"code","props":{"code":"function CreateObj(){\r\n  this.name = \"蛙哇\"\r\n}\r\nvar myObj = new CreateObj()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"CreateObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"CreateObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这段代码中，我们使用 new 创建了对象 myObj，那你知道此时的构造函数 CreateObj 中的 this 到底指向了谁吗？其实，当执行 new CreateObj() 的时候，JavaScript 引擎做了如下四件事："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"首先创建了一个空对象 tempObj；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"接着调用 CreateObj.call 方法，并将 tempObj 作为 call 方法的参数，这样当 CreateObj 的执行上下文创建时，它的 this 就指向了 tempObj 对象；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"然后执行 CreateObj 函数，此时的 CreateObj 函数执行上下文中的 this 指向了 tempObj 对象；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"最后返回 tempObj 对象。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了直观理解，我们可以用代码来演示下："}]},{"type":"element","tag":"code","props":{"code":"  var tempObj = {}\r\n  CreateObj.call(tempObj)\r\n  return tempObj\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"tempObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"CreateObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"tempObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-afb2b8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"tempObj"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"this-缺陷和解决方案"},"children":[{"type":"text","value":"this 缺陷和解决方案"}]},{"type":"element","tag":"h3","props":{"id":"_1-嵌套函数中的-this-不会从外层函数中继承"},"children":[{"type":"text","value":"1. 嵌套函数中的 this 不会从外层函数中继承"}]},{"type":"element","tag":"code","props":{"code":"var myObj = {\r\n  name : \"蛙哇\", \r\n  showThis: function(){\r\n    console.log(this)\r\n    function bar(){console.log(this)}\r\n    bar()\r\n  }\r\n}\r\nmyObj.showThis()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码后，你会发现函数 bar 中的 this 指向的是全局 window 对象，而函数 showThis 中的 this 指向的是 myObj 对象。这就是 JavaScript 中非常容易让人迷惑的地方之一，也是很多问题的源头。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"你可以通过一个小技巧来解决这个问题"}]},{"type":"text","value":"，比如在 showThis 函数中声明一个变量 self 用来保存 this，然后在 bar 函数中使用 self，代码如下所示："}]},{"type":"element","tag":"code","props":{"code":"\r\nvar myObj = {\r\n  name : \"蛙哇\", \r\n  showThis: function(){\r\n    console.log(this)\r\n    var self = this\r\n    function bar(){\r\n      self.name = \"哇\"\r\n    }\r\n    bar()\r\n  }\r\n}\r\nmyObj.showThis()\r\nconsole.log(myObj.name)\r\nconsole.log(window.name)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码，你可以看到它输出了我们想要的结果，最终 myObj 中的 name 属性值变成了“哇”。其实，这个方法的的本质是把 this 体系转换为了作用域的体系。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其实，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"你也可以使用 ES6 中的箭头函数来解决这个问题"}]},{"type":"text","value":"，结合下面代码："}]},{"type":"element","tag":"code","props":{"code":"\r\nvar myObj = {\r\n  name : \"蛙哇\", \r\n  showThis: function(){\r\n    console.log(this)\r\n    var bar = ()=>{\r\n      this.name = \"哇\"\r\n      console.log(this)\r\n    }\r\n    bar()\r\n  }\r\n}\r\nmyObj.showThis()\r\nconsole.log(myObj.name)\r\nconsole.log(window.name)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name :"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"蛙哇\""}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = ()"}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6da74c"},"children":[{"type":"text","value":"\"哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35af61"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"showThis"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"myObj"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d57d45"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1b7c50"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-2704bf"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行这段代码，你会发现它也输出了我们想要的结果，也就是箭头函数 bar 里面的 this 是指向 myObj 对象的。这是因为 ES6 中的箭头函数并不会创建其自身的执行上下文，所以箭头函数中的 this 取决于它的外部函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过上面的讲解，你现在应该知道了 this 没有作用域的限制，这点和变量不一样，所以嵌套函数不会从调用它的函数中继承 this，这样会造成很多不符合直觉的代码。要解决这个问题，你可以有两种思路："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一种是把 this 保存为一个 self 变量，再利用变量的作用域机制传递给嵌套函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第二种是继续使用 this，但是要把嵌套函数改为箭头函数，因为箭头函数没有自己的执行上下文，所以它会继承调用函数中的 this。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-afb2b8{color:#C586C0}\n.ct-d8f06e{color:#B5CEA8}\n.ct-253b8d{color:#6A9955}\n.ct-d57d45{color:#DCDCAA}\n.ct-6da74c{color:#CE9178}\n.ct-1b7c50{color:#9CDCFE}\n.ct-2704bf{color:#D4D4D4}\n.ct-35af61{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"javascript中this是什么","depth":2,"text":"JavaScript中this是什么"},{"id":"全局执行上下文中的-this","depth":2,"text":"全局执行上下文中的 this"},{"id":"函数执行上下文中的-this","depth":2,"text":"函数执行上下文中的 this","children":[{"id":"_1通过函数的call方法设置","depth":3,"text":"1.通过函数的call方法设置"},{"id":"_2-通过对象调用方法设置","depth":3,"text":"2. 通过对象调用方法设置"},{"id":"_3-通过构造函数中设置","depth":3,"text":"3. 通过构造函数中设置"}]},{"id":"this-缺陷和解决方案","depth":2,"text":"this 缺陷和解决方案","children":[{"id":"_1-嵌套函数中的-this-不会从外层函数中继承","depth":3,"text":"1. 嵌套函数中的 this 不会从外层函数中继承"}]}]}},"_type":"markdown","_id":"content:articles:2020-06-09-深入JS之我是如何搞懂this.md","_source":"content","_file":"articles/2020-06-09-深入JS之我是如何搞懂this.md","_extension":"md"},{"_path":"/articles/2020-06-22-js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深入JS之内存机制","description":"本篇博客主要是对 Javcscript 内存机制的学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 内存机制的学习理解"}]}]},"date":"2020-06-22T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 内存机制的学习理解"}]},{"type":"element","tag":"h2","props":{"id":"数据类型"},"children":[{"type":"text","value":"数据类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 是一种弱类型的、动态的语言。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"弱类型"}]},{"type":"text","value":"，意味着不需要告诉 JavaScript 引擎这个或那个变量是什么数据类型，JavaScript 引擎在运行代码的时候会计算出来。而"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"动态"}]},{"type":"text","value":"，意味着你可以使用同一个变量保存不同类型的数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 数据类型主要有8种，它们分别是："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a26e905f35f41?w=1142&h=648&f=png&s=318030"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中，前面7种为原始数据类型，最后一个对象类型称为引用类型。（需要注意的是，typeof 判断NULL类型时，返回的是 Object）。之所以把它们区分为两种不同的类型，是因为它们在内存中存放的位置不一样。接下来分析 JavaScript 中原始数据类型和引用数据类型到底是怎么储存的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"内存空间"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要理解 JavaScript 在运行过程中数据是如何存储的，你就得先搞清楚其存储空间的种类。下面是 JavaScript 的内存模型："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a268248dc264e?w=1142&h=1183&f=png&s=75892"},"children":[]},{"type":"text","value":"\r\n从图中可以看出， 在 JavaScript 的执行过程中， 主要有三种类型内存空间，分别是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码空间、栈空间和堆空间。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中，原始类型的数据是存放在栈中，引用类型的数据是存放在堆中的。堆中的数据是通过引用和变量关联起来的。也就是说，JavaScript 的变量是没有数据类型的，值才有数据类型，变量可以随时持有任何类型的数据。"}]},{"type":"element","tag":"h2","props":{"id":"垃圾回收"},"children":[{"type":"text","value":"垃圾回收"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"原始数据类型是存储在栈空间中的，引用类型的数据是存储在堆空间中的"}]},{"type":"text","value":"。通过这种分配方式，我们解决了数据的内存分配的问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过有些数据被使用之后，可能就不再需要了，我们把这种数据称为"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"垃圾数据"}]},{"type":"text","value":"。如果这些垃圾数据一直保存在内存中，那么内存会越用越多，所以我们需要"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"对这些垃圾数据进行回收，以释放有限的内存空间"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JavaScript 中采用的是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"自动垃圾回收的策略"}]},{"type":"text","value":"， "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产生的垃圾数据是由垃圾回收器来释放的"}]},{"type":"text","value":"，并不需要手动通过代码来释放。\r\n因为数据是存储在栈和堆两种内存空间中，所以接下来将围绕‘栈中的垃圾数据’和‘堆中的垃圾数据’回收来展开。"}]},{"type":"element","tag":"h2","props":{"id":"调用栈中的数据回收"},"children":[{"type":"text","value":"调用栈中的数据回收"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先是调用栈中的数据，我们还是通过一段示例代码的执行流程来分析其回收机制，具体如下："}]},{"type":"element","tag":"code","props":{"code":"function foo(){\r\n    var a = 1\r\n    var b = {name:\"Top\"}\r\n    function showName(){\r\n      var c = \"蛙哇\"\r\n      var d = {name:\"You\"}\r\n    }\r\n    showName()\r\n}\r\nfoo()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64ecba"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-84adac"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-55e1a2"},"children":[{"type":"text","value":"\"Top\""}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-64ecba"},"children":[{"type":"text","value":"showName"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-55e1a2"},"children":[{"type":"text","value":"\"蛙哇\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2f1e9e"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"d"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-b640b3"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-55e1a2"},"children":[{"type":"text","value":"\"You\""}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-64ecba"},"children":[{"type":"text","value":"showName"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-64ecba"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-11b4f1"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当执行到第 6 行代码时，其调用栈和堆空间状态图如下所示："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a2c85742ef5cd?w=782&h=470&f=png&s=38897"},"children":[]},{"type":"text","value":"\r\n从图中可以看出，原始类型的数据被分配到栈中，引用类型的数据会被分配到堆中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码在执行到 showName 函数时，那么 JavaScript 引擎会创建 showName 函数的执行上下文，并将 showName 函数的执行上下文压入到调用栈中，最终执行到 showName 函数时，其调用栈就如上图所示。与此同时，还有一个"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"记录当前执行状态的指针（称为 ESP）"}]},{"type":"text","value":"，指向调用栈中 showName 函数的执行上下文，表示当前正在执行 showName 函数。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接着，当 showName 函数执行完成之后，函数执行流程就进入了 foo 函数，那这时就需要销毁 showName 函数的执行上下文了。ESP 这时候就帮上忙了，JavaScript 会将 ESP 下移到 foo 函数的执行上下文，这个下移操作就是销毁 showName 函数执行上下文的过程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"所以说，当一个函数执行结束之后，JavaScript 引擎会通过向下移动 ESP 来销毁该函数保存在栈中的执行上下文。"}]}]},{"type":"element","tag":"h2","props":{"id":"堆中数据回收"},"children":[{"type":"text","value":"堆中数据回收"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过上面的讲解，我想现在你应该已经知道，当上面那段代码的 foo 函数执行结束之后，ESP 应该是指向全局执行上下文的，那这样的话，showName 函数和 foo 函数的执行上下文就处于无效状态了，不过保存在堆中的两个对象依然占用着空间，如下图所示："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a388964dbc2d9?w=719&h=462&f=png&s=31824"},"children":[]},{"type":"text","value":"\r\n从图中可以看出，1003 和 1050 这两块内存依然被占用。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"要回收堆中的垃圾数据，就需要用到 JavaScript 中的垃圾回收器了"}]},{"type":"text","value":"。下面我们来分析垃圾回收器是如何回收数据的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代际假说和分代收集"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在正式介绍 JavaScript 引擎是如何实现垃圾回收之前，我们需要先了解一下"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代际假说"}]},{"type":"text","value":"的内容，这是垃圾回收领域中的重要部分，后续的垃圾回收策略都是建立在该假说的基础之上。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"代际假说有以下两个特点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一个是大部分对象在内存中存在的时间很短，简单来说，就是很多对象一经分配内存，很快就变得不可访问；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第二个是不死的对象，会活得更久。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以，在 V8 中会把堆分为"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"新生代"}]},{"type":"text","value":"和"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"老生代"}]},{"type":"text","value":"两个区域，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"新生代中存放的是生存时间短的对象，老生代中存放的生存时间久的对象"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"新生区通常只支持 1～8M 的容量，而老生区支持的容量就大很多了。对于这两块区域，V8 分别使用两个不同的垃圾回收器，以便更高效地实施垃圾回收。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"副垃圾回收器，主要负责新生代的垃圾回收"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"主垃圾回收器，主要负责老生代的垃圾回收"}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"垃圾回收工作流程"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"V8 引擎把堆分为两个区域-新生代和老生代，并分别使用两个不同的垃圾回收器。其实不论什么类型的垃圾回收器，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"它们都有一套共同的执行流程"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第一步是标记空间中活动对象和非活动对象。所谓活动对象就是还在使用的对象，非活动对象就是可以进行垃圾回收的对象。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第二步是回收非活动对象所占据的内存。其实就是在所有的标记完成之后，统一清理内存中所有被标记为可回收的对象。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"第三步是做内存整理。一般来说，频繁回收对象后，内存中就会存在大量不连续空间，我们把这些不连续的内存空间称为内存碎片。当内存中出现了大量的内存碎片之后，如果需要分配较大连续内存的时候，就有可能出现内存不足的情况。所以最后一步需要整理这些内存碎片，但这步其实是可选的，因为有的垃圾回收器不会产生内存碎片，比如接下来我们要介绍的副垃圾回收器。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么接下来，我们就按照这个流程来分析新生代垃圾回收器（副垃圾回收器）和老生代垃圾回收器（主垃圾回收器）是如何处理垃圾回收的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"副立即回收器"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"副垃圾回收器主要负责新生区的垃圾回收。而通常情况下，大多数小的对象都会被分配到新生区，所以说这个区域虽然不大，但是垃圾回收还是比较频繁的。新生代中用 Scavenge 算法来处理。所谓 Scavenge 算法，是把新生代空间对半划分为两个区域，一半是对象区域，一半是空闲区域，如下图所示："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a4072a8ca5d7f?w=1142&h=550&f=png&s=91924"},"children":[]},{"type":"text","value":"\r\n在垃圾回收过程中，首先要对对象区域中的垃圾做标记；标记完成之后，就进入垃圾清理阶段，副垃圾回收器会把这些存活的对象复制到空闲区域中，同时它还会把这些对象有序地排列起来，所以这个复制过程，也就相当于完成了内存整理操作，复制后空闲区域就没有内存碎片了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"完成复制后，对象区域与空闲区域进行角色翻转，也就是原来的对象区域变成空闲区域，原来的空闲区域变成了对象区域。这样就完成了垃圾对象的回收操作，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"同时这种角色翻转的操作还能让新生代中的这两块区域无限重复使用下去"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于新生代中采用的 Scavenge 算法，所以每次执行清理操作时，都需要将存活的对象从对象区域复制到空闲区域。但复制操作需要时间成本，如果新生区空间设置得太大了，那么每次清理的时间就会过久，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"所以为了执行效率，一般新生区的空间会被设置得比较小"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也正是因为新生区的空间不大，所以很容易被存活的对象装满整个区域。为了解决这个问题，JavaScript 引擎采用了"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"对象晋升策略"}]},{"type":"text","value":"，也就是经过两次垃圾回收依然还存活的对象，会被移动到老生区中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"主️垃圾回收器"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主垃圾回收器主要负责老生区中的垃圾回收。除了新生区中晋升的对象，一些大的对象会直接被分配到老生区。因此老生区中的对象有两个特点，一个是对象占用空间大，另一个是对象存活时间长。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于老生区的对象比较大，若要在老生区中使用 Scavenge 算法进行垃圾回收，复制这些大的对象将会花费比较多的时间，从而导致回收执行效率不高，同时还会浪费一半的空间。因而，主垃圾回收器是采用"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"标记 - 清除"}]},{"type":"text","value":"（Mark-Sweep）的算法进行垃圾回收的。下面我们来看看该算法是如何工作的。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"首先是标记过程阶段。标记阶段就是从一组根元素开始，递归遍历这组根元素，在这个遍历过程中，能到达的元素称为活动对象，没有到达的元素就可以判断为垃圾数据。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"接下来就是垃圾的清除过程。它和副垃圾回收器的垃圾清除过程完全不同，你可以理解这个过程是清除掉红色标记数据的过程，可参考下图大致理解下其清除过程："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a40d00a1489ad?w=1142&h=564&f=png&s=51701"},"children":[]},{"type":"text","value":"\r\n上面的标记过程和清除过程就是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"标记 - 清除算法"}]},{"type":"text","value":"，不过对一块内存多次执行标记 - 清除算法后，会产生大量不连续的内存碎片。而碎片过多会导致大对象无法分配到足够的连续内存，于是又产生了另外一种算法——"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"标记 - 整理"}]},{"type":"text","value":"（Mark-Compact），这个标记过程仍然与标记 - 清除算法里的是一样的，但后续步骤不是直接对可回收对象进行清理，而是让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"全停顿"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"现在你知道了 V8 是使用副垃圾回收器和主垃圾回收器处理垃圾回收的，不过由于 JavaScript 是运行在主线程之上的，一旦执行垃圾回收算法，都需要将正在执行的 JavaScript 脚本暂停下来，待垃圾回收完毕后再恢复脚本执行。我们把这种行为叫做"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"全停顿"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了降低老生代的垃圾回收而造成的卡顿，V8 将标记过程分为一个个的子标记过程，同时让垃圾回收标记和 JavaScript 应用逻辑交替进行，直到标记阶段完成，我们把这个算法称为"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"增量标记（Incremental Marking）算法"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/11/172a4101a172b1c6?w=1142&h=366&f=png&s=60132"},"children":[]},{"type":"text","value":"\r\n使用增量标记算法，可以把一个完整的垃圾回收任务拆分为很多小的任务，这些小的任务执行时间比较短，可以穿插在其他的 JavaScript 任务中间执行，这样当执行上述动画效果时，就不会让用户因为垃圾回收任务而感受到页面的卡顿了。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-55e1a2{color:#CE9178}\n.ct-84adac{color:#B5CEA8}\n.ct-b640b3{color:#9CDCFE}\n.ct-64ecba{color:#DCDCAA}\n.ct-11b4f1{color:#D4D4D4}\n.ct-2f1e9e{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"数据类型","depth":2,"text":"数据类型"},{"id":"垃圾回收","depth":2,"text":"垃圾回收"},{"id":"调用栈中的数据回收","depth":2,"text":"调用栈中的数据回收"},{"id":"堆中数据回收","depth":2,"text":"堆中数据回收"}]}},"_type":"markdown","_id":"content:articles:2020-06-22-深入JS之我是如何搞懂内存机制的.md","_source":"content","_file":"articles/2020-06-22-深入JS之我是如何搞懂内存机制的.md","_extension":"md"},{"_path":"/articles/2020-06-27-js-promise","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深入JS之Promise","description":"本篇博客主要是对 Javcscript 异步编程 Promise 的学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 异步编程 Promise 的学习理解"}]}]},"date":"2020-06-27T00:00:00.000Z","tags":["JavaScript","Promise"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Javcscript 异步编程 Promise 的学习理解"}]},{"type":"element","tag":"h2","props":{"id":"基本概念"},"children":[{"type":"text","value":"基本概念"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"MDN 对 Promise 的定义："}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise 是一个对象，它代表了一个异步操作的最终完成或者失败。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise 解决的主要是异步编码风格的问题，即解决回调地狱的问题。在开发一些稍复杂点项目时，你会发现，如果嵌套了太多的回调函数就很容易使得自己陷入了回调地狱，不能自拔。你可以参考下面这段让人凌乱的代码："}]},{"type":"element","tag":"code","props":{"code":"XFetch(makeRequest('https://xxx'),\r\n      function resolve(response) {\r\n          console.log(response)\r\n          XFetch(makeRequest('https://xxx'),\r\n              function resolve(response) {\r\n                  console.log(response)\r\n                  XFetch(makeRequest('https://xxx')\r\n                      function resolve(response) {\r\n                          console.log(response)\r\n                      }, function reject(e) {\r\n                          console.log(e)\r\n                      })\r\n              }, function reject(e) {\r\n                  console.log(e)\r\n              })\r\n      }, function reject(e) {\r\n          console.log(e)\r\n      })\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"XFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"makeRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'https://xxx'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"XFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"makeRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'https://xxx'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"XFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"makeRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'https://xxx'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                          "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                      }, "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                          "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"              }, "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"              })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      }, "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这段代码是先请求第一个接口，如果请求成功的话，那么再请求第二个接口，如果再次请求成功的话，就继续请求最后一个接口。也就是说这段代码用了三层嵌套请求，就已经让代码变得混乱不堪，当上述需求中出现第四个请求（甚至更多）仍然依赖上一个请求的时候，代码就会变成一场灾难。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这段代码之所以看上去很乱，归结其原因有两点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"第一是嵌套调用"}]},{"type":"text","value":"，下面的任务依赖上个任务的请求结果，并"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"在上个任务的回调函数内部执行新的业务逻辑"}]},{"type":"text","value":"，这样当嵌套层次多了之后，代码的可读性就变得非常差了。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"第二是任务的不确定性"}]},{"type":"text","value":"，执行每个任务都有两种可能的结果（成功或者失败），所以体现在代码中就需要对每个任务的执行结果做两次判断，这种对每个任务都要进行一次额外的错误处理的方式，明显增加了代码的混乱程度。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这时，我们可能会希望："}]},{"type":"element","tag":"ul","props":{"className":["contains-task-list"]},"children":[{"type":"element","tag":"li","props":{"className":["task-list-item"]},"children":[{"type":"element","tag":"input","props":{"checked":true,"disabled":true,"type":"checkbox"},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"第一是消灭嵌套调用；"}]}]},{"type":"element","tag":"li","props":{"className":["task-list-item"]},"children":[{"type":"element","tag":"input","props":{"checked":true,"disabled":true,"type":"checkbox"},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"第二是合并多个任务的错误处理"}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Promise 主要通过下面两步解决嵌套回调问题的。"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"首先，Promise 实现了回调函数的延时绑定"}]},{"type":"text","value":"。回调函数的延时绑定在代码上体现就是先创建 Promise 对象 promise1，通过 Promise 的构造函数 executor 来执行业务逻辑；创建好 Promise 对象 promise1 之后，再使用 promise1.then 来设置回调函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"其次，需要将回调函数 onResolve 的返回值穿透到最外层"}]},{"type":"text","value":"。因为我们会根据 onResolve 函数的传入值来决定创建什么类型的 Promise 任务，创建好的 Promise 对象需要返回到最外层，这样就可以摆脱嵌套循环了。代码如下："}]}]},{"type":"element","tag":"code","props":{"code":"let promise1 = new Promise((resolve, reject) => {\r\n    console.log(1)\r\n    resolve('success')\r\n})\r\n\r\n// then 方法延迟绑定 返回值穿透赋给 p2\r\nlet p2 = promise1.then(res => {\r\n    console.log(res)\r\n    return 2\r\n})\r\nsetTimeout(() => {\r\n   console.log(p2) \r\n})\r\n// 输出 1 ,success, 2\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'success'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// then 方法延迟绑定 返回值穿透赋给 p2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// 输出 1 ,success, 2"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise 通过回调函数延迟绑定和回调函数返回值穿透的技术，解决了循环嵌套。\r\n接下来我们再来看看 Promise 是怎么处理异常的："}]},{"type":"element","tag":"code","props":{"code":"\r\nfunction executor(resolve, reject) {\r\n    let rand = Math.random();\r\n    console.log(1)\r\n    console.log(rand)\r\n    if (rand > 0.5)\r\n        resolve()\r\n    else\r\n        reject()\r\n}\r\nvar p0 = new Promise(executor);\r\n\r\nvar p1 = p0.then((value) => {\r\n    console.log(\"succeed-1\")\r\n    return new Promise(executor)\r\n})\r\np1.catch((error) => {\r\n    console.log(\"error\")\r\n})\r\nconsole.log(2)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"rand"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"random"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"rand"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"rand"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" > "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"0.5"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"else\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p0"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p0"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"\"succeed-1\""}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"\"error\""}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面 p0, p1 无论哪个对象报错都可以在最后 catch 里面捕获到。\r\n之所以可以使用最后一个对象来捕获所有异常，是因为 Promise 对象的错误具有“冒泡”性质，会一直向后传递，直到被 onReject 函数处理或 catch 语句捕获为止。具备了这样“冒泡”的特性后，就不需要在每个 Promise 对象中单独捕获异常了。"}]},{"type":"element","tag":"h2","props":{"id":"原理剖析"},"children":[{"type":"text","value":"原理剖析"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面我们了解 Promise 的实现主要是通过延迟回调、返回值穿透以及错误的‘冒泡’捕获。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接下来，我们通过源码实现来更深层次的理解这些技术实现，深入理解 Promise。"}]},{"type":"element","tag":"h3","props":{"id":"极简promise雏形"},"children":[{"type":"text","value":"极简Promise雏形"}]},{"type":"element","tag":"code","props":{"code":"function Promise(executor) {\r\n  this.value = null   // 存储 resolved 的值\r\n  this.reason = null // 存储 rejected 的值\r\n  this.onFulfilledArray = [] // 可能同时有多个回调，用数组来存储\r\n  this.onRejectedArray = [] //可能同时有多个回调，用数组来存储\r\n\r\n  const resolve = value => {\r\n    this.value = value\r\n    this.onFulfilledArray.forEach(func => {\r\n      func(value)\r\n    })\r\n  }\r\n\r\n  const reject = reason => {\r\n    this.reason = reason\r\n    this.onRejectedArray.forEach(func => {\r\n      func(reason)\r\n    })\r\n  }\r\n  \r\n   executor(resolve, reject)\r\n}\r\n\r\nPromise.prototype.then = function(onfulfilled, onrejected) {\r\n    this.onFulfilledArray.push(onfulfilled)\r\n    this.onRejectedArray.push(onrejected)\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// 存储 resolved 的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// 存储 rejected 的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = [] "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// 可能同时有多个回调，用数组来存储\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = [] "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"//可能同时有多个回调，用数组来存储\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述代码比较简单，大概的逻辑是这样的："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 then 方法，将想要在 Promise 异步操作成功时执行的回调放入 onFulfilledArray 队列里，失败时执行的回调放在 onRejectedArray 队列里。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建 Promise 实例时传入的函数会被赋予函数类型的参数，即 resolve 和 reject，它们接收一个参数，代表异步操作返回的结果，当一步操作执行成功后，用户会调用 resolve 方法。失败时，会执行 reject 方法。这时候其实真正执行的操作是将队列中的回调一一执行。"}]}]},{"type":"element","tag":"h3","props":{"id":"加入延迟绑定机制"},"children":[{"type":"text","value":"加入延迟绑定机制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"细心的小伙伴可能会发现，上述的代码还存在一些问题：在 then 回调之前， resolve 和 reject 函数就会执行。因此，需要将 resolve 和 reject 的执行，放到任务队列中。这里姑且先放到 setTimeout 里，保证异步执行（这样的做法并不严谨，为了保证 Promise 属于 microtasks，很多 Promise 的实现库用了 MutationObserver 来模仿 nextTick）"}]},{"type":"element","tag":"code","props":{"code":" const resolve = value => {\r\n    // setTimeout 模拟异步执行\r\n    setTimeout(() => { \r\n      this.value = value\r\n      this.onFulfilledArray.forEach(func => {\r\n        func(value)\r\n      })\r\n    })\r\n  }\r\n\r\n  const reject = reason => {\r\n    // setTimeout 模拟异步执行\r\n    setTimeout(() => { \r\n      this.reason = reason\r\n      this.onRejectedArray.forEach(func => {\r\n        func(reason)\r\n      })\r\n    })\r\n  }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// setTimeout 模拟异步执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// setTimeout 模拟异步执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"加入状态"},"children":[{"type":"text","value":"加入状态"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promises/A+ 规范中的 Promise States 中明确规定了，pending 可以转化为 fulfilled 或 rejected 并且只能转化一次，也就是说如果 pending 转化到 fulfilled 状态，那么就不能再转化到 rejected。并且 fulfilled 和 rejected 状态只能由 pending 转化而来，两者之间不能互相转换。一图胜千言："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://user-gold-cdn.xitu.io/2020/6/8/17292885fc45811c?w=353&h=260&f=png&s=4035"},"children":[]},{"type":"text","value":"\r\n改进后的代码："}]},{"type":"element","tag":"code","props":{"code":"function Promise(executor) {\r\n  this.status = 'pending'\r\n  this.value = null\r\n  this.reason = null\r\n  this.onFulfilledArray = []\r\n  this.onRejectedArray = []\r\n\r\n  const resolve = value => {\r\n    // setTimeout 模拟异步执行\r\n    setTimeout(() => { \r\n      if (this.status === 'pending') {\r\n        this.value = value\r\n        this.status = 'fulfilled'\r\n\r\n        this.onFulfilledArray.forEach(func => {\r\n          func(value)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  const reject = reason => {\r\n    // setTimeout 模拟异步执行\r\n    setTimeout(() => { \r\n      if (this.status === 'pending') {\r\n        this.reason = reason\r\n        this.status = 'rejected'\r\n      \r\n        this.onRejectedArray.forEach(func => {\r\n          func(reason)\r\n        })\r\n      }\r\n    })\r\n  }\r\n  executor(resolve, reject)\r\n}\r\n\r\nPromise.prototype.then = function(onfulfilled, onrejected) {\r\n  if (this.status === 'fulfilled') {\r\n    onfulfilled(this.value)\r\n  }\r\n  if (this.status === 'rejected') {\r\n    onrejected(this.reason)\r\n  }\r\n  if (this.status === 'pending') {\r\n    this.onFulfilledArray.push(onfulfilled)\r\n    this.onRejectedArray.push(onrejected)\r\n  }\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'pending'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// setTimeout 模拟异步执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'pending'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'fulfilled'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// setTimeout 模拟异步执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" { \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'pending'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'rejected'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"func"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"executor"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'fulfilled'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'rejected'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reason"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'pending'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onFulfilledArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onRejectedArray"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述代码的思路是这样的：resolve 和 reject 执行时，会将状态设置为 fulfilled 和 rejected， 在此之后调用 then 添加的新回调，都会立即执行。"}]},{"type":"element","tag":"h3","props":{"id":"链式promise"},"children":[{"type":"text","value":"链式Promise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先从下面例题说起："}]},{"type":"element","tag":"code","props":{"code":"const promise = new Promise((resolve, reject) => {\r\n  setTimeout(() => {\r\n      resolve('lucas')\r\n  }, 2000)\r\n})\r\n\r\npromise.then(data => {\r\n  console.log(data)\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n        resolve(`${data} next then`)\r\n    }, 4000)\r\n  })\r\n})\r\n.then(data => {\r\n  console.log(data)\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a99ad"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'lucas'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":" next then`"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    }, "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"4000"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将在 2 秒后输出：lucas，紧接着再过 4 秒后（第 6 秒）输出：lucas next then。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这种场景相信用 过promise 的人都知道会有很多，那么类似这种就是所谓的链式 Promise。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个 Promise 实例的 then 方法体 onfulfilled 函数和 onrejected 函数中，是支持再次返回一个 Promise 实例的，也支持返回一个非 Promise 实例的普通值；并且返回的这个 Promise 实例或者这个非 Promise 实例的普通值将会传给下一个 then 方法 onfulfilled 函数或者 onrejected 函数中，这样就支持链式调用了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对 then 方法进行代码改造后："}]},{"type":"element","tag":"details","props":{},"children":[{"type":"element","tag":"summary","props":{},"children":[{"type":"text","value":" 点击展开完整代码 "}]},{"type":"element","tag":"code","props":{"code":"// then 方法中 变量 result 既可以是一个普通值，也可以是一个 Promise 实例，为此我们抽象出 resolvePromise 方法进行统一处理\r\n\r\nconst resolvePromise = (promise2, result, resolve, reject) => {\r\n  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject\r\n  if (result === promise2) {\r\n    return reject(new TypeError('error due to circular reference'))\r\n  }\r\n\r\n// 是否已经执行过 onfulfilled 或者 onrejected\r\n  let consumed = false\r\n  let thenable\r\n\r\nif (result instanceof Promise) {\r\n    if (result.status === 'pending') {\r\n      result.then(function(data) {\r\n        resolvePromise(promise2, data, resolve, reject)\r\n      }, reject)\r\n    } else {\r\n      result.then(resolve, reject)\r\n    }\r\n    return\r\n  }\r\n\r\nlet isComplexResult = target => (typeof target === 'function' || typeof target === 'object') && (target !== null)\r\n  // 如果返回的是疑似 Promise 类型\r\n  if (isComplexResult(result)) {\r\n    try {\r\n      thenable = result.then\r\n      // 如果返回的是 Promise 类型，具有 then 方法\r\n      if (typeof thenable === 'function') {\r\n        thenable.call(result, function(data) {\r\n          if (consumed) {\r\n            return\r\n          }\r\n          consumed = true\r\n\r\nreturn resolvePromise(promise2, data, resolve, reject)\r\n        }, function(error) {\r\n          if (consumed) {\r\n            return\r\n          }\r\n          consumed = true\r\n\r\nreturn reject(error)\r\n        })\r\n      }\r\n      else {\r\n        return resolve(result)\r\n      }\r\n\r\n} catch(e) {\r\n      if (consumed) {\r\n        return\r\n      }\r\n      consumed = true\r\n      return reject(e)\r\n    }\r\n  }\r\n  else {\r\n    return resolve(result)\r\n  }\r\n}\r\n\r\nPromise.prototype.then = function(onfulfilled, onrejected) {\r\n  onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data => data\r\n  onrejected = typeof onrejected === 'function' ? onrejected : error => {throw error}\r\n\r\n// promise2 将作为 then 方法的返回值\r\n  let promise2\r\n\r\nif (this.status === 'fulfilled') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果\r\n          let result = onfulfilled(this.value)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          reject(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  if (this.status === 'rejected') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          // 这个新的 promise2 reject 的值为 onrejected 的执行结果\r\n         let result = onrejected(this.reason)\r\n         resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          reject(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  if (this.status === 'pending') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      this.onFulfilledArray.push(value => {\r\n        try {\r\n          let result = onfulfilled(value)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          return reject(e)\r\n        }\r\n      })\r\n\r\nthis.onRejectedArray.push(reason => {\r\n        try {\r\n          let result = onrejected(reason)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          return reject(e)\r\n        }\r\n      })\r\n})\r\n  }\r\n}\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// then 方法中 变量 result 既可以是一个普通值，也可以是一个 Promise 实例，为此我们抽象出 resolvePromise 方法进行统一处理\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const resolvePromise = (promise2, result, resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (result === promise2) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return reject(new TypeError('error due to circular reference'))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 是否已经执行过 onfulfilled 或者 onrejected\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let consumed = false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let thenable\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (result instanceof Promise) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (result.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      result.then(function(data) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        resolvePromise(promise2, data, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      result.then(resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"let isComplexResult = target => (typeof target === 'function' || typeof target === 'object') && (target !== null)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  // 如果返回的是疑似 Promise 类型\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (isComplexResult(result)) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      thenable = result.then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      // 如果返回的是 Promise 类型，具有 then 方法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (typeof thenable === 'function') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        thenable.call(result, function(data) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"return resolvePromise(promise2, data, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }, function(error) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"return reject(error)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return resolve(result)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"} catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return resolve(result)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Promise.prototype.then = function(onfulfilled, onrejected) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data => data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  onrejected = typeof onrejected === 'function' ? onrejected : error => {throw error}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// promise2 将作为 then 方法的返回值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let promise2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (this.status === 'fulfilled') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onfulfilled(this.value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (this.status === 'rejected') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          // 这个新的 promise2 reject 的值为 onrejected 的执行结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"         let result = onrejected(this.reason)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"         resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (this.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      this.onFulfilledArray.push(value => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onfulfilled(value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"this.onRejectedArray.push(reason => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onrejected(reason)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":116},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":117},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":118},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":119},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":120},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":121},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":122},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"promise-值穿透"},"children":[{"type":"text","value":"Promise 值穿透"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"看下面例子："}]},{"type":"element","tag":"code","props":{"code":"const promise = new Promise((resolve, reject) => {\r\n  setTimeout(() => {\r\n      resolve('lucas')\r\n  }, 2000)\r\n})\r\n\r\n\r\npromise.then(null)\r\n.then(data => {\r\n  console.log(data)\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a99ad"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'lucas'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这段代码将会在 2 秒后输出：lucas。这就是 Promise 穿透现象："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"给 .then() 函数传递非函数值作为其参数时，实际上会被解析成 .then(null)，这时候的表现应该是：上一个 promise 对象的结果进行“穿透”，如果在后面链式调用仍存在第二个 .then() 函数时，将会获取被穿透下来的结果。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"值穿透代码实现："}]},{"type":"element","tag":"code","props":{"code":"Promise.prototype.then = function(onfulfilled = Function.prototype, onrejected = Function.prototype) {\r\n  // 如果 then 方法接收的不是函数，则默认赋予直接返回其值函数，从而实现穿透\r\n  onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data => data\r\n  onrejected = typeof onrejected === 'function' ? onrejected : error => { throw error }\r\n\r\n    // ...\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// 如果 then 方法接收的不是函数，则默认赋予直接返回其值函数，从而实现穿透\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ? "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onfulfilled"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" ? "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"onrejected"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d50f9f"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"异常处理"},"children":[{"type":"text","value":"异常处理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise.prototype.catch 可以进行异常捕获，它的典型用法："}]},{"type":"element","tag":"code","props":{"code":"const promise1 = new Promise((resolve, reject) => {\r\n  setTimeout(() => {\r\n      reject('lucas error')\r\n  }, 2000)\r\n})\r\n\r\npromise1.then(data => {\r\n  console.log(data)\r\n}).catch(error => {\r\n  console.log(error)\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a99ad"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'lucas error'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  }, "}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"会在 2 秒后输出：lucas error。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其实在这种场景下，它就相当于："}]},{"type":"element","tag":"code","props":{"code":"Promise.prototype.catch = function(catchFunc) {\r\n  return this.then(null, catchFunc)\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"catchFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"catchFunc"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为我们知道 .then() 方法的第二个参数也是进行异常捕获的，通过这个特性，我们比较简单地实现了 Promise.prototype.catch。"}]},{"type":"element","tag":"h3","props":{"id":"promiseprototyperesolve-实现"},"children":[{"type":"text","value":"Promise.prototype.resolve 实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请看实例："}]},{"type":"element","tag":"code","props":{"code":"Promise.resolve('data').then(data => {\r\n  console.log(data)\r\n})\r\nconsole.log(1)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e6635"},"children":[{"type":"text","value":"'data'"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-af075e"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先输出 1 再输出 data。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么实现 Promise.resolve(value) 也很简单："}]},{"type":"element","tag":"code","props":{"code":"Promise.resolve = function(value) {\r\n  return new Promise((resolve, reject) => {\r\n    resolve(value)\r\n  })\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"顺带实现一个 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Promise.reject(value)"}]},{"type":"text","value":"："}]},{"type":"element","tag":"code","props":{"code":"Promise.reject = function(value) {\r\n  return new Promise((resolve, reject) => {\r\n    reject(value)\r\n  })\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6e3f5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c29eff"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-18a1b2"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-94714e"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7bfd14"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-2edc03"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后把完整代码贴出："}]},{"type":"element","tag":"details","props":{},"children":[{"type":"element","tag":"summary","props":{},"children":[{"type":"text","value":" 点击展开完整代码 "}]},{"type":"element","tag":"code","props":{"code":"function Promise(executor) {\r\n  this.status = 'pending'\r\n  this.value = null\r\n  this.reason = null\r\n  this.onFulfilledArray = []\r\n  this.onRejectedArray = []\r\n\r\nconst resolve = value => {\r\n    if (value instanceof Promise) {\r\n      return value.then(resolve, reject)\r\n    }\r\n    setTimeout(() => {\r\n      if (this.status === 'pending') {\r\n        this.value = value\r\n        this.status = 'fulfilled'\r\n\r\nthis.onFulfilledArray.forEach(func => {\r\n          func(value)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\nconst reject = reason => {\r\n    setTimeout(() => {\r\n      if (this.status === 'pending') {\r\n        this.reason = reason\r\n        this.status = 'rejected'\r\n\r\nthis.onRejectedArray.forEach(func => {\r\n          func(reason)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\ntry {\r\n        executor(resolve, reject)\r\n    } catch(e) {\r\n        reject(e)\r\n    }\r\n}\r\n\r\nconst resolvePromise = (promise2, result, resolve, reject) => {\r\n  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject\r\n  if (result === promise2) {\r\n    return reject(new TypeError('error due to circular reference'))\r\n  }\r\n\r\n// 是否已经执行过 onfulfilled 或者 onrejected\r\n  let consumed = false\r\n  let thenable\r\n\r\nif (result instanceof Promise) {\r\n    if (result.status === 'pending') {\r\n      result.then(function(data) {\r\n        resolvePromise(promise2, data, resolve, reject)\r\n      }, reject)\r\n    } else {\r\n      result.then(resolve, reject)\r\n    }\r\n    return\r\n  }\r\n\r\nlet isComplexResult = target => (typeof target === 'function' || typeof target === 'object') && (target !== null)\r\n  // 如果返回的是疑似 Promise 类型\r\n  if (isComplexResult(result)) {\r\n    try {\r\n      thenable = result.then\r\n      // 如果返回的是 Promise 类型，具有 then 方法\r\n      if (typeof thenable === 'function') {\r\n        thenable.call(result, function(data) {\r\n          if (consumed) {\r\n            return\r\n          }\r\n          consumed = true\r\n\r\nreturn resolvePromise(promise2, data, resolve, reject)\r\n        }, function(error) {\r\n          if (consumed) {\r\n            return\r\n          }\r\n          consumed = true\r\n\r\nreturn reject(error)\r\n        })\r\n      }\r\n      else {\r\n        return resolve(result)\r\n      }\r\n\r\n} catch(e) {\r\n      if (consumed) {\r\n        return\r\n      }\r\n      consumed = true\r\n      return reject(e)\r\n    }\r\n  }\r\n  else {\r\n    return resolve(result)\r\n  }\r\n}\r\n\r\nPromise.prototype.then = function(onfulfilled, onrejected) {\r\n  onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data => data\r\n  onrejected = typeof onrejected === 'function' ? onrejected : error => {throw error}\r\n\r\n// promise2 将作为 then 方法的返回值\r\n  let promise2\r\n\r\nif (this.status === 'fulfilled') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果\r\n          let result = onfulfilled(this.value)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          reject(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  if (this.status === 'rejected') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          // 这个新的 promise2 reject 的值为 onrejected 的执行结果\r\n         let result = onrejected(this.reason)\r\n         resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          reject(e)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  if (this.status === 'pending') {\r\n    return promise2 = new Promise((resolve, reject) => {\r\n      this.onFulfilledArray.push(value => {\r\n        try {\r\n          let result = onfulfilled(value)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          return reject(e)\r\n        }\r\n      })\r\n\r\nthis.onRejectedArray.push(reason => {\r\n        try {\r\n          let result = onrejected(reason)\r\n          resolvePromise(promise2, result, resolve, reject)\r\n        }\r\n        catch(e) {\r\n          return reject(e)\r\n        }\r\n      })\r\n})\r\n  }\r\n}\r\n\r\nPromise.prototype.catch = function(catchFunc) {\r\n  return this.then(null, catchFunc)\r\n}\r\n\r\nPromise.resolve = function(value) {\r\n  return new Promise((resolve, reject) => {\r\n    resolve(value)\r\n  })\r\n}\r\n\r\nPromise.reject = function(value) {\r\n  return new Promise((resolve, reject) => {\r\n    reject(value)\r\n  })\r\n}\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"function Promise(executor) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  this.status = 'pending'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  this.value = null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  this.reason = null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  this.onFulfilledArray = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  this.onRejectedArray = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const resolve = value => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (value instanceof Promise) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return value.then(resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (this.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        this.value = value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        this.status = 'fulfilled'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"this.onFulfilledArray.forEach(func => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          func(value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const reject = reason => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (this.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        this.reason = reason\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        this.status = 'rejected'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"this.onRejectedArray.forEach(func => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          func(reason)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        executor(resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const resolvePromise = (promise2, result, resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  // 当 result 和 promise2 相等时，也就是说 onfulfilled 返回 promise2 时，进行 reject\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (result === promise2) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return reject(new TypeError('error due to circular reference'))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// 是否已经执行过 onfulfilled 或者 onrejected\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let consumed = false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let thenable\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (result instanceof Promise) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if (result.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      result.then(function(data) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        resolvePromise(promise2, data, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      result.then(resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"let isComplexResult = target => (typeof target === 'function' || typeof target === 'object') && (target !== null)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  // 如果返回的是疑似 Promise 类型\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (isComplexResult(result)) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      thenable = result.then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      // 如果返回的是 Promise 类型，具有 then 方法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (typeof thenable === 'function') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        thenable.call(result, function(data) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"return resolvePromise(promise2, data, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }, function(error) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"            return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"return reject(error)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return resolve(result)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"} catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      if (consumed) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      consumed = true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return resolve(result)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Promise.prototype.then = function(onfulfilled, onrejected) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : data => data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  onrejected = typeof onrejected === 'function' ? onrejected : error => {throw error}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// promise2 将作为 then 方法的返回值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  let promise2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (this.status === 'fulfilled') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":116},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          // 这个新的 promise2 resolved 的值为 onfulfilled 的执行结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":117},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onfulfilled(this.value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":118},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":119},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":120},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":121},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":122},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":123},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":124},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":125},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":126},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (this.status === 'rejected') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":127},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":128},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      setTimeout(() => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":129},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":130},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          // 这个新的 promise2 reject 的值为 onrejected 的执行结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":131},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"         let result = onrejected(this.reason)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":132},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"         resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":133},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":134},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":135},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":136},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":137},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":138},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":139},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":140},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  if (this.status === 'pending') {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":141},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return promise2 = new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":142},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      this.onFulfilledArray.push(value => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":143},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":144},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onfulfilled(value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":145},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":146},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":147},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":148},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":149},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":150},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":151},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":152},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"this.onRejectedArray.push(reason => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":153},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        try {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":154},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          let result = onrejected(reason)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":155},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          resolvePromise(promise2, result, resolve, reject)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":156},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":157},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        catch(e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":158},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          return reject(e)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":159},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":160},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"      })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":161},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":162},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":163},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":164},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":165},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Promise.prototype.catch = function(catchFunc) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":166},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  return this.then(null, catchFunc)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":167},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":168},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":169},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Promise.resolve = function(value) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":170},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  return new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":171},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    resolve(value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":172},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":173},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":174},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":175},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Promise.reject = function(value) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":176},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  return new Promise((resolve, reject) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":177},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    reject(value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":178},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":179},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"参考文献"},"children":[{"type":"text","value":"参考文献"}]},{"type":"element","tag":"ul","props":{"className":["contains-task-list"]},"children":[{"type":"element","tag":"li","props":{"className":["task-list-item"]},"children":[{"type":"element","tag":"input","props":{"checked":true,"disabled":true,"type":"checkbox"},"children":[]},{"type":"element","tag":"a","props":{"href":"https://mengera88.github.io/2017/05/18/Promise%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/","rel":["nofollow"]},"children":[{"type":"text","value":"30分钟，让你彻底明白Promise原理"}]}]},{"type":"element","tag":"li","props":{"className":["task-list-item"]},"children":[{"type":"element","tag":"input","props":{"checked":true,"disabled":true,"type":"checkbox"},"children":[]},{"type":"element","tag":"a","props":{"href":"https://time.geekbang.org/column/article/136895","rel":["nofollow"]},"children":[{"type":"text","value":"浏览器工作原理与实践"}]}]},{"type":"element","tag":"li","props":{"className":["task-list-item"]},"children":[{"type":"element","tag":"input","props":{"checked":true,"disabled":true,"type":"checkbox"},"children":[]},{"type":"element","tag":"a","props":{"href":"https://gitbook.cn/gitchat/column/5c91c813968b1d64b1e08fde/topic/5cbbe946bbbba80861a35bfc","rel":["nofollow"]},"children":[{"type":"text","value":"前端开发核心知识进阶"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-9a99ad{color:#4FC1FF}\n.ct-e6e3f5{color:#C586C0}\n.ct-d50f9f{color:#6A9955}\n.ct-af075e{color:#B5CEA8}\n.ct-c29eff{color:#4EC9B0}\n.ct-7bfd14{color:#9CDCFE}\n.ct-18a1b2{color:#569CD6}\n.ct-2e6635{color:#CE9178}\n.ct-2edc03{color:#D4D4D4}\n.ct-94714e{color:#DCDCAA}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"基本概念","depth":2,"text":"基本概念"},{"id":"原理剖析","depth":2,"text":"原理剖析","children":[{"id":"极简promise雏形","depth":3,"text":"极简Promise雏形"},{"id":"加入延迟绑定机制","depth":3,"text":"加入延迟绑定机制"},{"id":"加入状态","depth":3,"text":"加入状态"},{"id":"链式promise","depth":3,"text":"链式Promise"},{"id":"promise-值穿透","depth":3,"text":"Promise 值穿透"},{"id":"异常处理","depth":3,"text":"异常处理"},{"id":"promiseprototyperesolve-实现","depth":3,"text":"Promise.prototype.resolve 实现"}]},{"id":"总结","depth":2,"text":"总结"},{"id":"参考文献","depth":2,"text":"参考文献"}]}},"_type":"markdown","_id":"content:articles:2020-06-27-深入 JS 之 Promise.md","_source":"content","_file":"articles/2020-06-27-深入 JS 之 Promise.md","_extension":"md"},{"_path":"/articles/2020-06-28-http","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"HTTP 缓存","description":"本篇博客主要是对 Http 缓存的学习理解","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Http 缓存的学习理解"}]}]},"date":"2020-06-28T00:00:00.000Z","tags":["Http"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 Http 缓存的学习理解"}]},{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"讲到前端性能优化，就绕不开浏览器缓存。缓存是计算机领域里的一个重要概念，是优化系统性能的利器。缓存是必知必会的知识点，如果现在你还是不懂或一知半解就来一起学习掌握它吧。"}]},{"type":"element","tag":"h2","props":{"id":"基本概念"},"children":[{"type":"text","value":"基本概念"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Web 缓存分类"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据库缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"（代理）服务器缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CDN 缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"浏览器缓存"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"浏览器缓存也包含很多内容： HTTP 缓存、indexDB、cookie、localstorage 等等。这里我们只讨论 HTTP 缓存相关内容。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HTTP 缓存官方概念"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HTTP 缓存（或 Web 缓存）是用于临时存储（缓存）Web文档（如 HTML 页面和图像），以减少服务器延迟的一种信息技术。HTTP 缓存系统会保存下通过这套系统的文档的副本；如果满足某些条件，则可以由缓存满足后续请求。HTTP 缓存系统既可以指设备，也可以指计算机程序。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"缓存的好处："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使得网页加载和呈现速度更快"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"减少了不必要的的数据传输，因而节省网络流量和带宽"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在上一步的基础上，服务器的负担因此减少"}]}]},{"type":"element","tag":"h2","props":{"id":"服务器缓存控制"},"children":[{"type":"text","value":"服务器缓存控制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HTTP 1.0 版本规定响应头字段 Expires，它对应一个未来的时间戳。客户端第一次请求之后，服务端下发 Expires 响应头字段，当客户端再次需要请求时，先会对比当前时间和 Expires 头中设置的时间。如果当前时间早于 Expires 时间，那么直接使用缓存数据；反之，需要再次发送请求，更新数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"但是使用 Expires 响应头存在一些小的瑕疵，比如："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可能会因为服务器和客户端的 GMT 时间不同，出现偏差"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果修改了本地时间，那么客户端端日期可能不准确"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"写法太复杂，字符串多个空格，少个字母，都会导致非法属性从而设置失效"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"为了解决上述问题，    在 HTTP 1.1 版本中，服务端使用 Cache-control 这个响应头，这个头部更加强大，它具有多个不同值："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"private：表示私有缓存，不能被共有缓存代理服务器缓存，不能在用户间共享，可被用户的浏览器缓存。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"public：表示共有缓存，可被代理服务器缓存，比如 CDN，允许多用户间共享"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max-age：值以秒为单位，表示缓存的内容会在该值后过期"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"no-cache：需要使用协商缓存，协商缓存的内容我们后面介绍。注意这个字段并不表示不使用缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"no-store：所有内容都不会被缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"must-revalidate：告诉浏览器，你这必须再次验证检查信息是否过期, 返回的代号就不是 200 而是 304 了"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HTTP 规定，如果 Cache-control 的 max-age 和 Expires 同时出现，那么 max-age 的优先级更高，他会默认覆盖掉 expires。"}]}]},{"type":"element","tag":"h2","props":{"id":"客户端缓存控制"},"children":[{"type":"text","value":"客户端缓存控制"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其实不止服务器可以发 Cache-Control 头，浏览器也可以发 Cache-Control ，也就是说请求 - 响应的双方都可以用这个字段进行缓存控制，互相协商缓存的使用策略。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"客户端使用 Cache-control 对应的多个值："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"no-cache：强制向源服务器再次验证"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"no-store：不缓存请求或者响应的任何内容"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max-age = '秒'：响应的最大Age值（缓存过期时间）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当你点“刷新 F5”按钮的时候，浏览器会在请求头里加一个“Cache-Control: max-age=0”。因为 max-age 是“生存时间”，max-age=0 的意思就是“我要一个最最新的文件”，而本地缓存里的数据至少保存了几秒钟，所以浏览器就不会使用缓存，而是向服务器发请求。服务器看到 max-age=0，也就会用一个最新生成的报文回应浏览器。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但你使用 Ctrl+F5 的“强制刷新”时，它其实是发了一个“Cache-Control: no-cache”，含义和“max-age=0”基本一样。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"条件请求"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"浏览器用 Cache-Control 做缓存控制只能是刷新数据，不能很好地利用缓存数据，又因为缓存会失效，使用前还必须要去服务器验证是否是最新版。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HTTP 协议就定义了一系列“If”开头的“条件请求”字段，专门用来检查验证资源是否过期，把两个请求才能完成的工作合并在一个请求里做。而且，验证的责任也交给服务器。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"条件请求一共有 5 个头字段，我们最常用的是“if-Modified-Since”和“If-None-Match”这两个。需要第一次的响应报文预先提供“Last-modified”和“ETag”，然后第二次请求时就可以带上缓存里的原值，验证资源是否是最新的。如果资源没有变，服务器就回应一个“304 Not Modified”，表示缓存依然有效，浏览器就可以更新一下有效期，然后放心大胆地使用缓存了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ETag 是“实体标签”（Entity Tag）的缩写，是资源的一个唯一标识，主要是用来解决修改时间无法准确区分文件变化的问题"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h2","props":{"id":"http-缓存分类"},"children":[{"type":"text","value":"HTTP 缓存分类"}]},{"type":"element","tag":"h3","props":{"id":"_1按缓存位置分类"},"children":[{"type":"text","value":"1、按缓存位置分类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于浏览器缓存的分类，分类方式有很多，按缓存位置分类，我们有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"memory cache"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"disk cache"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Service Worker 等"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"浏览器的资源缓存分为 from disk cache 和 from memory cache 两类。当首次访问网页时，资源文件被缓存在内存中，同时也会在本地磁盘中保留一份副本。当用户刷新页面，如果缓存的资源没有过期，那么直接从内存中读取并加载。当用户关闭页面后，当前页面缓存在内存中的资源被清空。当用户再一次访问页面时，如果资源文件的缓存没有过期，那么将从本地磁盘进行加载并再次缓存到内存之中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于 from disk cache 和 from memory cache 的区别："}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当您访问chrome中的URL时，页面上的HTML和其他资产（如图像）将本地存储在内存和磁盘缓存中。Chrome将首先使用内存缓存，因为它的速度快得多，但它也会将页面存储在磁盘缓存中，以防您退出浏览器或它崩溃，因为磁盘缓存是持久的。"}]}]},{"type":"element","tag":"h3","props":{"id":"_2按失效策略分类"},"children":[{"type":"text","value":"2、按失效策略分类"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"强缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"协商缓存"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"强缓存"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"强缓存是指客户端在第一次请求后，有效时间内不会再去请求服务器，而是直接使用缓存数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"协商缓存"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"强缓存判断的实质上是缓存资源是否超出某个时间或者某个时间段。很多情况是超出了这个时间或时间段，但是资源并没有更新。从优化的角度来说，我们真正应该关心的是服务器端文件是否已经发生了变化。此时我们需要用到协商缓存策略。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"强制缓存优先级最高，并且资源的改动在缓存有效期内浏览器都不会发送请求，因此强制缓存的使用适用于大型且不易修改的的资源文件，例如第三方 CSS、JS 文件或图片资源。如果更加灵活的话，我们也可以为文件名加上 hash 进行版本的区分。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"协商缓存灵活性高，适用于数据的缓存，根据上述知识的介绍，采用 Etag 标识进行对比灵活度最高，也最为可靠。对于数据的缓存，我们可以重点考虑存入内存中，因为内存加载速最快，并且数据体积小。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"优先级上：Cache-Control > Expires > ETag > Last-Modified"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"基本概念","depth":2,"text":"基本概念"},{"id":"服务器缓存控制","depth":2,"text":"服务器缓存控制"},{"id":"客户端缓存控制","depth":2,"text":"客户端缓存控制"},{"id":"http-缓存分类","depth":2,"text":"HTTP 缓存分类","children":[{"id":"_1按缓存位置分类","depth":3,"text":"1、按缓存位置分类"},{"id":"_2按失效策略分类","depth":3,"text":"2、按失效策略分类"}]}]}},"_type":"markdown","_id":"content:articles:2020-06-28-Http缓存.md","_source":"content","_file":"articles/2020-06-28-Http缓存.md","_extension":"md"},{"_path":"/articles/2021-11-20-jsyuan","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"JQ给伪元素绑定事件","description":"","date":"2021-10-14T00:00:00.000Z","tags":["jQuery"],"body":{"type":"root","children":[{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为文案希望只点击红色方框才能触发点击事件，而自己之前的点击事件是直接加在整个元素上的，方框是用伪元素写的，而文件已经发给多语言翻译，所以不支持再更改目录结构。如下图所示\r\n"},{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2021-10-14-pic2.png","title":"2021-10-14-pic2.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"解决办法"},"children":[{"type":"text","value":"解决办法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"用css给当前绑定事件的元素添加pointer-events: none;然后给当前需要点击的伪元素添加pointer-events: auto;\r\n此时就只有当点击伪元素时才会触发点击事件。但是如果当前元素有其他需要被hover的对象时，父元素被添加pointer-events:none后，Hover效果也会消失，比如"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2021-10-14-pic1.png","title":"2021-10-14-pic1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此也需要给问号添加pointer-events: auto;，但是添加后点击问号同样会触发点击事件，因此还需要在js文件中"}]},{"type":"element","tag":"code","props":{"code":"$(\".wen).click(function(){\r\nreturn false\r\n})\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-445058"},"children":[{"type":"text","value":"$("}]},{"type":"element","tag":"span","props":{"class":"ct-f41624"},"children":[{"type":"text","value":"\".wen).click(function(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41624"},"children":[{"type":"text","value":"return false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41624"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这时候就既能Hover,还不会冒泡触发当前事件"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"伪元素非 dom 元素，jq无法操作，但可以间接影响。但是为了保险起见，可以选中不使用伪元素绑定事件"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f41624{color:#CE9178}\n.ct-445058{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"解决办法","depth":2,"text":"解决办法"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:2021-11-20-js如何给伪元素绑定事件.md","_source":"content","_file":"articles/2021-11-20-js如何给伪元素绑定事件.md","_extension":"md"},{"_path":"/articles/2022-01-17-jquery-slidedownslideup","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"JQuery 中slidedown和slideup函数使用注意","description":"本篇博客主要是对 JQuery 中slidedown和slideup函数使用注意","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 JQuery 中slidedown和slideup函数使用注意"}]}]},"date":"2022-01-19T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 JQuery 中slidedown和slideup函数使用注意"}]},{"type":"element","tag":"h2","props":{"id":"数据类型"},"children":[{"type":"text","value":"数据类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于Juqery 中 slidedown和slideup 的使用\r\n在项目中通常使用上述两个函数来控制样式的显示与隐藏，比如希望控制图片中红色方框内的文字显示隐藏\r\n"},{"type":"element","tag":"img","props":{"alt":"","src":"https://cdn.nlark.com/yuque/0/2022/png/25736107/1641542723576-d661e52c-36cd-4234-bbfd-9371492cf5a9.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"原因"},"children":[{"type":"text","value":"原因"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果控制显示隐藏的是行内元素或者行内块元素的时候，就会出现抖动，动画不顺畅的情况，因为jquery 在控制显示隐藏的时候会给行内块元素添加style=\"inline-block\",而不是style=\"block\"."}]},{"type":"element","tag":"h2","props":{"id":"解决办法"},"children":[{"type":"text","value":"解决办法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将控制显示隐藏的元素修改为块级元素，比如p, div 等"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"数据类型","depth":2,"text":"数据类型"},{"id":"原因","depth":2,"text":"原因"},{"id":"解决办法","depth":2,"text":"解决办法"}]}},"_type":"markdown","_id":"content:articles:2022-01-17-JQuery 中slidedown和slideup函数使用注意.md","_source":"content","_file":"articles/2022-01-17-JQuery 中slidedown和slideup函数使用注意.md","_extension":"md"},{"_path":"/articles/2022-03-22-js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"深js解决浮点数运算精度丢失","description":"本篇博客主要是对 js解决浮点数运算精度丢失","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 js解决浮点数运算精度丢失"}]}]},"date":"2022-03-22T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 js解决浮点数运算精度丢失"}]},{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"计算机的二进制实现和位数限制有些数无法有限表示。就像一些无理数不能有限表示，如 圆周率 3.1415926...，1.3333... 等。JS 遵循 IEEE 754 规范，采用双精度存储（double precision），占用 64 bit。此时只能模仿十进制进行四舍五入了，但是二进制只有 0 和 1 两个，于是变为 0 舍 1 入。这即是计算机中部分浮点数运算时出现误差，丢失精度的根本原因。\r\n浮点数精度问题，比如 0.1 + 0.2 !== 0.3\r\n大数精度问题，比如 9999 9999 9999 9999 == 1000 0000 0000 0000 1\r\ntoFixed 四舍五入结果不准确，比如 1.335.toFixed(2) == 1.33\r\n四舍五入 toFixed()方法"}]},{"type":"element","tag":"code","props":{"code":"let a = 2.446242342;a = a.toFixed(2);  // 输出结果为 2.45\r\nlet b = 2.335;b = b.toFixed(2);  // 输出结果为 2.33\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9663ae"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-664dd3"},"children":[{"type":"text","value":"2.446242342"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-18122c"},"children":[{"type":"text","value":"toFixed"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-664dd3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":");  "}]},{"type":"element","tag":"span","props":{"class":"ct-6d1404"},"children":[{"type":"text","value":"// 输出结果为 2.45\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-9663ae"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-664dd3"},"children":[{"type":"text","value":"2.335"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-63974f"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-18122c"},"children":[{"type":"text","value":"toFixed"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-664dd3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-e9cdd8"},"children":[{"type":"text","value":");  "}]},{"type":"element","tag":"span","props":{"class":"ct-6d1404"},"children":[{"type":"text","value":"// 输出结果为 2.33"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"解决思路"},"children":[{"type":"text","value":"解决思路"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本质上在处理这类问题的时候，基本的思路就是通过将浮点数转换成整数进行计算，然后再将整数的小数点位调整，转回正确的浮点数结果。\r\n定义一个自定义的转换和处理函数，然后就可以使用了"}]},{"type":"element","tag":"code","props":{"code":"Math.formatFloat = function (f, digit) {\r\n    var m = Math.pow(10, digit);\r\n    return Math.round(f * m, 10) / m;\r\n}\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Math.formatFloat = function (f, digit) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    var m = Math.pow(10, digit);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return Math.round(f * m, 10) / m;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6d1404{color:#6A9955}\n.ct-18122c{color:#DCDCAA}\n.ct-664dd3{color:#B5CEA8}\n.ct-63974f{color:#9CDCFE}\n.ct-e9cdd8{color:#D4D4D4}\n.ct-9663ae{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"解决思路","depth":2,"text":"解决思路"}]}},"_type":"markdown","_id":"content:articles:2022-03-22-js解决浮点数运算精度丢失.md","_source":"content","_file":"articles/2022-03-22-js解决浮点数运算精度丢失.md","_extension":"md"},{"_path":"/articles/2022-04-14-js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"从(++[[]][+[]]+[+[]]) 等于10了解隐式转换","description":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决"}]}]},"date":"2022-04-14T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决"}]},{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"code","props":{"code":"++[[]][+[]]+[+[]]==='10'\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"++[[]][+[]]+[+[]]==="}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'10'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果把这段表达式拆分开来，它相等于"}]},{"type":"element","tag":"code","props":{"code":"++[[]][+[]]\r\n+\r\n[+[]]\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"++[[]][+[]]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"[+[]]"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"思路"},"children":[{"type":"text","value":"思路"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 JavaScript 里，+"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" === 0 是完全正确的。 + 会把一些字符转化成数字，在这里，这个式子会变成 +\"\"或 0。因此，我们可以简化一下(++ 比 + 有更高的优先级)："}]},{"type":"element","tag":"code","props":{"code":"++[[]][0]\r\n+\r\n[0]\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"++[[]]["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为 [[]]"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" 的意思是：获取 [[]] 的第一个元素，这就得出了下面的结果：\r\n● [[]]"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" 返回内部数组 ("},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":")。根据语言规范，我们说 [[]]"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" === "},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" 是不正确的，但让我们把这个内部数组称作 A，以避免错误的写法。\r\n● ++[[]]"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" == A + 1， 因为 ++ 的意思是”加一”。\r\n● ++[[]]"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" === +(A + 1)；换句话说，你得到的永远是个数值( +1 并不一定得到的是个数值，但 ++一定是)。\r\n同样，我们可以把这一堆代码简化的更清晰。让我们把 A 换回成 "},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" :"}]},{"type":"element","tag":"code","props":{"code":"+([] + 1)\r\n+\r\n[0]\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+([] + "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 JavaScript 里，这也是正确的："},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" + 1 === \"1\"，因为 "},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" == \"\" (这相当于一个空的数组的内部元素连接)，于是"}]},{"type":"element","tag":"code","props":{"code":"+([] + 1) === +(\"” + 1)，并且 \r\n+(\"” + 1) === +(\"1\")，并且 \r\n+(\"1\") === 1 \n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+([] + "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":") === +("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"” + 1)，并且 \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"+(\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"” + "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":") === +("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"1\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":")，并且 \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"1\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":") === "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"让我们再次简化一下："}]},{"type":"element","tag":"code","props":{"code":"1\r\n+\r\n[0]\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"同样，在 Javascript 里，这是正确的："},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" == \"0\"，因为这是相当于一个有一个元素的数组的内部元素的连接。 各元素会使用，分隔。 当只有一个元素时，你可以推论出这个过程的结果就是它自身的第一个元素。\r\n所以，最终我们得到 (数字 + 字符串 = 字符串)："}]},{"type":"element","tag":"code","props":{"code":"1\r\n+\r\n\"0\"\r\n\r\n=== \"10\" //\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"=== "}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"10\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"原因"},"children":[{"type":"text","value":"原因"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先我们需要知道什么是"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"隐式转换"}]},{"type":"text","value":"，JavaScript是一门弱类型的语言，他在声明变量的时候不需要指定类型，对变量赋值也没有类型的检测，所以js是非常的灵活的，但是有时候也会出现一些非常匪夷所思的问题，\r\n隐式类型转换就是指，数据的类型在不用人工干预的情况下进行转换的行为。在js中，当运算符在运算时，如果两边数据不统一，CPU就无法计算，这时我们编译器会自动将运算符两边的数据做一个数据类型转换，转成一样的数据类型再计算。这种无需程序员手动转换，而由编译器自动转换的方式就称为隐式转换\r\n"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"方式"}]},{"type":"text","value":"\r\n隐式转换主要有三种方式"}]},{"type":"element","tag":"code","props":{"code":"将值转为原始值，ToPrimitive()。\r\n\r\n将值转为数字，ToNumber()。\r\n\r\n将值转为字符串，ToString()。\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"将值转为原始值，"}]},{"type":"element","tag":"span","props":{"class":"ct-f6e89c"},"children":[{"type":"text","value":"ToPrimitive"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"()。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"将值转为数字，"}]},{"type":"element","tag":"span","props":{"class":"ct-f6e89c"},"children":[{"type":"text","value":"ToNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"()。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"将值转为字符串，"}]},{"type":"element","tag":"span","props":{"class":"ct-f6e89c"},"children":[{"type":"text","value":"ToString"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"()。"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"运算符中的隐式类型转换"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"+、-、*、/、++、–、+=、-=、>、<、>=、<=、==、!= 这些运算中，系统都会将值先转换为数字类型再进行计算或比较。\r\n1、加号运算符( + )可以把任何数据类型转换为数字，转换规则与 Number() 方法相同。\r\nNull、Undefined 和 false在与数字的计算中折算为0，true 折算为1。\r\nundefined会被转换为 NaN。\r\nNaN在算术运算符中遇到任何值进行比较结果都为NaN。\r\n比如"}]},{"type":"element","tag":"code","props":{"code":"console.log(1+'true');      //'1true'\r\nconsole.log(1+true);        //2\r\nconsole.log(1+null);        //1\r\nconsole.log(1+undefined);       //NaN\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'true'"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//'1true'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"+undefined);       "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//NaN\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2、可以用加号运算符很方便的把其他类型的值转换为数字类型。"}]},{"type":"element","tag":"code","props":{"code":"console.log(+true);         //1\r\nconsole.log(+undefined);    //NaN\r\nconsole.log(+\"123\");        //123\r\nconsole.log(+\"string\");     //NaN\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(+"}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");         "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(+undefined);    "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//NaN\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(+"}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"123\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//123\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(+"}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"string\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");     "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//NaN\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3、除了加号运算符，也可以使用 a - 0 的形式，将数据类型转换为数字。"}]},{"type":"element","tag":"code","props":{"code":"console.log(11-'5');        //6\r\nconsole.log('11'-'5');      //6\r\nconsole.log(-null);         //-0\r\nconsole.log(true - 0);      //1\r\nconsole.log(null - 0);      //0\r\nconsole.log(\"123\" - 0);     //123\r\nconsole.log(\"\" - 0);        //0\r\nconsole.log([999] - 0);     //999\r\nconsole.log([2] - [1]);     //1\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'5'"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'11'"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'5'"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(-"}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");         "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//-0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5a9fd3"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"123\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");     "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//123\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");        "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"999"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"] - "}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");     "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//999\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"] - ["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]);     "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4、比较运算符（= =），== 不同于===，故也存在隐式转换。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比较运算符会把其他数据类型转换number数据类型后再比较。\r\n在javascript中有两种特殊情况无视规则。\r\n复杂数据类型的隐式转换\r\n复杂数据类型在隐式转换时的顺序如下："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先试用 valueOf() 方法获取其原始值，如果原始值不是 number 类型，则使用 toString() 方法转换成 string 类型。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将 string 类型转换成 number 类型进行运算。\r\n比如"}]}]},{"type":"element","tag":"code","props":{"code":"console.log([1,2]=='1,2');      //true\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4ec47b"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-c4a301"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":"]=="}]},{"type":"element","tag":"span","props":{"class":"ct-a0a05a"},"children":[{"type":"text","value":"'1,2'"}]},{"type":"element","tag":"span","props":{"class":"ct-a7eac5"},"children":[{"type":"text","value":");      "}]},{"type":"element","tag":"span","props":{"class":"ct-0e94f2"},"children":[{"type":"text","value":"//true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将 "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"1,2"}]},{"type":"text","value":" 用 valueOf() 取其原始值，发现不是数字类型，转换成 string 类型之后，发现与 ‘1,2’ 相等，所以返回 true。因此在js空数组等于0，空数组的toString()方法会得到空字符串，而空对象的toString()方法会得到字符串"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"object Object"}]},{"type":"text","value":"，"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":" 通过同String()转成空字符串，再通过Number()转成0。因此+"},{"type":"element","tag":"span","props":{},"children":[]},{"type":"text","value":"等于0。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5a9fd3{color:#569CD6}\n.ct-4ec47b{color:#D7BA7D}\n.ct-f6e89c{color:#DCDCAA}\n.ct-0e94f2{color:#6A9955}\n.ct-c4a301{color:#B5CEA8}\n.ct-a0a05a{color:#CE9178}\n.ct-a7eac5{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"思路","depth":2,"text":"思路"},{"id":"原因","depth":2,"text":"原因"}]}},"_type":"markdown","_id":"content:articles:2022-04-14-js隐式转换.md","_source":"content","_file":"articles/2022-04-14-js隐式转换.md","_extension":"md"},{"_path":"/articles/2022-04-22-blurclick","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"blur与click冲突解决","description":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决"}]}]},"date":"2022-04-22T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于在表单下拉选择中blur与click冲突解决"}]},{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在开发中我们会经常遇到blur和click冲突的情况。下面叙述了开发中常遇到的“下拉框选择”的问题，并提供了两种解决方案。\r\n简述"}]},{"type":"element","tag":"h2","props":{"id":"简述"},"children":[{"type":"text","value":"简述"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"●  blur事件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当元素失去焦点时触发blur事件；其为表单事件，blur和focus事件不会冒泡，其他表单事件都可以。"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"● click事件"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"click事件：当点击元素时触发click事件；所有元素都有此事件，会产生冒泡。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"示例1：blur事件为表单事件"}]}]},{"type":"element","tag":"code","props":{"code":"<input type=\"text\" id=\"tel\">\r\n<script>\r\n    document.addEventListener(\"blur\", function(){\r\n        console.log(\"my document blur\");\r\n    });\r\n\r\n    var ipt = document.getElementById(\"tel\");\r\n    ipt.addEventListener(\"blur\", function(){\r\n        console.log(\"my input blur\");\r\n    });\r\n</script>\r\n// 输出结果：document为非表单元素\r\nmy input blur\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"tel\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    document"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my document blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" ipt = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"tel\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    ipt"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my input blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 输出结果：document为非表单元素\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" blur"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"示例2：click事件可以冒泡"}]}]},{"type":"element","tag":"code","props":{"code":"<input type=\"text\" id=\"tel\">\r\n<script>\r\n    document.addEventListener(\"click\", function(){\r\n        console.log(\"my document click\");\r\n    });\r\n\r\n    var ipt = document.getElementById(\"tel\");\r\n    ipt.addEventListener(\"click\", function(){\r\n        console.log(\"my input click\");\r\n    });\r\n</script>\r\n// 输出结果：\r\nmy input click\r\nmy document click\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"tel\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    document"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my document click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" ipt = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"tel\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    ipt"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my input click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 输出结果：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" click\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my document click"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"示例3：点击某元素导致前一个元素失去焦点，blur事件优先于click事件"}]}]},{"type":"element","tag":"code","props":{"code":"<input type=\"text\" id=\"ipt\">\r\n<input type=\"button\" id=\"btn\" value=\"点我\">\r\n<script>\r\n    var ipt = document.getElementById(\"ipt\");\r\n    ipt.addEventListener(\"blur\", function(){\r\n        console.log(\"my input blur\");\r\n    });\r\n\r\n    var btn = document.getElementById(\"btn\");\r\n    btn.addEventListener(\"click\", function(){\r\n        console.log(\"my button click\");\r\n    });\r\n</script>\r\n// 输出结果：\r\nmy input blur\r\nmy button click\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"ipt\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"button\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" value="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"点我\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" ipt = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"ipt\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    ipt"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my input blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" btn = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    btn"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my button click\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 输出结果：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" blur\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" click"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"实例"},"children":[{"type":"text","value":"实例"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实际开发中，我们会经常遇到某一下拉列表框，点击其他元素消失列表框；点击下拉框子元素使其生效的需求。这就会面临冲突问题。"}]},{"type":"element","tag":"code","props":{"code":"<!-- DOM结构示意 -->\r\n<input type=\"text\" placeholder=\"请选择姓氏\" readonly>\r\n<div class=\"search-list\" data-status=\"hide\">\r\n    <ul>\r\n        <li><a href=\"javascript:\">赵</a></li>\r\n        <li><a href=\"javascript:\">钱</a></li>\r\n        <li><a href=\"javascript:\">孙</a></li>\r\n        <li><a href=\"javascript:\">李</a></li>\r\n    </ul>\r\n</div>\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<!-- DOM结构示意 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"请选择姓氏\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" readonly>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"search-list\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" data-status="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"hide\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"ul"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" href="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"javascript:\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">赵</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" href="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"javascript:\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">钱</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" href="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"javascript:\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">孙</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" href="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"javascript:\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">李</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"li"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"ul"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"/** 说明：\r\n *  目前通过ul外层div自定义属性“data-status”控制其是否显示   \r\n */\r\n(function($){\r\n    $(\"input\").focus(function(){\r\n        // input框获取焦点，展示下拉框\r\n        $(\".search-list\").attr(\"data-status\", \"show\");\r\n    }).blur(function(){\r\n        // input框失去焦点，隐藏下拉框\r\n        $(\".search-list\").attr(\"data-status\", \"hide\");\r\n    });\r\n    // 选择对应选项，并赋值给input框\r\n    $(\".search-list li a\").click(function(){\r\n        console.log(\"执行\");\r\n        $(\"input\").val($(this).text());\r\n    });\r\n})(jQuery);\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"/** 说明：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":" *  目前通过ul外层div自定义属性“data-status”控制其是否显示   \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":" */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"($){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"input\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".focus"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// input框获取焦点，展示下拉框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".attr"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"data-status\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"show\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".blur"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// input框失去焦点，隐藏下拉框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".attr"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"data-status\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"hide\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 选择对应选项，并赋值给input框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list li a\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".click"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"执行\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"input\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".val"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"($(this)"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".text"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"})(jQuery);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"执行上述代码，会出现一个问题，并不能正确获取下拉框中某值。\r\n"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"原因"}]},{"type":"text","value":"：由于JavaScript为单线程，同一时间只能执行处理一个事件。由上述示例3，可得知“blur优先于click执行”。而在本示例中，由于blur处理程序，会将对应的下拉框展示区隐藏，所以导致其后续click事件并不会执行。上述console的信息也不会被输出。"}]},{"type":"element","tag":"h2","props":{"id":"解决办法"},"children":[{"type":"text","value":"解决办法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"1.对blur事件延迟"}]}]},{"type":"element","tag":"code","props":{"code":"(function($){\r\n    $(\"input\").focus(function(){\r\n        // input框获取焦点，展示下拉框\r\n        $(\".search-list\").attr(\"data-status\", \"show\");\r\n    }).blur(function(){\r\n        setTimeout(function(){\r\n            // input框失去焦点，隐藏下拉框\r\n            $(\".search-list\").attr(\"data-status\", \"hide\");\r\n        }, 300);\r\n    });\r\n    // 选择对应选项，并赋值给input框\r\n    $(\".search-list li a\").click(function(){\r\n        console.log(\"执行\");\r\n        $(\"input\").val($(this).text());\r\n    });\r\n})(jQuery);\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"($){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"input\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".focus"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// input框获取焦点，展示下拉框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".attr"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"data-status\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"show\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".blur"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// input框失去焦点，隐藏下拉框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"            $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".attr"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"data-status\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"hide\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        }, "}]},{"type":"element","tag":"span","props":{"class":"ct-4b8ffd"},"children":[{"type":"text","value":"300"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 选择对应选项，并赋值给input框\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\".search-list li a\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".click"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"执行\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        $("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"input\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".val"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"($(this)"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".text"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"})(jQuery);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2.将click改为mousedown方法去执行"}]}]},{"type":"element","tag":"code","props":{"code":"<input type=\"text\" id=\"ipt\">\r\n<input type=\"button\" id=\"btn\" value=\"点我\">\r\n<script>\r\n    var ipt = document.getElementById(\"ipt\");\r\n    ipt.addEventListener(\"blur\", function(){\r\n        console.log(\"my input blur\");\r\n    });\r\n\r\n    var btn = document.getElementById(\"btn\");\r\n    btn.addEventListener(\"mousedown\", function(){\r\n        console.log(\"my button mousedown\");\r\n    });\r\n</script>\r\n// 输出结果：\r\nmy button mousedown\r\nmy input blur\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"ipt\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"button\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" id="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" value="}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"点我\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" ipt = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"ipt\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    ipt"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my input blur\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" btn = document."}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"btn\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    btn"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".addEventListener"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"mousedown\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-605368"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6203df"},"children":[{"type":"text","value":"\"my button mousedown\""}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e6b343"},"children":[{"type":"text","value":"// 输出结果：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" mousedown\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":"my "}]},{"type":"element","tag":"span","props":{"class":"ct-1b4f2f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-86a17d"},"children":[{"type":"text","value":" blur"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4b8ffd{color:#B5CEA8}\n.ct-e6b343{color:#6A9955}\n.ct-605368{color:#DCDCAA}\n.ct-6203df{color:#CE9178}\n.ct-1b4f2f{color:#D7BA7D}\n.ct-86a17d{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"简述","depth":2,"text":"简述"},{"id":"实例","depth":2,"text":"实例"},{"id":"解决办法","depth":2,"text":"解决办法"}]}},"_type":"markdown","_id":"content:articles:2022-04-22-blur与click冲突.md","_source":"content","_file":"articles/2022-04-22-blur与click冲突.md","_extension":"md"},{"_path":"/articles/2022-05-01-node.jsday01","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"node.js学习day01","description":"本篇博客主要是对 关于node.js基本操作的学习","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于node.js基本操作的学习"}]}]},"date":"2022-05-01T00:00:00.000Z","tags":["node.js","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 关于node.js基本操作的学习"}]},{"type":"element","tag":"h2","props":{"id":"_01使用readfile方法读取文件的内容"},"children":[{"type":"text","value":"01.使用readFile方法读取文件的内容"}]},{"type":"element","tag":"code","props":{"code":"// 1. 导入 fs 模块，来操作文件\r\nconst fs = require('fs')\r\n\r\n// 2. 调用 fs.readFile() 方法读取文件\r\n//    参数1：读取文件的存放路径\r\n//    参数2：读取文件时候采用的编码格式，一般默认指定 utf8\r\n//    参数3：回调函数，拿到读取失败和成功的结果  err  dataStr\r\nfs.readFile('./files/11.txt', 'utf8', function(err, dataStr) {\r\n  // 2.1 打印失败的结果\r\n  // 如果读取成功，则 err 的值为 null\r\n  // 如果读取失败，则 err 的值为 错误对象，dataStr 的值为 undefined\r\n  console.log(err)\r\n  console.log('-------')\r\n  // 2.2 打印成功的结果\r\n  console.log(dataStr)\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 1. 导入 fs 模块，来操作文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2. 调用 fs.readFile() 方法读取文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数1：读取文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数2：读取文件时候采用的编码格式，一般默认指定 utf8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数3：回调函数，拿到读取失败和成功的结果  err  dataStr\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'./files/11.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'utf8'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2.1 打印失败的结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 如果读取成功，则 err 的值为 null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 如果读取失败，则 err 的值为 错误对象，dataStr 的值为 undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'-------'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2.2 打印成功的结果\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_02判断文件是否读取成功"},"children":[{"type":"text","value":"02.判断文件是否读取成功"}]},{"type":"element","tag":"code","props":{"code":"const fs = require('fs')\r\n\r\nfs.readFile('./files/11.txt', 'utf8', function(err, dataStr) {\r\n  if (err) {\r\n    return console.log('读取文件失败！' + err.message)\r\n  }\r\n  console.log('读取文件成功！' + dataStr)\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'./files/11.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'utf8'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'读取文件失败！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'读取文件成功！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_03写入文件内容"},"children":[{"type":"text","value":"03.写入文件内容"}]},{"type":"element","tag":"code","props":{"code":"// 1. 导入 fs 文件系统模块\r\nconst fs = require('fs')\r\n\r\n// 2. 调用 fs.writeFile() 方法，写入文件的内容\r\n//    参数1：表示文件的存放路径\r\n//    参数2：表示要写入的内容\r\n//    参数3：回调函数\r\nfs.writeFile('./files/3.txt', 'ok123', function(err) {\r\n  // 2.1 如果文件写入成功，则 err 的值等于 null\r\n  // 2.2 如果文件写入失败，则 err 的值等于一个 错误对象\r\n  // console.log(err)\r\n\r\n  if (err) {\r\n    return console.log('文件写入失败！' + err.message)\r\n  }\r\n  console.log('文件写入成功！')\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 1. 导入 fs 文件系统模块\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2. 调用 fs.writeFile() 方法，写入文件的内容\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数1：表示文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数2：表示要写入的内容\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"//    参数3：回调函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".writeFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'./files/3.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'ok123'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2.1 如果文件写入成功，则 err 的值等于 null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2.2 如果文件写入失败，则 err 的值等于一个 错误对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// console.log(err)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'文件写入失败！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'文件写入成功！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_04整理成绩"},"children":[{"type":"text","value":"04.整理成绩"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把小红=99 小白=100 小黄=70 小黑=66 小绿=88这种格式整理成键值对的形式，"}]},{"type":"element","tag":"code","props":{"code":"// 1. 导入 fs 模块\r\nconst fs = require('fs')\r\n\r\n// 2. 调用 fs.readFile() 读取文件的内容\r\nfs.readFile('../素材/成绩.txt', 'utf8', function(err, dataStr) {\r\n  // 3. 判断是否读取成功\r\n  if (err) {\r\n    return console.log('读取文件失败！' + err.message)\r\n  }\r\n  // console.log('读取文件成功！' + dataStr)\r\n\r\n  // 4.1 先把成绩的数据，按照空格进行分割\r\n  const arrOld = dataStr.split(' ')\r\n  // 4.2 循环分割后的数组，对每一项数据，进行字符串的替换操作\r\n  const arrNew = []\r\n  arrOld.forEach(item => {\r\n    arrNew.push(item.replace('=', '：'))\r\n  })\r\n  // 4.3 把新数组中的每一项，进行合并，得到一个新的字符串\r\n  const newStr = arrNew.join('\\r\\n')\r\n\r\n  // 5. 调用 fs.writeFile() 方法，把处理完毕的成绩，写入到新文件中\r\n  fs.writeFile('./files/成绩-ok.txt', newStr, function(err) {\r\n    if (err) {\r\n      return console.log('写入文件失败！' + err.message)\r\n    }\r\n    console.log('成绩写入成功！')\r\n  })\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 1. 导入 fs 模块\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 2. 调用 fs.readFile() 读取文件的内容\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'../素材/成绩.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'utf8'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 3. 判断是否读取成功\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'读取文件失败！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// console.log('读取文件成功！' + dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 4.1 先把成绩的数据，按照空格进行分割\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" arrOld = dataStr."}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"' '"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 4.2 循环分割后的数组，对每一项数据，进行字符串的替换操作\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" arrNew = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  arrOld"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(item => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    arrNew"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".push"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(item"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".replace"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'='"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'：'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 4.3 把新数组中的每一项，进行合并，得到一个新的字符串\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" newStr = arrNew."}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":"\\r\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 5. 调用 fs.writeFile() 方法，把处理完毕的成绩，写入到新文件中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".writeFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'./files/成绩-ok.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", newStr, "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'写入文件失败！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'成绩写入成功！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_05演示路径的问题"},"children":[{"type":"text","value":"05.演示路径的问题"}]},{"type":"element","tag":"code","props":{"code":"const fs = require('fs')\r\n\r\n// 出现路径拼接错误的问题，是因为提供了 ./ 或 ../ 开头的相对路径\r\n// 如果要解决这个问题，可以直接提供一个完整的文件存放路径就行\r\n/* fs.readFile('./files/1.txt', 'utf8', function(err, dataStr) {\r\n  if (err) {\r\n    return console.log('读取文件失败！' + err.message)\r\n  }\r\n  console.log('读取文件成功！' + dataStr)\r\n}) */\r\n\r\n// 移植性非常差、不利于维护\r\n/* fs.readFile('C:\\\\Users\\\\escook\\\\Desktop\\\\Node.js基础\\\\day1\\\\code\\\\files\\\\1.txt', 'utf8', function(err, dataStr) {\r\n  if (err) {\r\n    return console.log('读取文件失败！' + err.message)\r\n  }\r\n  console.log('读取文件成功！' + dataStr)\r\n}) */\r\n\r\n// __dirname 表示当前文件所处的目录\r\n// console.log(__dirname)\r\n\r\nfs.readFile(__dirname + '/files/1.txt', 'utf8', function(err, dataStr) {\r\n  if (err) {\r\n    return console.log('读取文件失败！' + err.message)\r\n  }\r\n  console.log('读取文件成功！' + dataStr)\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 出现路径拼接错误的问题，是因为提供了 ./ 或 ../ 开头的相对路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 如果要解决这个问题，可以直接提供一个完整的文件存放路径就行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"/* fs.readFile('./files/1.txt', 'utf8', function(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  if (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"    return console.log('读取文件失败！' + err.message)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  console.log('读取文件成功！' + dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"}) */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 移植性非常差、不利于维护\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"/* fs.readFile('C:\\\\Users\\\\escook\\\\Desktop\\\\Node.js基础\\\\day1\\\\code\\\\files\\\\1.txt', 'utf8', function(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  if (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"    return console.log('读取文件失败！' + err.message)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"  console.log('读取文件成功！' + dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"}) */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// __dirname 表示当前文件所处的目录\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// console.log(__dirname)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(__dirname + "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'/files/1.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'utf8'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'读取文件失败！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'读取文件成功！'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" + dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_06pathjoin方法的使用"},"children":[{"type":"text","value":"06.path.join方法的使用"}]},{"type":"element","tag":"code","props":{"code":"const path = require('path')\r\nconst fs = require('fs')\r\n\r\n// 注意：  ../ 会抵消前面的路径\r\n// const pathStr = path.join('/a', '/b/c', '../../', './d', 'e')\r\n// console.log(pathStr)  // \\a\\b\\d\\e\r\n\r\n// fs.readFile(__dirname + '/files/1.txt')\r\n\r\nfs.readFile(path.join(__dirname, './files/1.txt'), 'utf8', function(err, dataStr) {\r\n  if (err) {\r\n    return console.log(err.message)\r\n  }\r\n  console.log(dataStr)\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const "}]},{"type":"element","tag":"span","props":{"class":"ct-009c1d"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'path'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fs = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 注意：  ../ 会抵消前面的路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// const pathStr = path.join('/a', '/b/c', '../../', './d', 'e')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// console.log(pathStr)  // \\a\\b\\d\\e\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// fs.readFile(__dirname + '/files/1.txt')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-009c1d"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".join"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(__dirname, "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'./files/1.txt'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'utf8'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err, dataStr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" (err) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b4080f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(err"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".message"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(dataStr)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_07pathbasename方法的使用"},"children":[{"type":"text","value":"07.path.basename方法的使用"}]},{"type":"element","tag":"code","props":{"code":"const path = require('path')\r\n\r\n// 定义文件的存放路径\r\nconst fpath = '/a/b/c/index.html'\r\n\r\n// const fullName = path.basename(fpath)\r\n// console.log(fullName)\r\n\r\nconst nameWithoutExt = path.basename(fpath, '.html')\r\nconsole.log(nameWithoutExt)\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const "}]},{"type":"element","tag":"span","props":{"class":"ct-009c1d"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-3a39ea"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'path'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// 定义文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const fpath = "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'/a/b/c/index.html'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// const fullName = path.basename(fpath)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4d540"},"children":[{"type":"text","value":"// console.log(fullName)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"const nameWithoutExt = "}]},{"type":"element","tag":"span","props":{"class":"ct-009c1d"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".basename"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(fpath, "}]},{"type":"element","tag":"span","props":{"class":"ct-7cbc7b"},"children":[{"type":"text","value":"'.html'"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3c71b2"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-f33cd8"},"children":[{"type":"text","value":"(nameWithoutExt)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过第一天对node.js的学习，感觉相对还是比较简单的，因为很多地方都和js相同，只是需要对es6相对熟练理解。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-009c1d{color:#569CD6}\n.ct-b4080f{color:#C586C0}\n.ct-3c71b2{color:#D7BA7D}\n.ct-7cbc7b{color:#CE9178}\n.ct-3a39ea{color:#DCDCAA}\n.ct-f33cd8{color:#D4D4D4}\n.ct-e4d540{color:#6A9955}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_01使用readfile方法读取文件的内容","depth":2,"text":"01.使用readFile方法读取文件的内容"},{"id":"_02判断文件是否读取成功","depth":2,"text":"02.判断文件是否读取成功"},{"id":"_03写入文件内容","depth":2,"text":"03.写入文件内容"},{"id":"_04整理成绩","depth":2,"text":"04.整理成绩"},{"id":"_05演示路径的问题","depth":2,"text":"05.演示路径的问题"},{"id":"_06pathjoin方法的使用","depth":2,"text":"06.path.join方法的使用"},{"id":"_07pathbasename方法的使用","depth":2,"text":"07.path.basename方法的使用"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:2022-05-01-node.js学习day01.md","_source":"content","_file":"articles/2022-05-01-node.js学习day01.md","_extension":"md"},{"_path":"/articles/2022-06-01-copy","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"小程序云开发学习","description":"本篇博客主要是对 小程序如何用云数据库增删改查","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 小程序如何用云数据库增删改查"}]}]},"date":"2022-06-01T00:00:00.000Z","tags":["node.js","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对 小程序如何用云数据库增删改查"}]},{"type":"element","tag":"h2","props":{"id":"_01背景"},"children":[{"type":"text","value":"01.背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.无需搭建服务器，快速构建小程序、公众号\r\n2.免登录、免鉴权调用微信开放服务\r\n● 云开发可以通过云函数直接调用微信开放api，免去了登录、鉴权等一些列复杂的前置操作，这一步大大的降低了开发的成本\r\n3.云存储\r\n● 云开发提供了一块存储空间，提供了上传文件到云端、带权限管理的云端下载能力，前端开发可以在小程序端和云函数端通过 API 使用云存储功能。也就是说文件存储这一块功能可以由前端独自完成，只需将云存储返回的fileId传给后端写入到数据库即可。"}]},{"type":"element","tag":"h2","props":{"id":"_02配置云环境"},"children":[{"type":"text","value":"02配置云环境"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.在小程序端开始使用云能力前，需要调用wx.cloud.init方法对云能力进行初始化"}]},{"type":"element","tag":"code","props":{"code":"// app.js\r\nApp({\r\n    onLaunch() {\r\n        wx.cloud.init({\r\n            env: \"hlc-utga0\"\r\n        })\r\n        this.getOpenid();\r\n    },\r\n\r\n    globalData: {\r\n        userInfo: {\r\n            openid: wx.getStorage({\r\n                key: 'openid'\r\n            })\r\n        }\r\n    }\r\n})\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// app.js\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"App"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"onLaunch"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        wx.cloud."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            env: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"hlc-utga0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getOpenid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    globalData: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        userInfo: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            openid: wx."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getStorage"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                key: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'openid'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字段env表示自己在与云数据库中的环境ID."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2.在跟目录中创建云函数目录的文件夹"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2022-06-01.png","title":"2022-06-01.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"3.在project.config.json文件中指定云函数的目录"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2022-06-01-pic2.png","title":"2022-06-01-pic2.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"_03添加数据"},"children":[{"type":"text","value":"03添加数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2022-06-01-pic3.png","title":"2022-06-01-pic3.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下是wxss,wxml"}]},{"type":"element","tag":"code","props":{"code":"/* pages/add/add.wxss */\r\n\r\n\r\n.chooseimg {\r\n    border-bottom: 15rpx solid #beb8b8;\r\n    padding: 15rpx;\r\n}\r\n\r\n.choose-tit {\r\n    display: block;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    color: #1a1a1a;\r\n}\r\n\r\n.tip {\r\n    font-size: 28rpx;\r\n    color: #beb8b8;\r\n    font-weight: 400;\r\n}\r\n\r\n.choose-box {\r\n    display: inline-block;\r\n    max-width: 200rpx;\r\n    text-align: center;\r\n    background: #f7f3f3;\r\n    padding: 20rpx 0;\r\n    margin: 20rpx 0;\r\n}\r\n\r\n.choose-box image {\r\n    width: 64rpx;\r\n    height: 64rpx;\r\n}\r\n\r\n.choose-box text {\r\n    display: block;\r\n    font-size: 32rpx;\r\n    color: #beb8b8;\r\n}\r\n\r\n.infobox {\r\n    padding: 30rpx 15rpx;\r\n}\r\n\r\n.ipttxt {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    color: #beb8b8;\r\n    font-size: 32rpx;\r\n    margin: 30rpx 0;\r\n}\r\n\r\ninput {\r\n    display: inline-block;\r\n    text-align: right;\r\n    vertical-align: middle;\r\n}\r\n\r\ninput::placeholder {\r\n    color: #beb8b8;\r\n}\r\n\r\n.upload {\r\n    width: 500rpx;\r\n    height: 80rpx;\r\n    margin: auto;\r\n    text-align: center;\r\n    background: rgb(155, 156, 154);\r\n    border-radius: 20rpx;\r\n    color: #f7f3f3;\r\n    line-height: 80rpx;\r\n}\r\n\r\n.preview {\r\n    display: inline-block;\r\n    margin: 20rpx 20rpx 20rpx 0;\r\n}\r\n\r\n.preview image {\r\n    width: 200rpx;\r\n    height: 200rpx;\r\n}\r\n\r\n.cover {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    height: 100rpx;\r\n    line-height: 100rpx;\r\n}\r\n\r\n.cover image {\r\n    width: 50rpx;\r\n    height: 50rpx;\r\n    vertical-align: middle;\r\n}\r\n\r\n.cover input {\r\n    width: 60rpx;\r\n}\r\n\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"/* pages/add/add.wxss */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".chooseimg"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"border-bottom"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#beb8b8"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".choose-tit"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"block"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"32"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-weight"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"bold"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#1a1a1a"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".tip"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"28"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#beb8b8"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-weight"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"400"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".choose-box"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"max-width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"background"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#f7f3f3"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".choose-box"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"64"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"64"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".choose-box"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"block"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"32"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#beb8b8"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".infobox"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"padding"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".ipttxt"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"justify-content"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"space-between"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#beb8b8"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"font-size"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"32"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"30"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"right"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"vertical-align"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"middle"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"::placeholder {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#beb8b8"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".upload"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"text-align"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"background"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"rgb"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"155"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"156"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"154"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"border-radius"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"#f7f3f3"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".preview"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".preview"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"justify-content"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"space-between"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"line-height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"vertical-align"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"middle"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"60"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"rpx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[]}]}]}]},{"type":"element","tag":"code","props":{"code":"<view class=\"container\">\r\n    <view class=\"chooseimg\">\r\n        <text class=\"choose-tit\">上传曲谱 <text class=\"tip\">(至多9张)</text></text>\r\n        <view class=\"preview\" wx:for=\"{{imgList}}\" wx:key=\"item\">\r\n            <image src=\"{{item}}\" mode=\"aspectFit\"></image>\r\n        </view>\r\n        <view class=\"choose-box\" bindtap=\"chooseImage\">\r\n            <image src=\"/images/icons/up-icon.png\"></image>\r\n            <text>添加新图片</text>\r\n        </view>\r\n    </view>\r\n    <view class=\"infobox\">\r\n        <view class=\"ipttxt\">\r\n            <text>曲谱名称</text> <input type=\"text\" bindinput=\"getname\" placeholder=\"必填 请输入\" />\r\n        </view>\r\n        <view class=\"ipttxt\">\r\n            <text>乐器</text> <input type=\"text\" bindinput=\"getmusical\" placeholder=\"必填 请输入\" />\r\n        </view>\r\n        <view class=\"ipttxt cover\">\r\n            <text>封面</text>\r\n            <view>\r\n                <image src=\"{{coverurl}}\"></image> <input type=\"text\" placeholder=\"选填\" bindtap=\"upcoverimg\" />\r\n            </view>\r\n        </view>\r\n        <view class=\"ipttxt\">\r\n            <text>作者</text> <input type=\"text\" bindinput=\"getauth\" placeholder=\"选填\" />\r\n        </view>\r\n        <view class=\"ipttxt\">\r\n            <text>曲谱类型</text> <input type=\"text\" bindinput=\"gettype\" placeholder=\"选填\" />\r\n        </view>\r\n    </view>\r\n    <view class=\"upload\" bindtap=\"upinfo\">上传</view>\r\n</view>\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"container\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"chooseimg\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"choose-tit\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">上传曲谱 <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"tip\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">(至多9张)</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"preview\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" wx:"}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"{{imgList}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" wx:key="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"item\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" src="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"{{item}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" mode="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"aspectFit\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"choose-box\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindtap="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"chooseImage\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" src="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"/images/icons/up-icon.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">添加新图片</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"infobox\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"ipttxt\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">曲谱名称</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"> <"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindinput="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"getname\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"必填 请输入\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"ipttxt\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">乐器</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"> <"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindinput="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"getmusical\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"必填 请输入\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"ipttxt cover\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">封面</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" src="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"{{coverurl}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"> <"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"选填\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindtap="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"upcoverimg\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"ipttxt\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">作者</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"> <"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindinput="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"getauth\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"选填\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"ipttxt\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">曲谱类型</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"> <"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" type="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindinput="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"gettype\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" placeholder="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"选填\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"upload\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" bindtap="}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"\"upinfo\""}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">上传</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-048ca0"},"children":[{"type":"text","value":"view"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"接下来就是js逻辑"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.首先需要在云数据库中创建保存数据的集合"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"enter description here","src":"./images/2022-06-01-pic4.png","title":"2022-06-01-pic4.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中的_id是自动生成的，_openid是当前用户的唯一标识，后续可以通过查询_openid来写当前用户自己创建的文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.接下来可以通过页面Js关联云数据库中的集合，也可以通过云函数去关联，我是直接用当前页面的js"}]},{"type":"element","tag":"code","props":{"code":"// pages/add/add.js\r\nPage({\r\n\r\n    /**\r\n     * 页面的初始数据\r\n     */\r\n    data: {\r\n        imgList: [],\r\n        coverurl: '',\r\n        info: {\r\n            openid: '',\r\n            name: '',\r\n            musical: '',\r\n            auth: '',\r\n            type: '',\r\n            cover: [],\r\n            urlList: [],\r\n        },\r\n    },\r\n\r\n    /**\r\n     * 生命周期函数--监听页面加载\r\n     */\r\n    onLoad(options) {\r\n\r\n    },\r\n    // 选择图片封装\r\n    chooseImageFunction(num, localurl, dataurl) {\r\n        let that = this;\r\n        wx.chooseImage({\r\n            count: num,\r\n            sizeType: ['original', 'compressed'],\r\n            sourceType: ['album', 'camera'],\r\n            success: res => {\r\n                wx.showLoading({\r\n                    title: '上传中',\r\n                })\r\n                setTimeout(function () {\r\n                    wx.hideLoading()\r\n                }, 2000)\r\n                //    让选择图片展示在页面上，方便用户预览\r\n                // tempFilePath可以作为 img 标签的 src 属性显示图片\r\n                const tempFilePaths = res.tempFilePaths;\r\n                this.setData({\r\n                    [localurl]: tempFilePaths\r\n                })\r\n                for (let i = 0; i < tempFilePaths.length; i++) {\r\n                    let imgurl = tempFilePaths[i];\r\n                    // 指定云数据库中的文件夹以及文件名\r\n                    const cloudPath = 'guitar/' + new Date().getTime() + '_' + Math.floor(Math.random() * 1000) + tempFilePaths[i].match(/\\.[^.]+?$/)\r\n                    that.uploadimg(imgurl, cloudPath, dataurl)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    // 上传图片函数\r\n    uploadimg(filePath, cloudPath, dataurl) {\r\n        wx.cloud.uploadFile({\r\n            cloudPath, // 上传至云端的路径\r\n            filePath, // 小程序临时文件路径\r\n            success: res => {\r\n                wx.showToast({\r\n                    title: '上传成功',\r\n                })\r\n                // 获取云存储中的图片地址\r\n                dataurl.push(res.fileID);\r\n            },\r\n            fail: console.error\r\n        })\r\n    },\r\n    // 上传曲谱\r\n    chooseImage() {\r\n        this.chooseImageFunction(9, 'imgList', this.data.info.urlList)\r\n    },\r\n    // 上传封面\r\n    upcoverimg() {\r\n        this.chooseImageFunction(1, 'coverurl', this.data.info.cover)\r\n    },\r\n    // \r\n    // 获取输入框的值\r\n    getname(event) {\r\n        this.data.info.name = event.detail.value\r\n    },\r\n    getmusical(event) {\r\n        this.data.info.musical = event.detail.value\r\n    },\r\n    getauth(event) {\r\n        this.data.info.auth = event.detail.value\r\n    },\r\n    gettype(event) {\r\n        this.data.info.type = event.detail.value\r\n    },\r\n\r\n    upinfo() {\r\n        if (this.data.info.name != '' && this.data.info.musical != '') {\r\n            const info = this.data.info\r\n            wx.cloud.database().collection('Pedigree').add({\r\n                data: {\r\n                    auth: info.auth,\r\n                    name: info.name,\r\n                    cover: info.cover,\r\n                    type: info.type,\r\n                    imgList: info.urlList\r\n                }\r\n            }).then(res => {\r\n                wx.showToast({\r\n                    title: '添加成功',\r\n                })\r\n            }).catch(err => {\r\n                wx.showToast({\r\n                    title: '添加失败',\r\n                })\r\n            })\r\n        } else {\r\n            wx.showToast({\r\n                title: '请填写必填项',\r\n            })\r\n        }\r\n    },\r\n})\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// pages/add/add.js\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"Page"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"/**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"     * 页面的初始数据\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"     */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    data: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        imgList: [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        coverurl: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        info: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            openid: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            name: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            musical: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            auth: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            type: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            urlList: [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"/**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"     * 生命周期函数--监听页面加载\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"     */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"onLoad"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(options) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 选择图片封装\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"chooseImageFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(num, localurl, dataurl) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        let that = this;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        wx."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"chooseImage"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            count: num,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            sizeType: ["}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'original'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'compressed'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            sourceType: ["}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'album'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'camera'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            success: res => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                wx."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"showLoading"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    title: "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'上传中'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(function () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    wx."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"hideLoading"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                }, "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"//    让选择图片展示在页面上，方便用户预览\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// tempFilePath可以作为 img 标签的 src 属性显示图片\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                const tempFilePaths = res.tempFilePaths;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                this."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"setData"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    [localurl]: tempFilePaths\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":" for"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" (let i = "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"; i < tempFilePaths.length; i++) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" imgurl = tempFilePaths[i];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 指定云数据库中的文件夹以及文件名\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" cloudPath = "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'guitar/'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" + new "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"Date"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getTime"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() + "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'_'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" + Math."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"floor"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(Math."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"random"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() * "}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":") + tempFilePaths[i]."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"match"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(/"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"[^.]+?$/)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    that"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".uploadimg"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(imgurl, cloudPath, dataurl)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 上传图片函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"uploadimg"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(filePath, cloudPath, dataurl) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cloud.uploadFile"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            cloudPath, "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 上传至云端的路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            filePath, "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 小程序临时文件路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": res => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".showToast"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'上传成功'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 获取云存储中的图片地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                dataurl"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".push"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(res"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".fileID"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"fail"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": console.error\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 上传曲谱\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"chooseImage"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".chooseImageFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'imgList'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.urlList"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 上传封面\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"upcoverimg"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".chooseImageFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-35bca3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'coverurl'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 获取输入框的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getname"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(event) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.name"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = event"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".detail.value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getmusical"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(event) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.musical"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = event"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".detail.value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getauth"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(event) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.auth"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = event"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".detail.value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"gettype"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(event) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.type"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = event"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".detail.value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"upinfo"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" (this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.name"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" != "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" && this"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".data.info.musical"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" != "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" info = this.data.info\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cloud.database"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".collection"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'Pedigree'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".add"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": info.auth,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": info.name,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": info."}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"cover"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": info.type,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"imgList"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": info.urlList\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            })"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".then"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(res => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".showToast"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'添加成功'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            })"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".catch"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(err => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".showToast"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'添加失败'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        }"}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":" else"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".showToast"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":116},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'请填写必填项'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":117},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":118},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":119},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":120},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中的字段cover代表的是封面，urlList表示上传的谱子图，集合中本身没有保存图片，只是保存了在云存储中的fileId, 也就是在云存储中的图片地址。这样就简单实现了如何向云数据库中添加数据"}]},{"type":"element","tag":"h2","props":{"id":"_04获取数据"},"children":[{"type":"text","value":"04获取数据"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"获取云数据库中的数据，直接通过新建云函数，比如在云函数目录中新建getOpenid云函数,就可以获取到当前用户的唯一标识"}]},{"type":"element","tag":"code","props":{"code":"// 云函数入口文件\r\nconst cloud = require('wx-server-sdk')\r\n\r\ncloud.init()\r\n\r\n// 云函数入口函数\r\nexports.main = async (event, context) => {\r\n    const wxContext = cloud.getWXContext()\r\n\r\n    return {\r\n        event,\r\n        openid: wxContext.OPENID,\r\n        appid: wxContext.APPID,\r\n        unionid: wxContext.UNIONID,\r\n    }\r\n}\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 云函数入口文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"const cloud = "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'wx-server-sdk'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"cloud"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".init"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 云函数入口函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".main"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = async (event, context) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" wxContext = cloud."}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getWXContext"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        event,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"openid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": wxContext.OPENID,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"appid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": wxContext.APPID,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"unionid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": wxContext.UNIONID,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后在app.js中调用该云函数并且保存在本地，这样我们就可以通过openid去筛选当前用户自己上传的数据"}]},{"type":"element","tag":"code","props":{"code":"    // 获取openid\r\n    getOpenid() {\r\n        wx.cloud.callFunction({\r\n            name: 'getOpenId',\r\n            success(res) {\r\n                wx.setStorageSync('openid', res.result.openid)\r\n            },\r\n            fail(res) {\r\n                console.log(res);\r\n            }\r\n        })\r\n    },\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 获取openid\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"getOpenid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".cloud.callFunction"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-0f3aad"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'getOpenId'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(res) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                wx"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".setStorageSync"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'openid'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":", res"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".result.openid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"fail"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(res) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"                console"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"(res);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    },"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比如我们希望去获取Pedigree集合中的数据"}]},{"type":"element","tag":"code","props":{"code":"// 云函数入口文件\r\nconst cloud = require('wx-server-sdk')\r\n\r\ncloud.init()\r\n\r\nconst db = cloud.database()\r\n// 云函数入口函数\r\nexports.main = async (event, context) => {\r\n    // 只获取当前自己用户的\r\n    return await db.collection('Pedigree').where({\r\n        _openid: event._openid\r\n    }).get()\r\n}\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 云函数入口文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"const cloud = "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'wx-server-sdk'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"cloud"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".init"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"const db = cloud"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".database"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 云函数入口函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".main"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" = async (event, context) => {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7595e5"},"children":[{"type":"text","value":"// 只获取当前自己用户的\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-df034d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":" await db"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".collection"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-73608a"},"children":[{"type":"text","value":"'Pedigree'"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".where"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f79935"},"children":[{"type":"text","value":"_openid"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":": event._openid\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"class":"ct-a87ddc"},"children":[{"type":"text","value":".get"}]},{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-820ac2"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后通过页面去调用该云函数，即刻获取数据"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-df034d{color:#C586C0}\n.ct-048ca0{color:#569CD6}\n.ct-35bca3{color:#B5CEA8}\n.ct-0f3aad{color:#9CDCFE}\n.ct-a87ddc{color:#D7BA7D}\n.ct-73608a{color:#CE9178}\n.ct-820ac2{color:#D4D4D4}\n.ct-f79935{color:#DCDCAA}\n.ct-7595e5{color:#6A9955}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_01背景","depth":2,"text":"01.背景"},{"id":"_02配置云环境","depth":2,"text":"02配置云环境"},{"id":"_03添加数据","depth":2,"text":"03添加数据"},{"id":"_04获取数据","depth":2,"text":"04获取数据"}]}},"_type":"markdown","_id":"content:articles:2022-06-01-小程序云开发学习 copy.md","_source":"content","_file":"articles/2022-06-01-小程序云开发学习 copy.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"网站公共方法整合以及说明","description":"","date":"2023-11-01T00:00:00.000Z","tags":["公共JS"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"插件类"},"children":[{"type":"text","value":"插件类"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"主要是将目前站点上一些使用频率较高的插件进行再次的一个整合优化，同时也能在需要使用的时候快速找到对应的代码。具体如下："}]},{"type":"element","tag":"h3","props":{"id":"倒计时"},"children":[{"type":"text","value":"倒计时"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"说明："}]},{"type":"text","value":" 因为页面上的倒计时可能同时引入多种形式，类如图片或者数字，以往是需要同时需要引入两个倒计时插件（一个数字倒计时，一个图片倒计时），现在将两种形式整合，只需要引入一个插件，然后通过传递useImg参数来决定是采用图片形式还是数字形式，或者两种同时在页面中使用，具体方法如下所示："}]},{"type":"element","tag":"iframe","props":{"height":600,"style":"width: 100%;","scrolling":"no","title":"Untitled","src":"https://codepen.io/dorr-hlc/embed/vYbWgdZ?default-tab=js%2Cresult","frameBorder":"no","loading":"lazy","allowTransparency":"true","allowFullScreen":"true"},"children":[{"type":"text","value":"\n  See the Pen <a href=\"https://codepen.io/dorr-hlc/pen/vYbWgdZ\">\n  Untitled</a> by Dorr-hlc (<a href=\"https://codepen.io/dorr-hlc\">@dorr-hlc</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.\n"}]},{"type":"element","tag":"h3","props":{"id":"轮播插件"},"children":[{"type":"text","value":"轮播插件"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"插件类","depth":2,"text":"插件类","children":[{"id":"倒计时","depth":3,"text":"倒计时"},{"id":"轮播插件","depth":3,"text":"轮播插件"}]}]}},"_type":"markdown","_id":"content:articles:封装.md","_source":"content","_file":"articles/封装.md","_extension":"md"},{"_path":"/articles/html","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"关于html模板引擎的尝试","description":"前端模板引擎是一种用于在前端开发中生成动态HTML内容的工具。它们允许开发人员通过在模板中插入变量、表达式和控制结构来创建可重用的、动态的页面内容。模板引擎可以帮助开发人员将数据和UI分离，使得前端代码更易于维护和扩展。","date":"2023-08-03T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前端模板引擎是一种用于在前端开发中生成动态HTML内容的工具。它们允许开发人员通过在模板中插入变量、表达式和控制结构来创建可重用的、动态的页面内容。模板引擎可以帮助开发人员将数据和UI分离，使得前端代码更易于维护和扩展。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以下是一些常见的前端模板引擎："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Mustache.js"}]},{"type":"text","value":" : Mustache 是一个简单、无逻辑的模板引擎，支持多种编程语言。它使用双大括号 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{}}"}]},{"type":"text","value":" 来包裹变量，并且可以嵌套在HTML中。Mustache 的设计哲学是尽量简洁，只关注变量的替换。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Handlebars.js"}]},{"type":"text","value":" : Handlebars 是在 Mustache 基础上扩展而来的模板引擎。它支持更多的控制结构，例如条件语句和循环。Handlebars 使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{}}"}]},{"type":"text","value":" 包裹变量，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{#if}}"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{#each}}"}]},{"type":"text","value":" 等标签来实现逻辑控制。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"EJS (Embedded JavaScript)"}]},{"type":"text","value":" : EJS 允许在模板中嵌入 JavaScript 代码。它使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<% %>"}]},{"type":"text","value":" 标签来包裹 JavaScript 代码，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<%= %>"}]},{"type":"text","value":" 输出变量的值。EJS 可以更灵活地处理复杂的逻辑和交互。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pug (formerly Jade)"}]},{"type":"text","value":" : Pug 是一种基于缩进的模板语言，它使用缩进和特定的标记来表示HTML结构和逻辑。Pug 的语法非常紧凑，适用于需要简洁代码的项目。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Vue.js Templates"}]},{"type":"text","value":" : Vue.js 是一个流行的前端框架，它内置了一种基于HTML的模板语法。Vue 的模板语法允许你将数据和DOM绑定起来，并实现动态更新。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"React JSX"}]},{"type":"text","value":" : 虽然不是严格意义上的模板引擎，但 React 使用 JSX 语法来描述UI组件。JSX 允许开发人员在JavaScript中编写类似HTML的代码，然后通过编译转换为真实的JavaScript代码。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"针对公司情况，我尝试了两种模板引擎的使用，一种活动页面是基于JSRENDER的轻量级的 JavaScript 模板引擎，直接在页面中引入js,通过在模板中定义变量，通过Js去加载不同的模板数据，在浏览器中渲染；一种是通过Mustache.js+gulp实现在本地就实现模板引擎的转换，直接生成对应的html文件，这种形式可能适合于批量改版的时候。具体如下："}]},{"type":"element","tag":"h2","props":{"id":"第一种jsrenderjquery"},"children":[{"type":"text","value":"第一种：JSRENDER+JQUERY"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"template.js"}]},{"type":"element","tag":"code","props":{"code":"// template.js\r\n__pubTem = {\r\n  tdkTemplate: function () {\r\n    var template = `\r\n            <title>{{title}}</title>\r\n            <meta name=\"description\" content=\"{{description}}\">\r\n            <meta name=\"keywords\" content=\"{{keywords}}\">\r\n          `;\r\n    return template;\r\n  },\r\n \n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd93f4"},"children":[{"type":"text","value":"// template.js\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"__pubTem"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"tdkTemplate"}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"            <title>{{title}}</title>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"            <meta name=\"description\" content=\"{{description}}\">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"            <meta name=\"keywords\" content=\"{{keywords}}\">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"          `"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过js函数的形式，去对各个板块进行一个组件化，然后在public.js,去通过判断语言去加载不同的json文件，从而实现活动的维护更新"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"public.js"}]}]},{"type":"element","tag":"code","props":{"code":"let __pub = {\r\n  getLang: function () {\r\n    let langs = [\"fr\", \"jp\", \"de\", \"it\", \"pt\", \"es\", \"tw\", \"zh\", \"en\", \"ar\"];\r\n    let _lang = window.location.pathname.substring(1).split(\"/\")[0];\r\n    _lang.length > 2 &&\r\n      (_lang = window.location.pathname.substring(1).split(\"/\")[1]);\r\n    let lang = langs.indexOf(_lang) > -1 ? _lang : \"en\";\r\n    if (host === \"www.aomei.de\") {\r\n      lang = \"de\";\r\n    } else {\r\n      if (host === \"www.aomei.fr\") {\r\n        lang = \"fr\";\r\n      } else {\r\n        if (host === \"www.aomei.jp\") {\r\n          lang = \"jp\";\r\n        }\r\n      }\r\n    }\r\n    return lang;\r\n  },\r\n};\r\n$.get(\"text-en.json\", function (res) {\r\n  var tdkTm = __pubTem.tdkTemplate();\r\n  var html = $.templates(tdkTm).render(res.tdk);\r\n  $(\"head\").append(html);\r\n});\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"__pub"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"getLang"}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"langs"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"fr\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"jp\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"de\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"it\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"pt\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"es\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"tw\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"zh\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"ar\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"_lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"pathname"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"substring"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")["}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"_lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" > "}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" &&\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"_lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"pathname"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"substring"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")["}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"langs"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"indexOf"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"_lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":") > -"}]},{"type":"element","tag":"span","props":{"class":"ct-478ba3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" ? "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"_lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"www.aomei.de\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"de\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"www.aomei.fr\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"fr\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"www.aomei.jp\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"jp\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9ea6fa"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"text-en.json\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"tdkTm"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"__pubTem"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"tdkTemplate"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"templates"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"tdkTm"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"render"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"tdk"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"head\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-0e6153"},"children":[{"type":"text","value":"append"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"text-en.json"}]}]},{"type":"element","tag":"h2","props":{"id":"第二种gulpmustachejs"},"children":[{"type":"text","value":"第二种：GULP+Mustache.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个可以直接放置在项目中，支持热更新，每修改一次文件内容，都会直接输出最新的文件到指定的项目文件夹。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"大致操作如下，在gulp项目中创建一个src目录，src目录下创建一个data目录用于存放页面的渲染数据文件，再创建一个templates文件夹，用于存放页面的模板文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前提注意这两个目录的文件名以及文件层级需要保持一致，比如/templates/a.mustache,就是直接去找/data/a.js。最终会实时生成a.html放置到dist目录中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"举例"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"a.tem"}]},{"type":"element","tag":"code","props":{"code":"<!DOCTYPE html>\r\n<html lang=\"{{lang}}\">\r\n<body></body>\r\n\r\n</html>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<!"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"DOCTYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"{{lang}}\""}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"a.js"}]}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\r\n  lang: \"今天是周五\",\r\n};\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-db3e76"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-db3e76"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang:"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"今天是周五\""}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"a.html"}]},{"type":"element","tag":"code","props":{"code":"<!DOCTYPE html>\r\n<html lang=\"今天是周五\">\r\n<body></body>\r\n\r\n</html>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<!"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"DOCTYPE"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfacf6"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-578d82"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-507cbd"},"children":[{"type":"text","value":"\"今天是周五\""}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c624e1"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-81058e"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当涉及到前端模板引擎时，Mustache.js 和 jsRender 都是非常受欢迎的选择，它们在设计和用法上有一些区别。以下是 Mustache.js 和 jsRender 的区别以及它们的使用总结："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"区别："}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"语法和功能"}]},{"type":"text","value":" ："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mustache.js：采用非常简单的语法，主要关注数据的替换，不支持逻辑控制。语法使用双大括号 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{}}"}]},{"type":"text","value":" 包裹变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"jsRender：扩展了 Mustache.js 的功能，除了数据替换外，还支持逻辑控制、条件语句、循环等。语法也使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{...}}"}]},{"type":"text","value":"，但支持更多的功能。"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"逻辑控制"}]},{"type":"text","value":" ："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mustache.js：仅用于数据插入，不支持直接的逻辑控制，因此你需要在传入的数据中处理逻辑。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"jsRender：支持条件语句、循环等逻辑控制，能够更灵活地根据数据动态生成内容。"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"复杂性"}]},{"type":"text","value":" ："}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Mustache.js：设计简单，适用于那些只需要进行简单数据替换的场景。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"jsRender：更强大且复杂，适用于需要更多逻辑和控制的情况。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Mustache.js 使用："}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 HTML 中引入 Mustache.js 库文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义 Mustache 模板，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{{...}}"}]},{"type":"text","value":" 包裹需要插入的变量。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用数据对象填充模板并渲染。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-db3e76{color:#4EC9B0}\n.ct-81058e{color:#808080}\n.ct-478ba3{color:#B5CEA8}\n.ct-9ea6fa{color:#C586C0}\n.ct-507cbd{color:#CE9178}\n.ct-c624e1{color:#569CD6}\n.ct-0e6153{color:#DCDCAA}\n.ct-578d82{color:#D4D4D4}\n.ct-bfacf6{color:#9CDCFE}\n.ct-bd93f4{color:#6A9955}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"第一种jsrenderjquery","depth":2,"text":"第一种：JSRENDER+JQUERY"},{"id":"第二种gulpmustachejs","depth":2,"text":"第二种：GULP+Mustache.js"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:关于html模板引擎的尝试.md","_source":"content","_file":"articles/关于html模板引擎的尝试.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"脚本加载失败如何重试","description":"在html中经常会遇到加载js脚本失败的情况，这样就会导致我们可能无法实现正常的功能，因此我们需要去对加载失败的脚本进行重试，并且因为各个脚本存在相互依赖的关系,因此我们在去加载重试脚本的时候，需要注意下阻塞后面脚本的执行，待到重试成功之后再去执行后面的脚本内容。","date":"2023-07-03T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在html中经常会遇到加载js脚本失败的情况，这样就会导致我们可能无法实现正常的功能，因此我们需要去对加载失败的脚本进行重试，并且因为各个脚本存在相互依赖的关系,因此我们在去加载重试脚本的时候，需要注意下阻塞后面脚本的执行，待到重试成功之后再去执行后面的脚本内容。"}]},{"type":"element","tag":"h2","props":{"id":"方法"},"children":[{"type":"text","value":"方法"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"捕获加载失败事件：在页面中引入的JavaScript脚本可以通过添加 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"onerror"}]},{"type":"text","value":"事件来检测加载失败情况。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"替换不同的域名进行重试：在加载失败时，可以尝试使用备用域名来加载脚本。为此，你可以在脚本标签中使用备用域名，如下所示："}]}]},{"type":"element","tag":"code","props":{"code":"<script src=\"http://domain1.com/myscript.js\" onerror=\"retryLoadScript('http://domain2.com/myscript.js')\"></script>\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a9c8cf"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"\"http://domain1.com/myscript.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"onerror"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"\"retryLoadScript('http://domain2.com/myscript.js')\""}]},{"type":"element","tag":"span","props":{"class":"ct-a9c8cf"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a9c8cf"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里，当第一个域名（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"domain1.com"}]},{"type":"text","value":"）的脚本加载失败时，会调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"retryLoadScript()"}]},{"type":"text","value":"函数来重试加载备用域名（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"domain2.com"}]},{"type":"text","value":"）的脚本。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"阻塞后续脚本加载：在加载失败时，为阻塞后续脚本加载，你可以使用动态创建脚本的方式，并将它添加到页面中。这样，直到重试成功，后续脚本都不会被加载。例如，使用以下JavaScript代码："}]},{"type":"element","tag":"code","props":{"code":"<script>\r\n  // 定义要尝试的多个域名\r\n  var domainList = [\r\n    'http://domain1.com/myscript.js',\r\n    'http://domain2.com/myscript.js',\r\n    'http://domain3.com/myscript.js'\r\n  ];\r\n\r\n  // 当前正在尝试的域名索引\r\n  var currentDomainIndex = 0;\r\n\r\n  function loadScript() {\r\n    var script = document.createElement('script');\r\n    script.src = domainList[currentDomainIndex];\r\n    script.onload = function() {\r\n      console.log('脚本加载成功');\r\n      loadNextScript();\r\n    };\r\n    script.onerror = function() {\r\n      console.error('脚本加载失败');\r\n      loadNextScript();\r\n    };\r\n    document.head.appendChild(script);\r\n  }\r\n\r\n  function loadNextScript() {\r\n    // 尝试下一个域名\r\n    currentDomainIndex++;\r\n\r\n    // 如果所有域名都尝试过了，仍然加载失败，则继续执行后续脚本\r\n    if (currentDomainIndex >= domainList.length) {\r\n      console.warn('所有域名都加载失败');\r\n      continueLoadingOtherScripts();\r\n    } else {\r\n      loadScript();\r\n    }\r\n  }\r\n\r\n  function continueLoadingOtherScripts() {\r\n    // 继续加载后续脚本，可以根据需要添加更多脚本\r\n    var script2 = document.createElement('script');\r\n    script2.src = \"http://domain4.com/nextscript.js\";\r\n    document.head.appendChild(script2);\r\n  }\r\n\r\n  // 开始加载脚本\r\n  loadScript();\r\n</script>\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a9c8cf"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a9c8cf"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  // 定义要尝试的多个域名\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  var domainList = [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    'http://domain1.com/myscript.js',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    'http://domain2.com/myscript.js',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    'http://domain3.com/myscript.js'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  ];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  // 当前正在尝试的域名索引\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  var currentDomainIndex = 0;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  function loadScript() "}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"createElement"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"'script'"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"domainList"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"currentDomainIndex"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"onload"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"'脚本加载成功'"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"loadNextScript"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"onerror"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"'脚本加载失败'"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"loadNextScript"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"head"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"appendChild"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"  function loadNextScript() "}]},{"type":"element","tag":"span","props":{"class":"ct-7585ea"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-84d949"},"children":[{"type":"text","value":"// 尝试下一个域名\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"currentDomainIndex"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"++;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-84d949"},"children":[{"type":"text","value":"// 如果所有域名都尝试过了，仍然加载失败，则继续执行后续脚本\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29038f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"currentDomainIndex"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"domainList"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-bac2e2"},"children":[{"type":"text","value":"      console.warn("}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"'所有域名都加载失败'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"      continueLoadingOtherScripts();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    } else {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"      loadScript();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"  function continueLoadingOtherScripts() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-84d949"},"children":[{"type":"text","value":"// 继续加载后续脚本，可以根据需要添加更多脚本\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    var script2 = document.createElement("}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"'script'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    script2.src = "}]},{"type":"element","tag":"span","props":{"class":"ct-49379e"},"children":[{"type":"text","value":"\"http://domain4.com/nextscript.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"    document.head.appendChild(script2);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-84d949"},"children":[{"type":"text","value":"// 开始加载脚本\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"  loadScript();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b9486"},"children":[{"type":"text","value":"</script>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这段代码中，我们定义了一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"domainList"}]},{"type":"text","value":"数组，其中包含多个备用域名。然后，使用递归的方式来依次尝试加载脚本，直到所有域名都被尝试过或成功加载为止。如果所有备用域名都加载失败，将会调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"continueLoadingOtherScripts()"}]},{"type":"text","value":"函数来加载后续脚本。这样，即使所有备用域名都加载失败，你仍然能够继续执行后续的脚本加载。同时，如果其中一个域名加载成功，后续的备用域名加载尝试将会被终止，不会再加载额外的脚本。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义一个包含多个备用域名的数组 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"domainList"}]},{"type":"text","value":"，用于存储要尝试的域名列表。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个递归函数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loadScript()"}]},{"type":"text","value":"，该函数会尝试加载当前指定的域名，并在加载成功或失败时调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loadNextScript()"}]},{"type":"text","value":" 函数。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loadNextScript()"}]},{"type":"text","value":" 函数用于控制递归流程，尝试加载下一个域名，直到所有备用域名都尝试过为止。如果所有域名都加载失败，它将调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"continueLoadingOtherScripts()"}]},{"type":"text","value":" 函数来加载后续的脚本。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"continueLoadingOtherScripts()"}]},{"type":"text","value":" 函数负责加载后续的脚本，你可以根据需要添加更多脚本加载操作。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loadScript()"}]},{"type":"text","value":" 函数来开始加载第一个域名，然后整个重试加载的流程会自动进行。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过这样的实现，无论备用域名是否加载成功，你都能够保证后续脚本的加载不会受到影响，并且在所有备用域名都加载失败后，仍然可以继续执行后续的脚本加载。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-84d949{color:#6A9955}\n.ct-29038f{color:#DCDCAA}\n.ct-49379e{color:#CE9178}\n.ct-9b9486{color:#9CDCFE}\n.ct-bac2e2{color:#D4D4D4}\n.ct-7585ea{color:#569CD6}\n.ct-a9c8cf{color:#808080}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"方法","depth":2,"text":"方法"},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:脚本加载失败如何重试.md","_source":"content","_file":"articles/脚本加载失败如何重试.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"面向对象","description":"面向对象是程序中一个非常重要的思想，它被很多同学理解成了一个比较难，比较深奥的问题，其实不然。面向对象很简单，简而言之就是程序之中所有的操作都需要通过对象来完成。","date":"2021-12-18T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"面向对象"},"children":[{"type":"text","value":"面向对象"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"面向对象是程序中一个非常重要的思想，它被很多同学理解成了一个比较难，比较深奥的问题，其实不然。面向对象很简单，简而言之就是程序之中所有的操作都需要通过对象来完成。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"举例来说："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作浏览器要使用window对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作网页要使用document对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"操作控制台要使用console对象"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一切操作都要通过对象，也就是所谓的面向对象，那么对象到底是什么呢？这就要先说到程序是什么，计算机程序的本质就是对现实事物的抽象，抽象的反义词是具体，比如：照片是对一个具体的人的抽象，汽车模型是对具体汽车的抽象等等。程序也是对事物的抽象，在程序中我们可以表示一个人、一条狗、一把枪、一颗子弹等等所有的事物。一个事物到了程序中就变成了一个对象。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在程序中所有的对象都被分成了两个部分数据和功能，以人为例，人的姓名、性别、年龄、身高、体重等属于数据，人可以说话、走路、吃饭、睡觉这些属于人的功能。数据在对象中被成为属性，而功能就被称为方法。所以简而言之，在程序中一切皆是对象。"}]},{"type":"element","tag":"h2","props":{"id":"_1类class"},"children":[{"type":"text","value":"1、类（class）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要想面向对象，操作对象，首先便要拥有对象，那么下一个问题就是如何创建对象。要创建对象，必须要先定义类，所谓的类可以理解为对象的模型，程序中可以根据类创建指定类型的对象，举例来说：可以通过Person类来创建人的对象，通过Dog类创建狗的对象，通过Car类来创建汽车的对象，不同的类可以用来创建不同的对象。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义类："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class 类名 {\r\n    属性名: 类型;\r\n\r\n    constructor(参数: 类型){\r\n        this.属性名 = 参数;\r\n    }\r\n\r\n    方法名(){\r\n        ....\r\n    }\r\n\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"类名"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"属性名"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"类型"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"类型"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"属性名"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"方法名"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        ....\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Person{\r\n    name: string;\r\n    age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name;\r\n        this.age = age;\r\n    }\r\n\r\n    sayHello(){\r\n        console.log(`大家好，我是${this.name}`);\r\n    }\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`大家好，我是"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用类："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"const p = new Person('孙悟空', 18);\r\np.sayHello();\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"();"}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_2面向对象的特点"},"children":[{"type":"text","value":"2、面向对象的特点"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"封装"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对象实质上就是属性和方法的容器，它的主要作用就是存储属性和方法，这就是所谓的封装"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"默认情况下，对象的属性是可以任意的修改的，为了确保数据的安全性，在TS中可以对属性的权限进行设置"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只读属性（readonly）："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果在声明属性时添加一个readonly，则属性便成了只读属性无法修改"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TS中属性具有三种修饰符："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"public（默认值），可以在类、子类和对象中修改"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"protected ，可以在类、子类中修改"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"private ，可以在类中修改"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"public"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Person{\r\n    public name: string; // 写或什么都不写都是public\r\n    public age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name; // 可以在类中修改\r\n        this.age = age;\r\n    }\r\n\r\n    sayHello(){\r\n        console.log(`大家好，我是${this.name}`);\r\n    }\r\n}\r\n\r\nclass Employee extends Person{\r\n    constructor(name: string, age: number){\r\n        super(name, age);\r\n        this.name = name; //子类中可以修改\r\n    }\r\n}\r\n\r\nconst p = new Person('孙悟空', 18);\r\np.name = '猪八戒';// 可以通过对象修改\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 写或什么都不写都是public\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 可以在类中修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`大家好，我是"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Employee"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"//子类中可以修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'猪八戒'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 可以通过对象修改"}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"protected"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Person{\r\n    protected name: string;\r\n    protected age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name; // 可以修改\r\n        this.age = age;\r\n    }\r\n\r\n    sayHello(){\r\n        console.log(`大家好，我是${this.name}`);\r\n    }\r\n}\r\n\r\nclass Employee extends Person{\r\n\r\n    constructor(name: string, age: number){\r\n        super(name, age);\r\n        this.name = name; //子类中可以修改\r\n    }\r\n}\r\n\r\nconst p = new Person('孙悟空', 18);\r\np.name = '猪八戒';// 不能修改\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"protected"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"protected"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 可以修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`大家好，我是"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Employee"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"//子类中可以修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'猪八戒'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 不能修改"}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"private"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Person{\r\n    private name: string;\r\n    private age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name; // 可以修改\r\n        this.age = age;\r\n    }\r\n\r\n    sayHello(){\r\n        console.log(`大家好，我是${this.name}`);\r\n    }\r\n}\r\n\r\nclass Employee extends Person{\r\n\r\n    constructor(name: string, age: number){\r\n        super(name, age);\r\n        this.name = name; //子类中不能修改\r\n    }\r\n}\r\n\r\nconst p = new Person('孙悟空', 18);\r\np.name = '猪八戒';// 不能修改\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 可以修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`大家好，我是"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Employee"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"//子类中不能修改\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'猪八戒'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 不能修改"}]}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"属性存取器"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"对于一些不希望被任意修改的属性，可以将其设置为private"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"直接将其设置为private将导致无法再通过对象修改其中的属性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"我们可以在类中定义一组读取、设置属性的方法，这种对属性读取或设置的属性被称为属性的存取器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读取属性的方法叫做setter方法，设置属性的方法叫做getter方法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Person{\r\n    private _name: string;\r\n\r\n    constructor(name: string){\r\n        this._name = name;\r\n    }\r\n\r\n    get name(){\r\n        return this._name;\r\n    }\r\n\r\n    set name(name: string){\r\n        this._name = name;\r\n    }\r\n\r\n}\r\n\r\nconst p1 = new Person('孙悟空');\r\nconsole.log(p1.name); // 通过getter读取name属性\r\np1.name = '猪八戒'; // 通过setter修改name属性\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 通过getter读取name属性\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'猪八戒'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-4e8816"},"children":[{"type":"text","value":"// 通过setter修改name属性"}]}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态属性"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态属性（方法），也称为类属性。使用静态属性无需创建实例，通过类即可直接使用"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态属性（方法）使用static开头"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Tools{\r\n    static PI = 3.1415926;\r\n\r\n    static sum(num1: number, num2: number){\r\n        return num1 + num2\r\n    }\r\n}\r\n\r\nconsole.log(Tools.PI);\r\nconsole.log(Tools.sum(123, 456));\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Tools"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"PI"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"3.1415926"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"num1"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"num2"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"num1"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"num2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"Tools"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"PI"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"Tools"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"456"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"));"}]}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"this"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在类中，使用this表示当前对象"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"继承"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"继承时面向对象中的又一个特性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过继承可以将其他类中的属性和方法引入到当前类中"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Animal{\r\n    name: string;\r\n    age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name;\r\n        this.age = age;\r\n    }\r\n}\r\n\r\nclass Dog extends Animal{\r\n\r\n    bark(){\r\n        console.log(`${this.name}在汪汪叫！`);\r\n    }\r\n}\r\n\r\nconst dog = new Dog('旺财', 4);\r\ndog.bark();\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animal"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animal"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"bark"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"在汪汪叫！`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'旺财'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"bark"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"();"}]}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过继承可以在不修改类的情况下完成对类的扩展"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"重写"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"发生继承时，如果子类中的方法会替换掉父类中的同名方法，这就称为方法的重写"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class Animal{\r\n    name: string;\r\n    age: number;\r\n\r\n    constructor(name: string, age: number){\r\n        this.name = name;\r\n        this.age = age;\r\n    }\r\n\r\n    run(){\r\n        console.log(`父类中的run方法！`);\r\n    }\r\n}\r\n\r\nclass Dog extends Animal{\r\n\r\n    bark(){\r\n        console.log(`${this.name}在汪汪叫！`);\r\n    }\r\n\r\n    run(){\r\n        console.log(`子类中的run方法，会重写父类中的run方法！`);\r\n    }\r\n}\r\n\r\nconst dog = new Dog('旺财', 4);\r\ndog.bark();\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animal"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`父类中的run方法！`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animal"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"bark"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"在汪汪叫！`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`子类中的run方法，会重写父类中的run方法！`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257401"},"children":[{"type":"text","value":"dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"Dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'旺财'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"bark"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"();"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在子类中可以使用super来完成对父类的引用"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"抽象类（abstract class）"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"抽象类是专门用来被其他类所继承的类，它只能被其他类所继承不能用来创建实例"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"abstract class Animal{\r\n    abstract run(): void;\r\n    bark(){\r\n        console.log('动物在叫~');\r\n    }\r\n}\r\n\r\nclass Dog extends Animals{\r\n    run(){\r\n        console.log('狗在跑~');\r\n    }\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"abstract"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animal"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"abstract"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(): "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"bark"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'动物在叫~'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Dog"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Animals"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'狗在跑~'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用abstract开头的方法叫做抽象方法，抽象方法没有方法体只能定义在抽象类中，继承抽象类时抽象方法必须要实现"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_3接口interface"},"children":[{"type":"text","value":"3、接口（Interface）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接口的作用类似于抽象类，不同点在于接口中的所有方法和属性都是没有实值的，换句话说接口中的所有方法都是抽象方法。接口主要负责定义一个类的结构，接口可以去限制一个对象的接口，对象只有包含接口中定义的所有属性和方法时才能匹配接口。同时，可以让一个类去实现接口，实现接口时类中要保护接口中的所有属性。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例（检查对象类型）："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"interface Person{\r\n    name: string;\r\n    sayHello():void;\r\n}\r\n\r\nfunction fn(per: Person){\r\n    per.sayHello();\r\n}\r\n\r\nfn({name:'孙悟空', sayHello() {console.log(`Hello, 我是 ${this.name}`)}});\r\n\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"():"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"per"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"per"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'孙悟空'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"() {"}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`Hello, 我是 "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":")}});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"示例（实现）"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"interface Person{\r\n    name: string;\r\n    sayHello():void;\r\n}\r\n\r\nclass Student implements Person{\r\n    constructor(public name: string) {\r\n    }\r\n\r\n    sayHello() {\r\n        console.log('大家好，我是'+this.name);\r\n    }\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"():"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Student"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"implements"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"sayHello"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"'大家好，我是'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_4泛型generic"},"children":[{"type":"text","value":"4、泛型（Generic）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"定义一个函数或类时，有些情况下无法确定其中要使用的具体类型（返回值、参数、属性的类型不能确定），此时泛型便能够发挥作用。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"举个例子："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"function test(arg: any): any{\r\n    return arg;\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"上例中，test函数有一个参数类型不确定，但是能确定的时其返回值的类型和参数的类型是相同的，由于类型不确定所以参数和返回值均使用了any，但是很明显这样做是不合适的，首先使用any会关闭TS的类型检查，其次这样设置也不能体现出参数和返回值是相同的类型"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用泛型："}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"function test<T>(arg: T): T{\r\n    return arg;\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"这里的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<T>"}]},{"type":"text","value":"就是泛型，T是我们给这个类型起的名字（不一定非叫T），设置泛型后即可在函数中使用T来表示该类型。所以泛型其实很好理解，就表示某个类型。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"那么如何使用上边的函数呢？"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"方式一（直接使用）："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"test(10)\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":")"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用时可以直接传递参数使用，类型会由TS自动推断出来，但有时编译器无法自动推断时还需要使用下面的方式"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"方式二（指定类型）："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"test<number>(10)\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":")"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"也可以在函数后手动指定泛型"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以同时指定多个泛型，泛型间使用逗号隔开："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"function test<T, K>(a: T, b: K): K{\r\n    return b;\r\n}\r\n\r\ntest<number, string>(10, \"hello\");\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-6e4253"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e6579c"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":");"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用泛型时，完全可以将泛型当成是一个普通的类去使用"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"类中同样可以使用泛型："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"class MyClass<T>{\r\n    prop: T;\r\n\r\n    constructor(prop: T){\r\n        this.prop = prop;\r\n    }\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"MyClass"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"prop"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"prop"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"prop"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"prop"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"除此之外，也可以对泛型的范围进行约束"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"code":"interface MyInter{\r\n    length: number;\r\n}\r\n\r\nfunction test<T extends MyInter>(arg: T): number{\r\n    return arg.length;\r\n}\n","language":"typescript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"MyInter"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6a387d"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0d7953"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"MyInter"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-7e680c"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d4410"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"arg"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8d96a9"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b12c9"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用T extends MyInter表示泛型T必须是MyInter的子类，不一定非要使用接口类和抽象类同样适用。"}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3d4410{color:#C586C0}\n.ct-4e8816{color:#6A9955}\n.ct-6e4253{color:#B5CEA8}\n.ct-257401{color:#4FC1FF}\n.ct-e6579c{color:#CE9178}\n.ct-6a387d{color:#DCDCAA}\n.ct-8d96a9{color:#9CDCFE}\n.ct-7e680c{color:#4EC9B0}\n.ct-4b12c9{color:#D4D4D4}\n.ct-0d7953{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_1类class","depth":2,"text":"1、类（class）"},{"id":"_2面向对象的特点","depth":2,"text":"2、面向对象的特点"},{"id":"_3接口interface","depth":2,"text":"3、接口（Interface）"},{"id":"_4泛型generic","depth":2,"text":"4、泛型（Generic）"}]}},"_type":"markdown","_id":"content:articles:面向对象.md","_source":"content","_file":"articles/面向对象.md","_extension":"md"},{"_path":"/articles/vue","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"浅谈对Vue的理解","description":"Vue.js（/vjuː/，或简称为Vue）是一个用于创建用户界面的开源JavaScript框架，也是一个创建单页应用的Web应用框架。2016年一项针对JavaScript的调查表明，Vue有着89%的开发者满意度。在GitHub上，该项目平均每天能收获95颗星，为Github有史以来星标数第3多的项目同时也是一款流行的JavaScript前端框架，旨在更好地组织与简化Web开发。Vue所关注的核心是MVC模式中的视图层，同时，它也能方便地获取数据更新，并通过组件内部特定的方法实现视图与模型的交互PS: Vue作者尤雨溪是在为AngularJS工作之后开发出了这一框架。他声称自己的思路是提取Angular中为自己所喜欢的部分，构建出一款相当轻量的框架最早发布于2014年2月。","date":"2021-11-21T00:00:00.000Z","tags":["vue","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"什么是vue"},"children":[{"type":"text","value":"什么是Vue"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue.js（/vjuː/，或简称为Vue）是一个用于创建用户界面的开源JavaScript框架，也是一个创建单页应用的Web应用框架。2016年一项针对JavaScript的调查表明，Vue有着89%的开发者满意度。在GitHub上，该项目平均每天能收获95颗星，为Github有史以来星标数第3多的项目同时也是一款流行的JavaScript前端框架，旨在更好地组织与简化Web开发。Vue所关注的核心是MVC模式中的视图层，同时，它也能方便地获取数据更新，并通过组件内部特定的方法实现视图与模型的交互PS: Vue作者尤雨溪是在为AngularJS工作之后开发出了这一框架。他声称自己的思路是提取Angular中为自己所喜欢的部分，构建出一款相当轻量的框架最早发布于2014年2月。"}]},{"type":"element","tag":"h2","props":{"id":"核心特性"},"children":[{"type":"text","value":"核心特性"}]},{"type":"element","tag":"h3","props":{"id":"数据驱动mvvm"},"children":[{"type":"text","value":"数据驱动（MVVM)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MVVM"}]},{"type":"text","value":"表示的是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Model-View-ViewModel"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Model：模型层，负责处理业务逻辑以及和服务器端进行交互"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"View：视图层：负责将数据模型转化为UI展示出来，可以简单的理解为HTML页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ViewModel：视图模型层，用来连接Model和View，是Model和View之间的通信桥梁"}]}]},{"type":"element","tag":"h3","props":{"id":"组件化"},"children":[{"type":"text","value":"组件化"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所谓的组件化就是把图形、非图形的各种逻辑均抽象为一个统一的概念（组件）来实现开发的模式，在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"中每一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".vue"}]},{"type":"text","value":"文件都可以视为一个组件2.组件化的优势。"}]},{"type":"element","tag":"h3","props":{"id":"指令系统"},"children":[{"type":"text","value":"指令系统"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"指令 (Directives) 是带有 v- 前缀的特殊属性作用：当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常用的指令有如下几个："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"条件渲染指令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v-if"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"列表渲染指令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v-for"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"属性绑定指令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v-bind"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"事件绑定指令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v-on"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双向数据绑定指令 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"v-model"}]}]}]},{"type":"element","tag":"h2","props":{"id":"react和vue的对比"},"children":[{"type":"text","value":"React和Vue的对比"}]},{"type":"element","tag":"h3","props":{"id":"相同点"},"children":[{"type":"text","value":"相同点"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"都有组件化思想"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"都支持服务器端渲染"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"都有Virtual DOM（虚拟dom）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据驱动视图"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"都有支持native的方案："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"weex"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"React"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"React native"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"都有自己的构建工具："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue-cli"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"React"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Create React App"}]}]}]},{"type":"element","tag":"h3","props":{"id":"区别"},"children":[{"type":"text","value":"区别"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据流向的不同。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"react"}]},{"type":"text","value":"从诞生开始就推崇单向数据流，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"是双向数据流"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据变化的实现原理不同。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"react"}]},{"type":"text","value":"使用的是不可变数据，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"使用的是可变的数据"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"组件化通信的不同。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"react"}]},{"type":"text","value":"中我们通过使用回调函数来进行通信的，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"中子组件向父组件传递消息有两种方式：事件和回调函数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"diff算法不同。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"react"}]},{"type":"text","value":"主要使用diff队列保存需要更新哪些DOM，得到patch树，再统一操作批量更新DOM。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":" 使用双向指针，边对比，边更新DOM。"}]}]},{"type":"element","tag":"h2","props":{"id":"生命周期"},"children":[{"type":"text","value":"生命周期"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"字面含义就是一件事物从创建到消失的这个过程就叫做生命周期。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么在vue中的生命周期可以分为8个阶段，分别是创建前后，挂载前后，更新前后，销毁前后，以及一些特殊场景的生命周期，比如缓存组件的生命周期等。"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"生命周期"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"描述"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeCreate"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件实例被创建之初"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"created"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件实例已经完全创建"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeMount"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件挂载之前"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"mounted"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件挂载到实例上去之后"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeUpdate"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件数据发生变化，更新之前"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"updated"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件数据更新之后"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeDestroy"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件实例销毁之前"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"destroyed"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件实例销毁之后"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"activated"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"keep-alive 缓存的组件激活时"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"deactivated"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"keep-alive 缓存的组件停用时调用"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"errorCaptured"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"捕获一个来自子孙组件的错误时被调用"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体分析如下"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beforeCreate -> created"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"初始化 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":"实例，进行数据观测"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"created"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"完成数据观测，属性与方法的运算，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"watch"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"event"}]},{"type":"text","value":"事件回调的配置"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"methods"}]},{"type":"text","value":"中的方法，访问和修改data数据触发响应式渲染 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dom"}]},{"type":"text","value":"，可通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"computed"}]},{"type":"text","value":"和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"watch"}]},{"type":"text","value":"完成数据计算"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"此时 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$el"}]},{"type":"text","value":" 并没有被创建"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"created -> beforeMount"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"判断是否存在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"el"}]},{"type":"text","value":"选项，若不存在则停止编译，直到调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$mount(el)"}]},{"type":"text","value":"才会继续编译"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优先级："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"template"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"outerHTML"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.el"}]},{"type":"text","value":"获取到的是挂载 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]},{"type":"text","value":"的"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beforeMount"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在此阶段可获取到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.el"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"此阶段 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.el"}]},{"type":"text","value":"虽已完成DOM初始化，但并未挂载在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"el"}]},{"type":"text","value":"选项上"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beforeMount -> mounted"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"此阶段 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.el"}]},{"type":"text","value":"完成挂载，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$el"}]},{"type":"text","value":"生成的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]},{"type":"text","value":"替换了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"el"}]},{"type":"text","value":"选项所对应的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mounted"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.el"}]},{"type":"text","value":"已完成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]},{"type":"text","value":"的挂载与渲染，此刻打印 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$el"}]},{"type":"text","value":"，发现之前的挂载点及内容已被替换成新的DOM"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beforeUpdate"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"更新的数据必须是被渲染在模板上的（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"el"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"template"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":"之一）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"此时 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"view"}]},{"type":"text","value":"层还未更新"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beforeUpdate"}]},{"type":"text","value":"中再次修改数据，不会再次触发更新方法"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"updated"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"完成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"view"}]},{"type":"text","value":"层的更新"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"若在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"updated"}]},{"type":"text","value":"中再次修改数据，会再次触发更新方法（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beforeUpdate"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"updated"}]},{"type":"text","value":"）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"beforeDestroy"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"实例被销毁前调用，此时实例属性与方法仍可访问"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"destroyed"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"完全销毁一个实例。可清理它与其它实例的连接，解绑它的全部指令及事件监听器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"并不能清除DOM，仅仅销毁实例"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"使用场景分析"}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"生命周期"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"描述"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeCreate"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"执行时组件实例还未创建，通常用于插件开发中执行一些初始化任务"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"created"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件初始化完毕，各种数据可以使用，常用于异步数据获取"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeMount"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"未执行渲染、更新，dom未创建"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"mounted"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"初始化结束，dom已创建，可用于获取访问数据和dom元素"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeUpdate"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"更新前，可用于获取更新前各种状态"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"updated"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"更新后，所有状态已是最新"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"beforeDestroy"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"销毁前，可用于一些定时器或订阅的取消"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"destroyed"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"组件已销毁，作用同上"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"小问题数据请求在created和mounted中的区别"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"小问题：数据请求在created和mounted中的区别？"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这两个生命 周期中都是可以去请求接口数据的，但是created生命周期中请求数据时，此时页面DOM结构还未生成，而在mounted生命周期中此时页面的DOM结构已经完成挂载，因此我们不难发现，created在触发时机上是比mounted要早一些的。因此如果请求的数据是对页面内容的改动，建议放在created中去请求，放在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mounted"}]},{"type":"text","value":"中的请求有可能导致页面闪动（因为此时页面 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dom"}]},{"type":"text","value":"结构已经生成）。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"核心特性","depth":2,"text":"核心特性","children":[{"id":"数据驱动mvvm","depth":3,"text":"数据驱动（MVVM)"},{"id":"组件化","depth":3,"text":"组件化"},{"id":"指令系统","depth":3,"text":"指令系统"}]},{"id":"react和vue的对比","depth":2,"text":"React和Vue的对比","children":[{"id":"相同点","depth":3,"text":"相同点"},{"id":"区别","depth":3,"text":"区别"}]},{"id":"生命周期","depth":2,"text":"生命周期","children":[{"id":"小问题数据请求在created和mounted中的区别","depth":3,"text":"小问题：数据请求在created和mounted中的区别？"}]}]}},"_type":"markdown","_id":"content:articles:浅谈对Vue的理解.md","_source":"content","_file":"articles/浅谈对Vue的理解.md","_extension":"md"},{"_path":"/articles/es6setmap","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"如何理解ES6中的Set和Map两种数据结构","description":"前言","date":"2022-12-18T00:00:00.000Z","tags":["JavaScript","ES6"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"前言"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要用一句来描述，我们可以说，"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"是一种叫做集合的数据结构，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"是一种叫做字典的数据结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"什么是集合？什么又是字典？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"什么是集合？什么又是字典？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"集合\r\n是由一堆无序的、相关联的，且不重复的内存结构【数学中称为元素】组成的组合"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"字典\r\n是一些元素的集合。每个元素有一个称作key 的域，不同元素的key 各不相同"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"区别？"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"共同点：集合、字典都可以存储不重复的值"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不同点：集合是以"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"值，值"}]},{"type":"text","value":"的形式存储元素，字典是以"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"键，值"}]},{"type":"text","value":"的形式存储"}]}]},{"type":"element","tag":"h2","props":{"id":"set"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"es6"}]},{"type":"text","value":"新增的数据结构，类似于数组，但是成员的值都是唯一的，没有重复的值，我们一般称为集合"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"本身是一个构造函数，用来生成 Set 数据结构"}]},{"type":"element","tag":"code","props":{"code":"const s = new Set();\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const s = new Set();"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"增删改查"},"children":[{"type":"text","value":"增删改查"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"的实例关于增删改查的方法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"add()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"delete()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"has()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clear()"}]}]},{"type":"element","tag":"h3","props":{"id":"add"},"children":[{"type":"text","value":"add()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"添加某个值，返回 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":" 结构本身"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当添加实例中已经存在的元素，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set"}]},{"type":"text","value":"不会进行处理添加"}]},{"type":"element","tag":"code","props":{"code":"s.add(1).add(2).add(2); // 2只被添加了一次\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"s.add(1).add(2).add(2); // 2只被添加了一次"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"delete"},"children":[{"type":"text","value":"delete()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"删除某个值，返回一个布尔值，表示删除是否成功"}]},{"type":"element","tag":"code","props":{"code":"s.delete(1)\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"s.delete(1)"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"has"},"children":[{"type":"text","value":"has()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"返回一个布尔值，判断该值是否为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"的成员"}]},{"type":"element","tag":"code","props":{"code":"s.has(2)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"s"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"clear"},"children":[{"type":"text","value":"clear()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"清除所有成员，没有返回值"}]},{"type":"element","tag":"code","props":{"code":"s.clear()\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"s.clear()"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"遍历"},"children":[{"type":"text","value":"遍历"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"实例遍历的方法有如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于遍历的方法，有如下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"keys()：返回键名的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"values()：返回键值的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"entries()：返回键值对的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"forEach()：使用回调函数遍历每个成员"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"的遍历顺序就是插入顺序"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"keys"}]},{"type":"text","value":"方法、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"values"}]},{"type":"text","value":"方法、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"entries"}]},{"type":"text","value":"方法返回的都是遍历器对象"}]},{"type":"element","tag":"code","props":{"code":"let set = new Set(['red', 'green', 'blue']);\r\n\r\nfor (let item of set.keys()) {\r\n  console.log(item);\r\n}\r\n// red\r\n// green\r\n// blue\r\n\r\nfor (let item of set.values()) {\r\n  console.log(item);\r\n}\r\n// red\r\n// green\r\n// blue\r\n\r\nfor (let item of set.entries()) {\r\n  console.log(item);\r\n}\r\n// [\"red\", \"red\"]\r\n// [\"green\", \"green\"]\r\n// [\"blue\", \"blue\"]\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'red'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'green'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'blue'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// red\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// green\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// blue\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// red\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// green\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// blue\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"entries"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [\"red\", \"red\"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [\"green\", \"green\"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [\"blue\", \"blue\"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"forEach()"}]},{"type":"text","value":"用于对每个成员执行某种操作，没有返回值，键值、键名都相等，同样的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"forEach"}]},{"type":"text","value":"方法有第二个参数，用于绑定处理函数的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]}]},{"type":"element","tag":"code","props":{"code":"let set = new Set([1, 4, 9]);\r\nset.forEach((value, key) => console.log(key + ' : ' + value))\r\n// 1 : 1\r\n// 4 : 4\r\n// 9 : 9\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"' : '"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 1 : 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 4 : 4\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 9 : 9"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"扩展运算符和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":" 结构相结合实现数组或字符串去重"}]},{"type":"element","tag":"code","props":{"code":"// 数组\r\nlet arr = [3, 5, 2, 2, 5, 5];\r\nlet unique = [...new Set(arr)]; // [3, 5, 2]\r\n\r\n// 字符串\r\nlet str = \"352255\";\r\nlet unique = [...new Set(str)].join(\"\"); // \"352\"\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 数组\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"unique"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = [..."}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")]; "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [3, 5, 2]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 字符串\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"352255\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"unique"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = [..."}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")]."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"352\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实现并集、交集、和差集"}]},{"type":"element","tag":"code","props":{"code":"let a = new Set([1, 2, 3]);\r\nlet b = new Set([4, 3, 2]);\r\n\r\n// 并集\r\nlet union = new Set([...a, ...b]);\r\n// Set {1, 2, 3, 4}\r\n\r\n// 交集\r\nlet intersect = new Set([...a].filter(x => b.has(x)));\r\n// set {2, 3}\r\n\r\n// （a 相对于 b 的）差集\r\nlet difference = new Set([...a].filter(x => !b.has(x)));\r\n// Set {1}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 并集\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"union"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"([..."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", ..."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// Set {1, 2, 3, 4}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 交集\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"intersect"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"([..."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// set {2, 3}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// （a 相对于 b 的）差集\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"difference"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"([..."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" !"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// Set {1}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"题外话：在JavaScript中，filter()方法可以用于筛选数组中的元素，返回一个新的数组，其中包含满足指定条件的元素。下面是一些关于JavaScript中filter()方法的详细解释和示例。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"filter()方法的语法如下："}]},{"type":"element","tag":"code","props":{"code":"array.filter(function(currentValue, index, arr), thisValue)\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"array"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"currentValue"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"thisValue"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"array"}]},{"type":"text","value":"：必需，要进行筛选的数组。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"function(currentValue, index, arr)"}]},{"type":"text","value":"：必需，用于测试每个元素的函数。它可以接受三个参数："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"currentValue"}]},{"type":"text","value":"：必需，当前元素的值。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":"：可选，当前元素的索引。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"arr"}]},{"type":"text","value":"：可选，当前元素所属的数组对象。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"thisValue"}]},{"type":"text","value":"：可选，对象作为该执行回调函数时使用，传递给函数，用作 \"this\" 的值。如果省略了该参数，则 \"this\" 的值为 \"undefined\"。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"filter()方法返回一个新的数组，其中包含满足指定条件的元素。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面是一些使用filter()方法的示例："}]},{"type":"element","tag":"code","props":{"code":"// 筛选出大于等于 10 的元素\r\nconst nums = [5, 10, 15, 20];\r\nconst filteredNums = nums.filter(num => num >= 10);\r\nconsole.log(filteredNums); // [10, 15, 20]\r\n\r\n// 筛选出所有偶数\r\nconst nums2 = [1, 2, 3, 4, 5, 6];\r\nconst filteredNums2 = nums2.filter(num => num % 2 === 0);\r\nconsole.log(filteredNums2); // [2, 4, 6]\r\n\r\n// 筛选出所有包含 \"o\" 的元素\r\nconst words = [\"hello\", \"world\", \"foo\", \"bar\"];\r\nconst filteredWords = words.filter(word => word.includes(\"o\"));\r\nconsole.log(filteredWords); // [\"hello\", \"world\", \"foo\"]\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 筛选出大于等于 10 的元素\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"nums"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"15"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"filteredNums"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"nums"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" >= "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"filteredNums"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [10, 15, 20]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 筛选出所有偶数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"nums2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"filteredNums2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"nums2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" % "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"filteredNums2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [2, 4, 6]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 筛选出所有包含 \"o\" 的元素\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"words"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"bar\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"filteredWords"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"words"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"word"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"word"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"includes"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"o\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"filteredWords"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// [\"hello\", \"world\", \"foo\"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[]}]}]}]},{"type":"element","tag":"h2","props":{"id":"filter方法的注意事项"},"children":[{"type":"text","value":"filter()方法的注意事项"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"filter()"}]},{"type":"text","value":"方法不会改变原始数组。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果没有元素满足条件，则返回空数组。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果省略了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"thisValue"}]},{"type":"text","value":" 参数，则回调函数中的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" 值为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"filter()"}]},{"type":"text","value":"方法不会对空数组进行操作。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上是关于JavaScript中filter()方法的详细解释和示例。通过这个方法，我们可以更方便地对数组进行筛选操作，提高开发效率。"}]},{"type":"element","tag":"h2","props":{"id":"二map"},"children":[{"type":"text","value":"二、Map"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"类型是键值对的有序列表，而键和值都可以是任意类型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"本身是一个构造函数，用来生成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":" 数据结构"}]},{"type":"element","tag":"code","props":{"code":"const m = new Map()\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"增删改查-1"},"children":[{"type":"text","value":"增删改查"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":" 结构的实例针对增删改查有以下属性和操作方法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"size 属性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"set()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"get()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"has()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"delete()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"clear()"}]}]},{"type":"element","tag":"h3","props":{"id":"size"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"size"}]},{"type":"text","value":"属性返回 Map 结构的成员总数。"}]},{"type":"element","tag":"code","props":{"code":"const map = new Map();\r\nmap.set('foo', true);\r\nmap.set('bar', false);\r\n\r\nmap.size // 2\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'foo'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'bar'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 2"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"set-1"},"children":[{"type":"text","value":"set()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设置键名 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"对应的键值为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":"，然后返回整个 Map 结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"已经有值，则键值会被更新，否则就新生成该键"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"同时返回的是当前 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"对象，可采用链式写法"}]},{"type":"element","tag":"code","props":{"code":"const m = new Map();\r\n\r\nm.set('edition', 6)        // 键是字符串\r\nm.set(262, 'standard')     // 键是数值\r\nm.set(undefined, 'nah')    // 键是 undefined\r\nm.set(1, 'a').set(2, 'b').set(3, 'c') // 链式操作\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'edition'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")        "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 键是字符串\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"262"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'standard'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")     "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 键是数值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'nah'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")    "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 键是 undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'a'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'b'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'c'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 链式操作"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"get"},"children":[{"type":"text","value":"get()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"get"}]},{"type":"text","value":"方法读取 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"对应的键值，如果找不到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"，返回 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"undefined"}]}]},{"type":"element","tag":"code","props":{"code":"const m = new Map();\r\n\r\nconst hello = function() {console.log('hello');};\r\nm.set(hello, 'Hello ES6!') // 键是函数\r\n\r\nm.get(hello)  // Hello ES6!\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"hello"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"() {"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'hello'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"hello"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'Hello ES6!'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 键是函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"hello"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")  "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// Hello ES6!"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"has-1"},"children":[{"type":"text","value":"has()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"has"}]},{"type":"text","value":"方法返回一个布尔值，表示某个键是否在当前 Map 对象之中"}]},{"type":"element","tag":"code","props":{"code":"const m = new Map();\r\n\r\nm.set('edition', 6);\r\nm.set(262, 'standard');\r\nm.set(undefined, 'nah');\r\n\r\nm.has('edition')     // true\r\nm.has('years')       // false\r\nm.has(262)           // true\r\nm.has(undefined)     // true\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'edition'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"262"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'standard'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'nah'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'edition'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")     "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'years'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")       "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"262"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")           "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")     "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// true"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"delete-1"},"children":[{"type":"text","value":"delete()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"delete"}]},{"type":"text","value":"方法删除某个键，返回 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"。如果删除失败，返回 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"code","props":{"code":"const m = new Map();\r\nm.set(undefined, 'nah');\r\nm.has(undefined)     // true\r\n\r\nm.delete(undefined)\r\nm.has(undefined)       // false\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'nah'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")     "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"m"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"has"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")       "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// false"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"clear-1"},"children":[{"type":"text","value":"clear()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clear"}]},{"type":"text","value":"方法清除所有成员，没有返回值"}]},{"type":"element","tag":"code","props":{"code":"let map = new Map();\r\nmap.set('foo', true);\r\nmap.set('bar', false);\r\n\r\nmap.size // 2\r\nmap.clear()\r\nmap.size // 0\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'foo'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'bar'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"clear"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"size"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 0"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"遍历-1"},"children":[{"type":"text","value":"遍历"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"结构原生提供三个遍历器生成函数和一个遍历方法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"keys()：返回键名的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"values()：返回键值的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"entries()：返回所有成员的遍历器"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"forEach()：遍历 Map 的所有成员"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"遍历顺序就是插入顺序"}]},{"type":"element","tag":"code","props":{"code":"const map = new Map([\r\n  ['F', 'no'],\r\n  ['T',  'yes'],\r\n]);\r\n\r\nfor (let key of map.keys()) {\r\n  console.log(key);\r\n}\r\n// \"F\"\r\n// \"T\"\r\n\r\nfor (let value of map.values()) {\r\n  console.log(value);\r\n}\r\n// \"no\"\r\n// \"yes\"\r\n\r\nfor (let item of map.entries()) {\r\n  console.log(item[0], item[1]);\r\n}\r\n// \"F\" \"no\"\r\n// \"T\" \"yes\"\r\n\r\n// 或者\r\nfor (let [key, value] of map.entries()) {\r\n  console.log(key, value);\r\n}\r\n// \"F\" \"no\"\r\n// \"T\" \"yes\"\r\n\r\n// 等同于使用map.entries()\r\nfor (let [key, value] of map) {\r\n  console.log(key, value);\r\n}\r\n// \"F\" \"no\"\r\n// \"T\" \"yes\"\r\n\r\nmap.forEach(function(value, key, map) {\r\n  console.log(\"Key: %s, Value: %s\", key, value);\r\n});\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  ["}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'F'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'no'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  ["}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'T'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":",  "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'yes'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"F\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"T\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"no\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"entries"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"item"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"F\" \"no\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"T\" \"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 或者\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"entries"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"()) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"F\" \"no\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"T\" \"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 等同于使用map.entries()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-68c2c7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"F\" \"no\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"T\" \"yes\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"\"Key: %s, Value: %s\""}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"weakset-和-weakmap"},"children":[{"type":"text","value":"WeakSet 和 WeakMap"}]},{"type":"element","tag":"h3","props":{"id":"weakset"},"children":[{"type":"text","value":"WeakSet"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"实例"}]},{"type":"element","tag":"code","props":{"code":"const ws = new WeakSet();\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"const ws = new WeakSet();"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"可以接受一个具有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Iterable"}]},{"type":"text","value":"接口的对象作为参数"}]},{"type":"element","tag":"code","props":{"code":"const a = [[1, 2], [3, 4]];\r\nconst ws = new WeakSet(a);\r\n// WeakSet {[1, 2], [3, 4]}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = [["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"], ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"ws"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// WeakSet {[1, 2], [3, 4]}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"API"}]},{"type":"text","value":"中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"text","value":"有两个区别："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有遍历操作的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"API"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"size"}]},{"type":"text","value":"属性"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"只能成员只能是引用类型，而不能是其他类型的值"}]},{"type":"element","tag":"code","props":{"code":"let ws=new WeakSet();\r\n\r\n// 成员不是引用类型\r\nlet weakSet=new WeakSet([2,3]);\r\nconsole.log(weakSet) // 报错\r\n\r\n// 成员为引用类型\r\nlet obj1={name:1}\r\nlet obj2={name:1}\r\nlet ws=new WeakSet([obj1,obj2]); \r\nconsole.log(ws) //WeakSet {{…}, {…}}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"ws"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 成员不是引用类型\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"weakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"weakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 报错\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 成员为引用类型\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"={"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"={"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"ws"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakSet"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]); \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"ws"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"//WeakSet {{…}, {…}}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"里面的引用只要在外部消失，它在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakSet"}]},{"type":"text","value":"里面的引用就会自动消失"}]},{"type":"element","tag":"h3","props":{"id":"weakmap"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"结构与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"结构类似，也是用于生成键值对的集合"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"API"}]},{"type":"text","value":"中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Map"}]},{"type":"text","value":"有两个区别："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有遍历操作的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"API"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"没有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"clear"}]},{"type":"text","value":"清空方法"}]}]},{"type":"element","tag":"code","props":{"code":"// WeakMap 可以使用 set 方法添加成员\r\nconst wm1 = new WeakMap();\r\nconst key = {foo: 1};\r\nwm1.set(key, 2);\r\nwm1.get(key) // 2\r\n\r\n// WeakMap 也可以接受一个数组，\r\n// 作为构造函数的参数\r\nconst k1 = [1, 2, 3];\r\nconst k2 = [4, 5, 6];\r\nconst wm2 = new WeakMap([[k1, 'foo'], [k2, 'bar']]);\r\nwm2.get(k2) // \"bar\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// WeakMap 可以使用 set 方法添加成员\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"wm1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// WeakMap 也可以接受一个数组，\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// 作为构造函数的参数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"k1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"k2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"wm2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"([["}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"k1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'foo'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"], ["}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"k2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'bar'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"]]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"k2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"bar\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"只接受对象作为键名（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"null"}]},{"type":"text","value":"除外），不接受其他类型的值作为键名"}]},{"type":"element","tag":"code","props":{"code":"const map = new WeakMap();\r\nmap.set(1, 2)\r\n// TypeError: 1 is not an object!\r\nmap.set(Symbol(), 2)\r\n// TypeError: Invalid value used as weak map key\r\nmap.set(null, 2)\r\n// TypeError: Invalid value used as weak map key\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// TypeError: 1 is not an object!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"Symbol"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// TypeError: Invalid value used as weak map key\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// TypeError: Invalid value used as weak map key"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"的键名所指向的对象，一旦不再需要，里面的键名对象和所对应的键值对会自动消失，不用手动删除引用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"举个场景例子："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在网页的 DOM 元素上添加数据，就可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"结构，当该 DOM 元素被清除，其所对应的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"记录就会自动被移除"}]},{"type":"element","tag":"code","props":{"code":"const wm = new WeakMap();\r\n\r\nconst element = document.getElementById('example');\r\n\r\nwm.set(element, 'some information');\r\nwm.get(element) // \"some information\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"element"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"document"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'example'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"element"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d6db6c"},"children":[{"type":"text","value":"'some information'"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"element"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// \"some information\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":" 弱引用的只是键名，而不是键值。键值依然是正常引用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面代码中，键值 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"obj"}]},{"type":"text","value":"会在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"WeakMap"}]},{"type":"text","value":"产生新的引用，当你修改 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"obj"}]},{"type":"text","value":"不会影响到内部"}]},{"type":"element","tag":"code","props":{"code":"const wm = new WeakMap();\r\nlet key = {};\r\nlet obj = {foo: 1};\r\n\r\nwm.set(key, obj);\r\nobj = null;\r\nwm.get(key)\r\n// Object {foo: 1}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b78d4b"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"WeakMap"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = {};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b693c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-6fccbc"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"wm"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8db039"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0e4f70"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-253355"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-16c38d"},"children":[{"type":"text","value":"// Object {foo: 1}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b78d4b{color:#4FC1FF}\n.ct-16c38d{color:#6A9955}\n.ct-68c2c7{color:#C586C0}\n.ct-d6db6c{color:#CE9178}\n.ct-6fccbc{color:#569CD6}\n.ct-9b693c{color:#B5CEA8}\n.ct-8db039{color:#DCDCAA}\n.ct-253355{color:#D4D4D4}\n.ct-0e4f70{color:#9CDCFE}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"set","depth":2,"text":"Set","children":[{"id":"增删改查","depth":3,"text":"增删改查"},{"id":"add","depth":3,"text":"add()"},{"id":"delete","depth":3,"text":"delete()"},{"id":"has","depth":3,"text":"has()"},{"id":"clear","depth":3,"text":"clear()"},{"id":"遍历","depth":3,"text":"遍历"}]},{"id":"filter方法的注意事项","depth":2,"text":"filter()方法的注意事项"},{"id":"二map","depth":2,"text":"二、Map","children":[{"id":"增删改查-1","depth":3,"text":"增删改查"},{"id":"size","depth":3,"text":"size"},{"id":"set-1","depth":3,"text":"set()"},{"id":"get","depth":3,"text":"get()"},{"id":"has-1","depth":3,"text":"has()"},{"id":"delete-1","depth":3,"text":"delete()"},{"id":"clear-1","depth":3,"text":"clear()"},{"id":"遍历-1","depth":3,"text":"遍历"}]},{"id":"weakset-和-weakmap","depth":2,"text":"WeakSet 和 WeakMap","children":[{"id":"weakset","depth":3,"text":"WeakSet"},{"id":"weakmap","depth":3,"text":"WeakMap"}]}]}},"_type":"markdown","_id":"content:articles:如何理解ES6中的Set和Map两种数据结构.md","_source":"content","_file":"articles/如何理解ES6中的Set和Map两种数据结构.md","_extension":"md"},{"_path":"/articles/cssdprppi","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"设备像素、css像素、设备独立像素、dpr、ppi 之间的区别","description":"关于设备像素、css像素、设备独立像素、dpr、ppi 之间的区别","date":"2023-08-18T00:00:00.000Z","tags":["HTML"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于设备像素、css像素、设备独立像素、dpr、ppi 之间的区别"}]},{"type":"element","tag":"h2","props":{"id":"一背景"},"children":[{"type":"text","value":"一、背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"中我们通常使用px作为单位，在PC浏览器中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"的1个像素都是对应着电脑屏幕的1个物理像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这会造成一种错觉，我们会认为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"中的像素就是设备的物理像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但实际情况却并非如此，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"中的像素只是一个抽象的单位，在不同的设备或不同的环境中，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"中的1px所代表的设备物理像素是不同的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们做移动端开发时，同为1px的设置，在不同分辨率的移动设备上显示效果却有很大差异"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这背后就涉及了css像素、设备像素、设备独立像素、dpr、ppi的概念"}]},{"type":"element","tag":"h2","props":{"id":"二介绍"},"children":[{"type":"text","value":"二、介绍"}]},{"type":"element","tag":"h3","props":{"id":"css像素"},"children":[{"type":"text","value":"CSS像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"CSS像素（css pixel, px）: 适用于web编程，在 CSS 中以 px 为后缀，是一个长度单位"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 CSS 规范中，长度单位可以分为两类，绝对单位以及相对单位"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"px是一个相对单位，相对的是设备像素（device pixel）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般情况，页面缩放比为1，1个CSS像素等于1个设备独立像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CSS"}]},{"type":"text","value":"像素又具有两个方面的相对性："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在同一个设备上，每1个 CSS 像素所代表的设备像素是可以变化的（比如调整屏幕的分辨率）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在不同的设备之间，每1个 CSS 像素所代表的设备像素是可以变化的（比如两个不同型号的手机）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在页面进行缩放操作也会 引起 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"css"}]},{"type":"text","value":"中 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"px"}]},{"type":"text","value":"的变化，假设页面放大一倍，原来的 1px 的东西变成 2px，在实际宽度不变的情况下1px 变得跟原来的 2px 的长度（长宽）一样了（元素会占据更多的设备像素）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设原来需要 320px 才能填满的宽度现在只需要 160px"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"px会受到下面的因素的影响而变化："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每英寸像素（PPI）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设备像素比（DPR）"}]}]},{"type":"element","tag":"h3","props":{"id":"设备像素"},"children":[{"type":"text","value":"设备像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设备像素（device pixels），又称为物理像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"指设备能控制显示的最小物理单位，不一定是一个小正方形区块，也没有标准的宽高，只是用于显示丰富色彩的一个“点”而已"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以参考公园里的景观变色彩灯，一个彩灯(物理像素)由红、蓝、绿小灯组成，三盏小灯不同的亮度混合出各种色彩"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1692771895451","src":"https://static.vue-js.com/cffc6570-91f2-11eb-ab90-d9ae814b240d.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从屏幕在工厂生产出的那天起，它上面设备像素点就固定不变了，单位为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pt"}]}]},{"type":"element","tag":"h3","props":{"id":"设备独立像素"},"children":[{"type":"text","value":"设备独立像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设备独立像素（Device Independent Pixel）：与设备无关的逻辑像素，代表可以通过程序控制使用的虚拟像素，是一个总体概念，包括了CSS像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"javaScript"}]},{"type":"text","value":"中可以通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.screen.width/ window.screen.height"}]},{"type":"text","value":" 查看"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比如我们会说“电脑屏幕在 2560x1600分辨率下不适合玩游戏，我们把它调为 1440x900”，这里的“分辨率”（非严谨说法）指的就是设备独立像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个设备独立像素里可能包含1个或者多个物理像素点，包含的越多则屏幕看起来越清晰"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"至于为什么出现设备独立像素这种虚拟像素单位概念，下面举个例子："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"iPhone 3GS 和 iPhone 4/4s 的尺寸都是 3.5 寸，但 iPhone 3GS 的分辨率是 320x480，iPhone 4/4s 的分辨率是 640x960"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这意味着，iPhone 3GS 有 320 个物理像素，iPhone 4/4s 有 640 个物理像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果我们按照真实的物理像素进行布局，比如说我们按照 320 物理像素进行布局，到了 640 物理像素的手机上就会有一半的空白，为了避免这种问题，就产生了虚拟像素单位"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们统一 iPhone 3GS 和 iPhone 4/4s 都是 320 个虚拟像素，只是在 iPhone 3GS 上，最终 1 个虚拟像素换算成 1 个物理像素，在 iphone 4s 中，1 个虚拟像素最终换算成 2 个物理像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"至于 1 个虚拟像素被换算成几个物理像素，这个数值我们称之为设备像素比，也就是下面介绍的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dpr"}]}]},{"type":"element","tag":"h3","props":{"id":"dpr"},"children":[{"type":"text","value":"dpr"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dpr（device pixel ratio），设备像素比，代表设备独立像素到设备像素的转换关系，在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"JavaScript"}]},{"type":"text","value":"中可以通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.devicePixelRatio"}]},{"type":"text","value":" 获取"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"计算公式如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://static.vue-js.com/dd45e2b0-91f2-11eb-ab90-d9ae814b240d.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当设备像素比为1:1时，使用1（1×1）个设备像素显示1个CSS像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当设备像素比为2:1时，使用4（2×2）个设备像素显示1个CSS像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当设备像素比为3:1时，使用9（3×3）个设备像素显示1个CSS像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如下图所示："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://static.vue-js.com/e63cceb0-91f2-11eb-ab90-d9ae814b240d.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dpr"}]},{"type":"text","value":"为3，那么 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"1px"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CSS"}]},{"type":"text","value":"像素宽度对应 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"3px"}]},{"type":"text","value":"的物理像素的宽度，1px的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CSS"}]},{"type":"text","value":"像素高度对应 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"3px"}]},{"type":"text","value":"的物理像素高度"}]},{"type":"element","tag":"h3","props":{"id":"ppi"},"children":[{"type":"text","value":"ppi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ppi （pixel per inch），每英寸像素，表示每英寸所包含的像素点数目，更确切的说法应该是像素密度。数值越高，说明屏幕能以更高密度显示图像"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"计算公式如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://static.vue-js.com/f734adf0-91f2-11eb-ab90-d9ae814b240d.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"三总结"},"children":[{"type":"text","value":"三、总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"无缩放情况下，1个CSS像素等于1个设备独立像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设备像素由屏幕生产之后就不发生改变，而设备独立像素是一个虚拟单位会发生改变"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PC端中，1个设备独立像素 = 1个设备像素 （在100%，未缩放的情况下）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在移动端中，标准屏幕（160ppi）下 1个设备独立像素 = 1个设备像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"设备像素比（dpr） = 设备像素 / 设备独立像素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每英寸像素（ppi），值越大，图像越清晰"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"一背景","depth":2,"text":"一、背景"},{"id":"二介绍","depth":2,"text":"二、介绍","children":[{"id":"css像素","depth":3,"text":"CSS像素"},{"id":"设备像素","depth":3,"text":"设备像素"},{"id":"设备独立像素","depth":3,"text":"设备独立像素"},{"id":"dpr","depth":3,"text":"dpr"},{"id":"ppi","depth":3,"text":"ppi"}]},{"id":"三总结","depth":2,"text":"三、总结"}]}},"_type":"markdown","_id":"content:articles:设备像素、css像素、设备独立像素、dpr、ppi 之间的区别.md","_source":"content","_file":"articles/设备像素、css像素、设备独立像素、dpr、ppi 之间的区别.md","_extension":"md"},{"_path":"/articles/spa","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"什么是SPA应用","description":"含义","date":"2021-11-23T00:00:00.000Z","tags":["vue","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"什么是spa应用"},"children":[{"type":"text","value":"什么是SPA应用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"含义"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SPA全称是singel-page-application,即单页面应用，翻译过来就是单页应用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SPA"}]},{"type":"text","value":"是一种网络应用程序或网站的模型，它通过动态重写当前页面来与用户交互，这种方法避免了页面之间切换打断用户体验在单页应用中，所有必要的代码（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HTML"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"JavaScript"}]},{"type":"text","value":"和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CSS"}]},{"type":"text","value":"）都通过单个页面的加载而检索，或者根据需要（通常是为响应用户操作）动态装载适当的资源并添加到页面页面在任何时间点都不会重新加载，也不会将控制转移到其他页面举个例子来讲就是一个杯子，早上装的牛奶，中午装的是开水，晚上装的是茶，我们发现，变的始终是杯子里的内容。我们熟知的JS框架如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"react"}]},{"type":"text","value":","},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":","},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"angular"}]},{"type":"text","value":","},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ember"}]},{"type":"text","value":"都属于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SPA。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"优缺点"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"优点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"具有桌面应用的即时性、网站的可移植性和可访问性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用户体验好、快，内容的改变不需要重新加载整个页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"良好的前后端分离，分工更明确"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"缺点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不利于搜索引擎的抓取"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"首次渲染速度相对较慢"}]}]},{"type":"element","tag":"h2","props":{"id":"如何给spa做seo"},"children":[{"type":"text","value":"如何给SPA做SEO?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"目前我使用的主要是服务端渲染，vue可以使用NUXT.JS,react可以使用NEXT.js，还有其他的一些方案，比如静态化和通过ngnix转发配置要求，重新解析HTML文件方便爬虫爬取等。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"如何给spa做seo","depth":2,"text":"如何给SPA做SEO?"}]}},"_type":"markdown","_id":"content:articles:什么是SPA应用.md","_source":"content","_file":"articles/什么是SPA应用.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"如何判断鼠标是否离开页面","description":"","excerpt":{"type":"root","children":[]},"date":"2022-06-22T00:00:00.000Z","tags":["jQuery","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"_01需求"},"children":[{"type":"text","value":"01.需求"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"运营希望当鼠标移动到浏览器和页面的交界处的位置触发弹窗显示，因为通常情况下默认为这种行为是要离开当前的页面，实现思路，监听鼠标的移动位置，当鼠标大致在某个区域的时候就触发弹窗的显示"}]},{"type":"element","tag":"h2","props":{"id":"_02思路"},"children":[{"type":"text","value":"02.思路"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过MouseEvent.clientX，它提供事件发生时的应用客户端区域的水平坐标 (与页面坐标不同)。例如，不论页面是否有水平滚动，当你点击客户端区域的左上角时，鼠标事件的 clientX 值都将为 0 。最初这个属性被定义为长整型（long integer），如今 CSSOM 视图模块将其重新定义为双精度浮点数（double float）。你可以查阅浏览器兼容性部分的文档来进一步了解有关信息。"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_01需求","depth":2,"text":"01.需求"},{"id":"_02思路","depth":2,"text":"02.思路"}]}},"_type":"markdown","_id":"content:articles:实现鼠标离开页面.md","_source":"content","_file":"articles/实现鼠标离开页面.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"尾递归的理解，有哪些应用场景","description":"递归（英语：Recursion）","date":"2023-02-19T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"含义"},"children":[{"type":"text","value":"含义"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"递归（英语：Recursion）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在数学与计算机科学中，是指在函数的定义中使用函数自身的方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在函数内部，可以调用其他函数。如果一个函数在内部调用自身本身，这个函数就是递归函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其核心思想是把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一般来说，递归需要有边界条件、递归前进阶段和递归返回阶段。当边界条件不满足时，递归前进；当边界条件满足时，递归返回"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面实现一个函数 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(x, n)"}]},{"type":"text","value":"，它可以计算 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" 次方"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用迭代的方式，如下："}]},{"type":"element","tag":"code","props":{"code":"function pow(x, n) {\r\n  let result = 1;\r\n\r\n  // 再循环中，用 x 乘以 result n 次\r\n  for (let i = 0; i < n; i++) {\r\n    result *= x;\r\n  }\r\n  return result;\r\n}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pow"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 再循环中，用 x 乘以 result n 次\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"++) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" *= "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用递归的方式，如下："}]},{"type":"element","tag":"code","props":{"code":"function pow(x, n) {\r\n  if (n == 1) {\r\n    return x;\r\n  } else {\r\n    return x * pow(x, n - 1);\r\n  }\r\n}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pow"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pow"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(x, n)"}]},{"type":"text","value":" 被调用时，执行分为两个分支："}]},{"type":"element","tag":"code","props":{"code":"            if n==1  = x\r\n             /\r\npow(x, n) =\r\n             \\\r\n              else     = x * pow(x, n - 1)\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"             /\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pow"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") =\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"             \\\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"     = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pow"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也就是说 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow"}]},{"type":"text","value":" 递归地调用自身 直到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n == 1"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了计算 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(2, 4)"}]},{"type":"text","value":"，递归变体经过了下面几个步骤："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(2, 4) = 2 * pow(2, 3)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(2, 3) = 2 * pow(2, 2)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(2, 2) = 2 * pow(2, 1)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pow(2, 1) = 2"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因此，递归将函数调用简化为一个更简单的函数调用，然后再将其简化为一个更简单的函数，以此类推，直到结果"}]},{"type":"element","tag":"h2","props":{"id":"二尾递归"},"children":[{"type":"text","value":"二、尾递归"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"尾递归，即在函数尾位置调用自身（或是一个尾调用本身的其他函数等等）。尾递归也是递归的一种特殊情形。尾递归是一种特殊的尾调用，即在尾部直接调用自身的递归函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"尾递归在普通尾调用的基础上，多出了2个特征："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在尾部调用的是函数自身"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可通过优化，使得计算仅占用常量栈空间"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在递归调用的过程当中系统为每一层的返回点、局部量等开辟了栈来存储，递归次数过多容易造成栈溢出"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这时候，我们就可以使用尾递归，即一个函数中所有递归形式的调用都出现在函数的末尾，对于尾递归来说，由于只存在一个调用记录，所以永远不会发生\"栈溢出\"错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实现一下阶乘，如果用普通的递归，如下："}]},{"type":"element","tag":"code","props":{"code":"function factorial(n) {\r\n  if (n === 1) return 1;\r\n  return n * factorial(n - 1);\r\n}\r\n\r\nfactorial(5) // 120\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 120"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":"等于5，这个方法要执行5次，才返回最终的计算表达式，这样每次都要保存这个方法，就容易造成栈溢出，复杂度为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"O(n)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果我们使用尾递归，则如下："}]},{"type":"element","tag":"code","props":{"code":"function factorial(n, total) {\r\n  if (n === 1) return total;\r\n  return factorial(n - 1, n * total);\r\n}\r\n\r\nfactorial(5, 1) // 120\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" - "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 120"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以看到，每一次返回的就是一个新的函数，不带上一个函数的参数，也就不需要储存上一个函数了。尾递归只需要保存一个调用栈，复杂度 O(1)"}]},{"type":"element","tag":"h2","props":{"id":"二应用场景"},"children":[{"type":"text","value":"二、应用场景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数组求和"}]},{"type":"element","tag":"code","props":{"code":"function sumArray(arr, total) {\r\n    if(arr.length === 1) {\r\n        return total\r\n    }\r\n    return sum(arr, total + arr.pop())\r\n}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"sumArray"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"pop"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用尾递归优化求斐波那契数列"}]},{"type":"element","tag":"code","props":{"code":"function factorial2 (n, start = 1, total = 1) {\r\n    if(n <= 2){\r\n        return total\r\n    }\r\n    return factorial2 (n -1, total, total + start)\r\n}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" <= "}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"factorial2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"n"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"total"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数组扁平化"}]},{"type":"element","tag":"code","props":{"code":"let a = [1,2,3, [1,2,3, [1,2,3]]]\r\n// 变成\r\nlet a = [1,2,3,1,2,3,1,2,3]\r\n// 具体实现\r\nfunction flat(arr = [], result = []) {\r\n    arr.forEach(v => {\r\n        if(Array.isArray(v)) {\r\n            result = result.concat(flat(v, []))\r\n        }else {\r\n            result.push(v)\r\n        }\r\n    })\r\n    return result\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"]]]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 变成\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-57c2e3"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 具体实现\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"flat"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = [], "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = []) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"isArray"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"concat"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"flat"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", []))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        }"}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数组对象格式化"}]},{"type":"element","tag":"code","props":{"code":"let obj = {\r\n    a: '1',\r\n    b: {\r\n        c: '2',\r\n        D: {\r\n            E: '3'\r\n        }\r\n    }\r\n}\r\n// 转化为如下：\r\nlet obj = {\r\n    a: '1',\r\n    b: {\r\n        c: '2',\r\n        d: {\r\n            e: '3'\r\n        }\r\n    }\r\n}\r\n\r\n// 代码实现\r\nfunction keysLower(obj) {\r\n    let reg = new RegExp(\"([A-Z]+)\", \"g\");\r\n    for (let key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            let temp = obj[key];\r\n            if (reg.test(key.toString())) {\r\n                // 将修改后的属性名重新赋值给temp，并在对象obj内添加一个转换后的属性\r\n                temp = obj[key.replace(reg, function (result) {\r\n                    return result.toLowerCase()\r\n                })] = obj[key];\r\n                // 将之前大写的键属性删除\r\n                delete obj[key];\r\n            }\r\n            // 如果属性是对象或者数组，重新执行函数\r\n            if (typeof temp === 'object' || Object.prototype.toString.call(temp) === '[object Array]') {\r\n                keysLower(temp);\r\n            }\r\n        }\r\n    }\r\n    return obj;\r\n};\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"a:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"b:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"c:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'2'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"D:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"E:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'3'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 转化为如下：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"a:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"b:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"c:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'2'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"d:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"e:"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'3'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 代码实现\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"keysLower"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"reg"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"RegExp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"\"([A-Z]+)\""}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"\"g\""}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"hasOwnProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"temp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"reg"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"())) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 将修改后的属性名重新赋值给temp，并在对象obj内添加一个转换后的属性\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"temp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"reg"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"toLowerCase"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                })] = "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 将之前大写的键属性删除\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-d44284"},"children":[{"type":"text","value":"// 如果属性是对象或者数组，重新执行函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-f6baaf"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"temp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'object'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-bd78c7"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"temp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") === "}]},{"type":"element","tag":"span","props":{"class":"ct-7f5f4f"},"children":[{"type":"text","value":"'[object Array]'"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-47ab08"},"children":[{"type":"text","value":"keysLower"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"temp"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-26d02c"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba5b88"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-c37226"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-bd78c7{color:#4EC9B0}\n.ct-7f5f4f{color:#CE9178}\n.ct-26d02c{color:#C586C0}\n.ct-d44284{color:#6A9955}\n.ct-57c2e3{color:#B5CEA8}\n.ct-ba5b88{color:#9CDCFE}\n.ct-47ab08{color:#DCDCAA}\n.ct-c37226{color:#D4D4D4}\n.ct-f6baaf{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"二尾递归","depth":2,"text":"二、尾递归"},{"id":"二应用场景","depth":2,"text":"二、应用场景"}]}},"_type":"markdown","_id":"content:articles:尾递归的理解，有哪些应用场景.md","_source":"content","_file":"articles/尾递归的理解，有哪些应用场景.md","_extension":"md"},{"_path":"/articles","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"字符串常用方法","description":"","date":"2021-03-05T00:00:00.000Z","tags":["Javascript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"字符串常用方法"},"children":[{"type":"text","value":"字符串常用方法"}]},{"type":"element","tag":"h2","props":{"id":"增"},"children":[{"type":"text","value":"增"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里增的意思并不是说直接增添内容，而是创建字符串的一个副本，再进行操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了常用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"+"}]},{"type":"text","value":"以及 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"${}"}]},{"type":"text","value":"进行字符串拼接之外，还可通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"concat"}]}]},{"type":"element","tag":"h4","props":{"id":"concat"},"children":[{"type":"text","value":"concat"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"用于将一个或多个字符串拼接成一个新字符串"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"hello \";\r\nlet result = stringValue.concat(\"world\");\r\nconsole.log(result); // \"hello world\"\r\nconsole.log(stringValue); // \"hello\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"hello \""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"concat"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"world\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"hello\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"删"},"children":[{"type":"text","value":"删"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里的删的意思并不是说删除原字符串的内容，而是创建字符串的一个副本，再进行操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常见的有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"slice()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"substr()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"substring()"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这三个方法都返回调用它们的字符串的一个子字符串，而且都接收一或两个参数。"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"hello world\";\r\nconsole.log(stringValue.slice(3)); // \"lo world\"\r\nconsole.log(stringValue.substring(3)); // \"lo world\"\r\nconsole.log(stringValue.substr(3)); // \"lo world\"\r\nconsole.log(stringValue.slice(3, 7)); // \"lo w\"\r\nconsole.log(stringValue.substring(3,7)); // \"lo w\"\r\nconsole.log(stringValue.substr(3, 7)); // \"lo worl\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"slice"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"substring"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"substr"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"slice"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo w\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"substring"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo w\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"substr"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"lo worl\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"改"},"children":[{"type":"text","value":"改"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里改的意思也不是改变原字符串，而是创建字符串的一个副本，再进行操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常见的有："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"trim()、trimLeft()、trimRight()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"repeat()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"padStart()、padEnd()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"toLowerCase()、 toUpperCase()"}]}]},{"type":"element","tag":"h4","props":{"id":"trimtrimlefttrimright"},"children":[{"type":"element","tag":"a","props":{"href":"https://vue3js.cn/interview/JavaScript/string_api.html#trim-%E3%80%81trimleft-%E3%80%81trimright","rel":["nofollow"]},"children":[{"type":"text","value":"#"}]},{"type":"text","value":"trim()、trimLeft()、trimRight()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"删除前、后或前后所有空格符，再返回新的字符串"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \" hello world \";\r\nlet trimmedStringValue = stringValue.trim();\r\nconsole.log(stringValue); // \" hello world \"\r\nconsole.log(trimmedStringValue); // \"hello world\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\" hello world \""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"trimmedStringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"trim"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \" hello world \"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"trimmedStringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"hello world\""}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"repeat"},"children":[{"type":"text","value":"repeat()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接收一个整数参数，表示要将字符串复制多少次，然后返回拼接所有副本后的结果"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"na \";\r\nlet copyResult = stringValue.repeat(2) // na na\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"na \""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"copyResult"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"repeat"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// na na"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"padend"},"children":[{"type":"text","value":"padEnd()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"复制字符串，如果小于指定长度，则在相应一边填充字符，直至满足长度条件"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"foo\";\r\nconsole.log(stringValue.padStart(6)); // \" foo\"\r\nconsole.log(stringValue.padStart(9, \".\")); // \"......foo\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"padStart"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \" foo\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"padStart"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"9"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\".\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"......foo\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"tolowercase-touppercase"},"children":[{"type":"text","value":"toLowerCase()、 toUpperCase()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"大小写转化"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"hello world\";\r\nconsole.log(stringValue.toUpperCase()); // \"HELLO WORLD\"\r\nconsole.log(stringValue.toLowerCase()); // \"hello world\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"toUpperCase"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"()); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"HELLO WORLD\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"toLowerCase"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"()); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"hello world\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"查"},"children":[{"type":"text","value":"查"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了通过索引的方式获取字符串的值，还可通过："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"chatAt()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"indexOf()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"startWith()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"includes()"}]}]},{"type":"element","tag":"h4","props":{"id":"charat"},"children":[{"type":"text","value":"charAt()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"返回给定索引位置的字符，由传给方法的整数参数指定"}]},{"type":"element","tag":"code","props":{"code":"let message = \"abcde\";\r\nconsole.log(message.charAt(2)); // \"c\"\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"abcde\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"charAt"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"c\""}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"indexof"},"children":[{"type":"text","value":"indexOf()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从字符串开头去搜索传入的字符串，并返回位置（如果没找到，则返回 -1 ）"}]},{"type":"element","tag":"code","props":{"code":"let stringValue = \"hello world\";\r\nconsole.log(stringValue.indexOf(\"o\")); // 4\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"hello world\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"stringValue"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"indexOf"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"o\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// 4"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"startwithincludes"},"children":[{"type":"text","value":"startWith()、includes()"}]},{"type":"element","tag":"code","props":{"code":"let message = \"foobarbaz\";\r\nconsole.log(message.startsWith(\"foo\")); // true\r\nconsole.log(message.startsWith(\"bar\")); // false\r\nconsole.log(message.includes(\"bar\")); // true\r\nconsole.log(message.includes(\"qux\")); // false\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"foobarbaz\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"foo\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"bar\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"includes"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"bar\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"includes"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"qux\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":")); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// false"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"二转换方法"},"children":[{"type":"text","value":"二、转换方法"}]},{"type":"element","tag":"h3","props":{"id":"split"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把字符串按照指定的分割符，拆分成数组中的每一项"}]},{"type":"element","tag":"code","props":{"code":"let str = \"12+23+34\"\r\nlet arr = str.split(\"+\") // [12,23,34]\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"12+23+34\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"+\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// [12,23,34]"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"三模板匹配方法"},"children":[{"type":"text","value":"三、模板匹配方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"针对正则表达式，字符串设计了几个方法："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"match()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"search()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"replace()"}]}]},{"type":"element","tag":"h3","props":{"id":"match"},"children":[{"type":"text","value":"match()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接收一个参数，可以是一个正则表达式字符串，也可以是一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RegExp"}]},{"type":"text","value":"对象，返回数组"}]},{"type":"element","tag":"code","props":{"code":"let text = \"cat, bat, sat, fat\";\r\nlet pattern = /.at/;\r\nlet matches = text.match(pattern);\r\nconsole.log(matches[0]); // \"cat\"\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"cat, bat, sat, fat\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"pattern"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b13"},"children":[{"type":"text","value":" /.at/"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"matches"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"match"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"pattern"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"matches"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-91431e"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"]); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"cat\""}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"search"},"children":[{"type":"text","value":"search()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接收一个参数，可以是一个正则表达式字符串，也可以是一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RegExp"}]},{"type":"text","value":"对象，找到则返回匹配索引，否则返回 -1"}]},{"type":"element","tag":"code","props":{"code":"let text = \"cat, bat, sat, fat\";\r\nlet pos = text.search(/at/);\r\nconsole.log(pos); // 1\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"cat, bat, sat, fat\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"pos"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"search"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b13"},"children":[{"type":"text","value":"/at/"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"pos"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// 1"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"replace"},"children":[{"type":"text","value":"replace()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接收两个参数，第一个参数为匹配的内容，第二个参数为替换的元素（可用函数）"}]},{"type":"element","tag":"code","props":{"code":"let text = \"cat, bat, sat, fat\";\r\nlet result = text.replace(\"at\", \"ond\");\r\nconsole.log(result); // \"cond, bat, sat, fat\"\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"cat, bat, sat, fat\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-def0aa"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"at\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bfc0d7"},"children":[{"type":"text","value":"\"ond\""}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6366e4"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-adc15f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-fbf2bb"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-992122"},"children":[{"type":"text","value":"// \"cond, bat, sat, fat\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ed8b13{color:#D16969}\n.ct-91431e{color:#B5CEA8}\n.ct-992122{color:#6A9955}\n.ct-6366e4{color:#DCDCAA}\n.ct-bfc0d7{color:#CE9178}\n.ct-adc15f{color:#9CDCFE}\n.ct-fbf2bb{color:#D4D4D4}\n.ct-def0aa{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"增","depth":2,"text":"增"},{"id":"删","depth":2,"text":"删"},{"id":"改","depth":2,"text":"改","children":[{"id":"tolowercase-touppercase","depth":3,"text":"toLowerCase()、 toUpperCase()"},{"id":"查","depth":3,"text":"查"}]},{"id":"二转换方法","depth":2,"text":"二、转换方法","children":[{"id":"split","depth":3,"text":"split"}]},{"id":"三模板匹配方法","depth":2,"text":"三、模板匹配方法","children":[{"id":"match","depth":3,"text":"match()"},{"id":"search","depth":3,"text":"search()"},{"id":"replace","depth":3,"text":"replace()"}]}]}},"_type":"markdown","_id":"content:articles:字符串常用方法.md","_source":"content","_file":"articles/字符串常用方法.md","_extension":"md"},{"_path":"/articles/core-web-vitals","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Core Web Vitals性能优化","description":"","date":"2023-11-21T00:00:00.000Z","tags":["公共JS"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Core Web Vitals（核心网络性能指标）是由谷歌提出的一组用于评估网站用户体验的重要性能指标。这些指标主要关注网页加载速度、交互性和视觉稳定性，是评估用户感知的关键因素。Core Web Vitals的目标是帮助网站所有者和开发者更好地理解和优化其网站，以提供更好的用户体验。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"包含以下三个指标:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如下图所示："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://cdn.jsdelivr.net/gh//Dorr-hlc/pic.bed@main/360%E6%88%AA%E5%9B%BE18720121104141143.png"},"children":[]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Largest Contentful Paint (LCP)"}]},{"type":"text","value":" （最大内容绘制时间）：衡量页面加载速度的指标，表示从用户点击链接到页面上最大的可见元素完全呈现的时间。理想情况下，LCP应在用户点击后的 2.5 秒内发生。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"First Input Delay (FID)"}]},{"type":"text","value":" （首次输入延迟）：衡量页面的交互性，表示用户首次与页面交互（点击链接、按钮等）到浏览器实际响应的时间。理想情况下，FID应在 100 毫秒以内。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Cumulative Layout Shift (CLS)"}]},{"type":"text","value":" （累积布局偏移）：衡量页面的视觉稳定性，表示在页面加载过程中元素发生不可预测的布局变化的总和。CLS 应小于 0.1，以确保页面不会因为元素的突然移动而导致用户体验不佳。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这些指标为网站提供了一种评估用户体验的标准，帮助开发者识别和解决页面性能问题。特别是在搜索引擎优化（SEO）方面，Core Web Vitals的表现也对网站在谷歌搜索结果中的排名产生影响。因此，关注和优化这些核心指标对于提升网站性能和用户体验至关重要。"}]},{"type":"element","tag":"h2","props":{"id":"html-性能的一般注意事项"},"children":[{"type":"text","value":"HTML 性能的一般注意事项"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"尽量减少重定向"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"缓存html响应"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"衡量服务器的响应时间"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"压缩资源文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优化资源加载"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为公司目前的网站页面几乎都是用纯静态的html去编写的，因此我们能做的也就是第4点压缩资源文件和第5点优化资源加载。针对以上这两点我们需要做哪些？"}]},{"type":"element","tag":"h3","props":{"id":"压缩资源文件"},"children":[{"type":"text","value":"压缩资源文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所谓的资源文件无非就是css,js,image,其中image占用空间的大小最多，因此从压缩资源文件我们需要做如下几点。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在编写less文件的时候使用easy less插件的时候应该将其设置为自动压缩。如下图："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://cdn.jsdelivr.net/gh//Dorr-hlc/pic.bed@main/20231123154433.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.压缩图片"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之前的png图片，部分背景图甚至高达1.3m，因此我们在使用图片的时候还是要注意下图片的大小，图片太大的要进行适量的压缩，以下是我使用比较多的在线压缩网站（"},{"type":"element","tag":"a","props":{"href":"https://tinypng.com/%EF%BC%89","rel":["nofollow"]},"children":[{"type":"text","value":"https://tinypng.com/）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://cdn.jsdelivr.net/gh//Dorr-hlc/pic.bed@main/20231123154959.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"优化资源加载"},"children":[{"type":"text","value":"优化资源加载"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实现对资源的优化加载对性能的评分也是非常重要的，以下是我目前发现公司网站中能够优化的点："}]},{"type":"element","tag":"h4","props":{"id":"图片相关"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"图片相关"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"1.非必要不使用雪碧图"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以UB首页为例，如下图，我使用了一个搜索的icon，这里却需要引入一张70多kb的图片，而这张精灵图的其他的icon在当前网页中并没有使用，因此对于此类较小的icon图,推荐单个的svg图或者.webp图"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://cdn.jsdelivr.net/gh//Dorr-hlc/pic.bed@main/20231123160211.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2.延迟图片请求"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以将 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/iframe#attributes","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":" 属性"}]},{"type":"text","value":"添加到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素中，以告知浏览器应如何加载它们："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"eager\""}]},{"type":"text","value":" 会通知浏览器应立即加载图片，即使图片位于初始视口之外也是如此。这也是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":" 属性的默认值。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"lazy\""}]},{"type":"text","value":" 会延迟加载图片，直到图片在与可见视口的距离内。此距离因浏览器而异，但通常设置得足够大，以便在用户滚动到图片时加载图片。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"重要提示"}]},{"type":"text","value":" ：如前所述，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":" 属性时，浏览器判定需要使用相应图片的"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/browser-level-image-lazy-loading?hl=zh-cn#distance-from-viewport_thresholds","rel":["nofollow"]},"children":[{"type":"text","value":"视口距离"}]},{"type":"text","value":"因浏览器而异。涉及的因素可能包括"},{"type":"element","tag":"a","props":{"href":"https://googlechrome.github.io/samples/network-information/","rel":["nofollow"]},"children":[{"type":"text","value":"有效连接类型"}]},{"type":"text","value":"以及映像类型。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"另外值得注意的是，如果您使用的是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<picture>"}]},{"type":"text","value":" 元素，则 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":" 属性仍应应用于其子级 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素，而不是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<picture>"}]},{"type":"text","value":" 元素本身。这是因为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<picture>"}]},{"type":"text","value":" 元素是一个容器，其中包含指向不同候选图片的额外 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<source>"}]},{"type":"text","value":" 元素，并且浏览器选择的候选图片直接应用于其子级 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素。而我们网站目前正在使用的是lazysizes.min.js插件实现加载视口区域的图片，并且支持响应式，具体的使用方式请自行查阅。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"提示："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请勿延迟加载初始视口中的图片，也就是我们所熟悉的banner区域，在这个区域中的图片尽量不使用懒加载，只能向位于初始视口之外的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素添加 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":" 属性。不过，在呈现网页之前了解元素在视口中的确切位置可能会很复杂。必须考虑不同的视口尺寸、宽高比和设备。因此，在某些情况下，您应该避免应用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":"，这非常明显。例如，如果是主打图片，或是在任何设备上，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素可能展示在首屏或布局顶部，您都应该从 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素中省略 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":" 属性。这"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/lcp-lazy-loading?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"对于可能是 LCP 候选项的图片更为重要"}]},{"type":"text","value":"。切勿为“首屏”图片指定 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":"，因为将请求延迟到网页呈现之后，可能会对您的 LCP 得分产生巨大的负面影响。其次，使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetchpriority=\"high\""}]},{"type":"text","value":" 可以告知浏览器此图片的传输优先级高于网页上其他位置的图片。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"延迟加载的图片需要等待浏览器完成布局"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/howbrowserswork?hl=zh-cn#layout","rel":["nofollow"]},"children":[]},{"type":"text","value":"，以便了解图片的最终位置是否位于视口内。这意味着，如果可见视口中的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素具有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading=\"lazy\""}]},{"type":"text","value":" 属性，则只有在所有 CSS 已下载、解析并应用到页面之后才会请求该属性，而不是在"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/preload-scanner?hl=zh-cn#whats_a_preload_scanner","rel":["nofollow"]},"children":[{"type":"text","value":"在原始标记中被预加载扫描程序发现"}]},{"type":"text","value":"后立即提取。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于所有主流浏览器都支持 "},{"type":"element","tag":"a","props":{"href":"https://caniuse.com/loading-lazy-attr","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 元素上的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":" 属性"}]},{"type":"text","value":"，因此无需使用 JavaScript 延迟加载图片，因为向网页添加额外的 JavaScript 来提供浏览器已提供的功能会影响网页性能的其他方面（例如 INP）。"}]},{"type":"element","tag":"h5","props":{"id":"javascript-延迟加载库"},"children":[{"type":"text","value":"JavaScript 延迟加载库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"需要延迟加载 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<video>"}]},{"type":"text","value":" 元素、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<video>"}]},{"type":"text","value":" 元素 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"poster"}]},{"type":"text","value":" 图片、CSS "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"background-image"}]},{"type":"text","value":" 属性加载的图片或其他不受支持的元素，可以使用基于 JavaScript 的延迟加载解决方案（例如 "},{"type":"element","tag":"a","props":{"href":"https://github.com/aFarkas/lazysizes","rel":["nofollow"]},"children":[{"type":"text","value":"lazysizes"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"a","props":{"href":"https://github.com/malchata/yall.js","rel":["nofollow"]},"children":[{"type":"text","value":"yall.js"}]},{"type":"text","value":"）执行此操作，因为延迟加载这些类型的资源并不是浏览器级别的功能。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体而言，在没有音轨的情况下自动播放和循环播放 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<video>"}]},{"type":"text","value":" 元素"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/replace-gifs-with-videos?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"比使用动画 GIF 更高效"}]},{"type":"text","value":"，后者往往比具有同等视觉效果的视频资源大好几倍。即便如此，这些视频在带宽方面仍然非常重要，因此延迟加载它们是一种额外的优化，可以在很大程度上减少浪费的带宽。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中大多数库通过使用 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/API/Intersection_Observer_API","rel":["nofollow"]},"children":[{"type":"text","value":"Intersection Observer API"}]},{"type":"text","value":" 以及 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/API/MutationObserver","rel":["nofollow"]},"children":[{"type":"text","value":"Mutation Observer API"}]},{"type":"text","value":"（如果网页的 HTML 在初始加载后发生变化）来识别元素何时进入用户视口。如果图片可见或接近视口，则 JavaScript 库会使用正确的属性（例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src"}]},{"type":"text","value":"）替换非标准属性（通常是 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data-src"}]},{"type":"text","value":" 或类似属性）。举例如下："}]},{"type":"element","tag":"code","props":{"code":"            <img data-src=\"/assets/images/download/v2/ab-download-img-version@2x.png\" class=\"lazyload\" width=\"468\"\r\n                height=\"300\" alt=\"\" srcset=\"\">\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"data-src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"/assets/images/download/v2/ab-download-img-version@2x.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"lazyload\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"468\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"300\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"srcset"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"衡量图片的影响"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里涉及到一个累计布局偏移，"},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/cls?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"Cumulative Layout Shift"}]},{"type":"text","value":" (CLS) 是衡量视觉稳定性的指标。它是一项指标，用于捕获在资源加载和网页呈现时，网页上内容布局的偏移程度。由于延迟网页字体或图片来源突然呈现，或者互动元素突然从指针移开，因此任何花费大量时间使用网页的用户都因为页面“跳跃”而失去位置。高 CLS 最多是一种麻烦，在最坏的情况下是会导致用户出错的原因：例如，在用户点击时，“取消”按钮会转移到以前由“确认”按钮占用的空间。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于加载时间较长以及它们在布局中可占据的空间量很大，这表明图片是导致 CLS 得分较高的常见原因。因此，应始终对 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"height"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"width"}]},{"type":"text","value":" 属性，其值与图片来源的固有尺寸匹配，前提是您确保指定了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"height: auto"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"max-width: 100%"}]},{"type":"text","value":" 来替换 HTML 属性中的高度。"}]},{"type":"element","tag":"code","props":{"code":"<img src=\"image.jpg\"height=\"200\"width=\"400\"alt=\"…\">\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"image.jpg\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"200\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"400\""}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"…\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"\r\nimg {\r\n  max-width:100%;\r\n  height: auto;\r\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b2b7c"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"max-width"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-31d2c9"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"auto"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"关于img标签的使用优化"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"添加图片的主要方法是 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/img","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]}]},{"type":"text","value":" 标记（通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src"}]},{"type":"text","value":" 属性引用图片资源）和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"alt"}]},{"type":"text","value":" 属性（用于描述图片）。"}]},{"type":"element","tag":"code","props":{"code":"<img src=\"images/eve.png\" alt=\"Eve\">\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"Eve\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]},{"type":"text","value":" 上的 "},{"type":"element","tag":"a","props":{"href":"https://web.dev/learn/images/descriptive?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"srcset"}]}]},{"type":"text","value":" 属性和 "},{"type":"element","tag":"a","props":{"href":"https://web.dev/learn/images/prescriptive?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<picture>"}]}]},{"type":"text","value":" 元素都提供了一种方法，可包含多个具有关联媒体查询的图片来源，每个图片来源都有一个后备图片来源，以便根据设备的分辨率、浏览器功能和视口尺寸提供最合适的图片文件。借助 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"srcset"}]},{"type":"text","value":" 属性，您可以根据分辨率、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sizes"}]},{"type":"text","value":" 属性和浏览器视口大小提供多个图片版本。"}]},{"type":"element","tag":"code","props":{"code":"<img src=\"images/eve.png\" alt=\"Eve\"\r\n  srcset=\"images/eve.png 400w, images/eve-xl.jpg 800w\"\r\n  sizes=\"(max-width: 800px) 400px, 800px\" />\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"Eve\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"srcset"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve.png 400w, images/eve-xl.jpg 800w\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"sizes"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"(max-width: 800px) 400px, 800px\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"/>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也可以使用 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/picture","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<picture>"}]}]},{"type":"text","value":" 元素以及 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/picture","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<source>"}]}]},{"type":"text","value":" 子元素（将 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/img","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<img>"}]}]},{"type":"text","value":" 作为默认来源）来完成此操作"}]},{"type":"element","tag":"code","props":{"code":"<picture>\r\n  <source src=\"images/eve.png\" media=\"(max-width: 800px)\" />\r\n  <source src=\"images/eve-xl.jpg\" />\r\n  <img src=\"images/eve.png\" alt=\"Eve\" />\r\n</picture>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"picture"}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"media"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"(max-width: 800px)\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve-xl.jpg\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"images/eve.png\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"Eve\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"picture"}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意：如果图片属于 SVG 文件类型，还应添加 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/Accessibility/ARIA/Roles/Img_role","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"role=\"img\""}]}]},{"type":"text","value":"。"}]}]},{"type":"element","tag":"code","props":{"code":"  <img src=\"switch.svg\" alt=\"light switch\" role=\"img\"/>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"switch.svg\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"light switch\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"role"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"img\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"/>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"移动端图片的优化"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过媒体查询将背景图设置为当前主题相近的颜色。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"隐藏非必要的大图，减少图片资源的加载"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"采用响应式图片，在移动不使用2倍图，或者采用分辨率更低的图片。"}]}]},{"type":"element","tag":"h4","props":{"id":"优化网络字体"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"优化网络字体"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"网页字体在加载和呈现时都会影响网页性能。较大的字体文件可能需要一段时间才能下载，并且会对 "},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/fcp?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"First Contentful Paint (FCP)"}]},{"type":"text","value":" 产生负面影响，而不正确的 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/CSS/@font-face/font-display","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"font-display"}]},{"type":"text","value":" 值"}]},{"type":"text","value":"可能会导致导致网页的不良布局偏移，从而造成页面的 "},{"type":"element","tag":"a","props":{"href":"https://web.dev/articles/cls?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"Cumulative Layout Shift (CLS)"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"页面的网页字体是使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明在样式表中定义的："}]},{"type":"element","tag":"code","props":{"code":"@font-face {\r\n  font-family:\"Open Sans\";\r\n  src:url(\"/fonts/OpenSans-Regular-webfont.woff2\") format(\"woff2\");\r\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-e3e9d5"},"children":[{"type":"text","value":"@font-face"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"font-family"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"Open Sans\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3a1689"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"/fonts/OpenSans-Regular-webfont.woff2\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-3a1689"},"children":[{"type":"text","value":"format"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"woff2\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述代码段定义了一个名为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"Open Sans\""}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"font-family"}]},{"type":"text","value":"，并告知浏览器在哪里可以找到相应的网页字体资源。为了节省带宽，在确定当前页面的布局需要网页字体之前，浏览器不会下载网页字体。"}]},{"type":"element","tag":"code","props":{"code":"h1 {\r\n  font-family:\"Open Sans\";\r\n}\n","language":"css","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-5b2b7c"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"font-family"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"Open Sans\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在上述 CSS 代码段中，浏览器会在解析页面 HTML 中的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<h1>"}]},{"type":"text","value":" 元素时下载 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"Open Sans\""}]},{"type":"text","value":" 字体文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明是在外部样式表中定义的，浏览器只能在下载样式表后开始下载。这会使网页字体的发现时间较晚，但也有办法帮助浏览器更快地发现网页字体。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"您可以使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令发起针对网页字体资源的提前请求。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令可在网页加载早期阶段发现网页字体，浏览器会立即开始下载这些字体，无需等待样式表完成下载和解析。"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令不会等到网页上需要相应字体时再执行。"}]},{"type":"element","tag":"code","props":{"code":"<!-- The `crossorigin` attribute is required for fonts—even\r\n     self-hosted ones, as fonts are considered CORS resources. -->\r\n<linkrel=\"preload\"as=\"font\"href=\"/fonts/OpenSans-Regular-webfont.woff2\"crossorigin>\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- The `crossorigin` attribute is required for fonts—even\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"     self-hosted ones, as fonts are considered CORS resources. -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<linkrel=\"preload\"as=\"font\"href=\"/fonts/OpenSans-Regular-webfont.woff2\"crossorigin>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意"}]},{"type":"text","value":" ：应谨慎使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令。过度使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令可能会转移其他关键资源的带宽。如果使用过度，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 指令可能会下载当前网页不需要的字体"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此外，请务必注意，字体属于 CORS 资源。因此，在预加载字体时，即使它们是自托管的，您"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"必须"}]},{"type":"text","value":"指定 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"crossorigin"}]},{"type":"text","value":" 属性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内嵌 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过使用 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTML/Element/style","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<style>"}]},{"type":"text","value":" 元素"}]},{"type":"text","value":"，您可以在 HTML 的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<head>"}]},{"type":"text","value":" 中内嵌会阻止渲染的 CSS（包括 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明），从而在网页加载期间提早发现字体。在这种情况下，浏览器会在网页加载的早期发现网页字体，因为它不需要等待外部样式表下载。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意"}]},{"type":"text","value":" ：只有在所有阻塞渲染的资源加载完毕后，浏览器才会开始下载字体文件。这意味着，如果您已内联 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明，但其余 CSS 在外部样式表中，那么浏览器仍然需要等待外部样式表下载完毕。与使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preload"}]},{"type":"text","value":" 提示相比，内嵌 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@font-face"}]},{"type":"text","value":" 声明的优势在于，因为浏览器只会下载呈现当前网页所需的字体。这样可以消除下载未使用的字体的风险。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"目前我们改版的网页使用一般都是自托管字体，通过第三方服务（例如 "},{"type":"element","tag":"a","props":{"href":"https://fonts.google.com/?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"Google Fonts"}]},{"type":"text","value":"）提供，也可以在您的源站上自行托管。使用第三方服务时，您的网页需要先与提供商的网域建立连接，然后才能开始下载所需的网页字体。这可能会导致网页字体的发现和后续下载延迟。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preconnect"}]},{"type":"text","value":" 资源提示可以减少此开销。借助 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preconnect"}]},{"type":"text","value":"，您可以告知浏览器比浏览器通常尽快打开跨源连接："}]},{"type":"element","tag":"code","props":{"code":"    <!-- font -->\r\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\r\n    <link href=\"https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap\" rel=\"stylesheet\">\r\n    <!-- font -->\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-856004"},"children":[{"type":"text","value":"<!-- font -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"rel"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"preconnect\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"https://fonts.googleapis.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"rel"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"preconnect\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"https://fonts.gstatic.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"crossorigin"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d50c2e"},"children":[{"type":"text","value":"link"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap\""}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfd0ac"},"children":[{"type":"text","value":"rel"}]},{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92d8f3"},"children":[{"type":"text","value":"\"stylesheet\""}]},{"type":"element","tag":"span","props":{"class":"ct-037266"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1a698"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-856004"},"children":[{"type":"text","value":"<!-- font -->"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述 HTML 代码段会提示浏览器与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fonts.googleapis.com"}]},{"type":"text","value":" 建立连接并与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fonts.gstatic.com"}]},{"type":"text","value":" 建立 "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/docs/Web/HTTP/CORS","rel":["nofollow"]},"children":[{"type":"text","value":"CORS"}]},{"type":"text","value":" 连接。某些字体提供程序（如 Google Fonts）会提供来自不同来源的 CSS 和字体资源。"}]},{"type":"element","tag":"h2","props":{"id":"总结"},"children":[{"type":"text","value":"总结"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上就是我最近对网页性能优化的一些粗略的总结，上述的方法优化之后已经能够使当前的网页性能分数前进一大步，但是具体能做的还有很多,参照以下，比如对js的优化之类的，部分资源的预加载等,以下就是对上线页面的性能测试地址以及其他的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"测试性能网址："},{"type":"element","tag":"a","props":{"href":"https://pagespeed.web.dev/?sjid=7722822665498084982-AP","rel":["nofollow"]},"children":[{"type":"text","value":"https://pagespeed.web.dev/?sjid=7722822665498084982-AP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"网页性能文档："},{"type":"element","tag":"a","props":{"href":"https://web.dev/learn/images","rel":["nofollow"]},"children":[{"type":"text","value":"https://web.dev/learn/images"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-856004{color:#6A9955}\n.ct-3a1689{color:#DCDCAA}\n.ct-e3e9d5{color:#C586C0}\n.ct-31d2c9{color:#B5CEA8}\n.ct-5b2b7c{color:#D7BA7D}\n.ct-92d8f3{color:#CE9178}\n.ct-bfd0ac{color:#9CDCFE}\n.ct-d50c2e{color:#569CD6}\n.ct-037266{color:#808080}\n.ct-f1a698{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"背景","depth":2,"text":"背景"},{"id":"html-性能的一般注意事项","depth":2,"text":"HTML 性能的一般注意事项","children":[{"id":"压缩资源文件","depth":3,"text":"压缩资源文件"},{"id":"优化资源加载","depth":3,"text":"优化资源加载"}]},{"id":"总结","depth":2,"text":"总结"}]}},"_type":"markdown","_id":"content:articles:Core-Web-Vitals优化.md","_source":"content","_file":"articles/Core-Web-Vitals优化.md","_extension":"md"},{"_path":"/articles/css","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"css常用动画效果","description":"文字跳动","date":"2022-07-08T00:00:00.000Z","tags":["css"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"文字跳动"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HTML"}]}]},{"type":"element","tag":"code","props":{"code":"\r\n    <div class=\"bounce\">\r\n        <span class=\"letter\">n</span>\r\n        <span class=\"letter\">e</span>\r\n        <span class=\"letter\">w</span>\r\n\r\n    </div>\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"\"bounce\""}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"\"letter\""}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">n</"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"\"letter\""}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">e</"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" class="}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"\"letter\""}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">w</"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CSS"}]}]},{"type":"element","tag":"code","props":{"code":"        html,\r\n        body {\r\n            width: 100%;\r\n            height: 100%;\r\n            margin: 0;\r\n            background: #2d303a;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .bounce {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            width: 100%;\r\n            color: white;\r\n            height: 100%;\r\n            font: normal bold 6rem \"Product Sans\", sans-serif;\r\n            white-space: nowrap;\r\n        }\r\n\r\n        .letter {\r\n            animation: bounce .3s cubic-bezier(0.05, 0, 0.2, 1) infinite alternate;\r\n            display: inline-block;\r\n            transform: translate3d(0, 0, 0);\r\n            margin-top: 0.5em;\r\n            text-shadow: rgba(255, 255, 255, 0.4) 0 0 0.05em;\r\n            font: normal 500 6rem 'Varela Round', sans-serif;\r\n        }\r\n\r\n        .letter:nth-child(1) {\r\n            animation-delay: 0s;\r\n        }\r\n\r\n        .letter:nth-child(2) {\r\n            animation-delay: 0.2s;\r\n        }\r\n\r\n        .letter:nth-child(3) {\r\n            animation-delay: 0.3s;\r\n        }\r\n\r\n        @keyframes bounce {\r\n            0% {\r\n                transform: translateY(0em)\r\n                /* text-shadow: rgba(255, 255, 255, 0.4) 0 0 0.05em; */\r\n            }\r\n\r\n            100% {\r\n                transform: translateY(-0.05em)\r\n                /* text-shadow: rgba(255, 255, 255, 0.4) 0 1em 0.35em; */\r\n            }\r\n        }\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"margin"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"background"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"#2d303a"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"overflow"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"hidden"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":".bounce"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"flex"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"align-items"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"justify-content"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"center"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"width"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"white"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"height"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"font"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"normal"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"bold"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"6rem"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"\"Product Sans\""}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"sans-serif"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"white-space"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"nowrap"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":".letter"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"animation"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": bounce "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":".3s"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"cubic-bezier"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.05"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.2"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"infinite"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"alternate"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"inline-block"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"translate3d"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"margin-top"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.5em"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"text-shadow"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"rgba"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"255"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.4"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.05em"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"font"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"normal"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"6rem"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"'Varela Round'"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1cfcee"},"children":[{"type":"text","value":"sans-serif"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":".letter:nth-child"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"animation-delay"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0s"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":".letter:nth-child"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"animation-delay"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.2s"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf5c3"},"children":[{"type":"text","value":".letter:nth-child"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"animation-delay"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0.3s"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-00d1f2"},"children":[{"type":"text","value":"@keyframes"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"bounce"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"0%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"translateY"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"0em"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6efee7"},"children":[{"type":"text","value":"/* text-shadow: rgba(255, 255, 255, 0.4) 0 0 0.05em; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"100%"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-fe691a"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a06d"},"children":[{"type":"text","value":"translateY"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b6e376"},"children":[{"type":"text","value":"-0.05em"}]},{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6efee7"},"children":[{"type":"text","value":"/* text-shadow: rgba(255, 255, 255, 0.4) 0 1em 0.35em; */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-a942e6"},"children":[{"type":"text","value":"        }"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6efee7{color:#6A9955}\n.ct-00d1f2{color:#C586C0}\n.ct-f5a06d{color:#DCDCAA}\n.ct-b6e376{color:#B5CEA8}\n.ct-fe691a{color:#9CDCFE}\n.ct-1cfcee{color:#CE9178}\n.ct-fcf5c3{color:#D7BA7D}\n.ct-a942e6{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:css常用动画.md","_source":"content","_file":"articles/css常用动画.md","_extension":"md"},{"_path":"/articles/empxremvhvw","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"em,px,rem,vh,vw区别","description":"传统的项目开发中，我们只会用到px、%、em这几个单位，它可以适用于大部分的项目开发，且拥有比较良好的兼容性","date":"2023-08-31T00:00:00.000Z","tags":["css"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"传统的项目开发中，我们只会用到px、%、em这几个单位，它可以适用于大部分的项目开发，且拥有比较良好的兼容性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一、介绍\r\n传统的项目开发中，我们只会用到px、%、em这几个单位，它可以适用于大部分的项目开发，且拥有比较良好的兼容性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从CSS3开始，浏览器对计量单位的支持又提升到了另外一个境界，新增了rem、vh、vw、vm等一些新的计量单位"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"利用这些新的单位开发出比较良好的响应式页面，适应多种不同分辨率的终端，包括移动设备等"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#二、单位\r\n在css单位中，可以分为长度单位、绝对单位，如下表所指示"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"CSS单位\r\n相对长度单位\tem、ex、ch、rem、vw、vh、vmin、vmax、%\r\n绝对长度单位\tcm、mm、in、px、pt、pc\r\n这里我们主要讲述px、em、rem、vh、vw"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#px\r\npx，表示像素，所谓像素就是呈现在我们显示器上的一个个小点，每个像素点都是大小等同的，所以像素为计量单位被分在了绝对长度单位中"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有些人会把px认为是相对长度，原因在于在移动端中存在设备像素比，px实际显示的大小是不确定的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里之所以认为px为绝对单位，在于px的大小和元素的其他属性无关"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#em\r\nem是相对长度单位。相对于当前对象内文本的字体尺寸。如当前对行内文本的字体尺寸未被人为设置，则相对于浏览器的默认字体尺寸（1em = 16px）"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了简化 font-size 的换算，我们需要在css中的 body 选择器中声明font-size= 62.5%，这就使 em 值变为 16px*62.5% = 10px"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样 12px = 1.2em, 10px = 1em, 也就是说只需要将你的原来的px 数值除以 10，然后换上 em作为单位就行了"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"特点："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"em 的值并不是固定的\r\nem 会继承父级元素的字体大小\r\nem 是相对长度单位。相对于当前对象内文本的字体尺寸。如当前对行内文本的字体尺寸未被人为设置，则相对于浏览器的默认字体尺寸\r\n任意浏览器的默认字体高都是 16px\r\n举个例子"}]},{"type":"element","tag":"div","props":{"className":["big"]},"children":[{"type":"text","value":"\n    我是14px=1.4rem"},{"type":"element","tag":"div","props":{"className":["small"]},"children":[{"type":"text","value":"我是12px=1.2rem"}]}]},{"type":"text","value":"\n样式为\n"},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"\n    html {font-size: 10px;  } /*  公式16px*62.5%=10px  */  \n    .big{font-size: 1.4rem}\n    .small{font-size: 1.2rem}\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这时候.big元素的font-size为14px，而.small元素的font-size为12px"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#rem\r\nrem，相对单位，相对的只是HTML根元素font-size的值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"同理，如果想要简化font-size的转化，我们可以在根元素html中加入font-size: 62.5%"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"html {font-size: 62.5%;  } /*  公式16px*62.5%=10px  */\r\n这样页面中1rem=10px、1.2rem=12px、1.4rem=14px、1.6rem=16px;使得视觉、使用、书写都得到了极大的帮助"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"特点："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"rem单位可谓集相对大小和绝对大小的优点于一身\r\n和em不同的是rem总是相对于根元素，而不像em一样使用级联的方式来计算尺寸\r\n#vh、vw\r\nvw ，就是根据窗口的宽度，分成100等份，100vw就表示满宽，50vw就表示一半宽。（vw 始终是针对窗口的宽），同理，vh则为窗口的高度"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里的窗口分成几种情况："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在桌面端，指的是浏览器的可视区域"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"移动端指的就是布局视口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"像vw、vh，比较容易混淆的一个单位是%，不过百分比宽泛的讲是相对于父元素："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于普通定位元素就是我们理解的父元素\r\n对于position: absolute;的元素是相对于已定位的父元素\r\n对于position: fixed;的元素是相对于 ViewPort（可视窗口）\r\n#三、总结\r\npx：绝对单位，页面按精确像素展示"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"em：相对单位，基准点为父节点字体的大小，如果自身定义了font-size按自身来计算，整个页面内1em不是一个固定的值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"rem：相对单位，可理解为root em, 相对根节点html的字体大小来计算"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vh、vw：主要用于页面视口大小布局，在页面布局上更加方便简单"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:em,px,rem,vh,vw区别.md","_source":"content","_file":"articles/em,px,rem,vh,vw区别.md","_extension":"md"},{"_path":"/articles/es6","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"es6入门知识点总结","description":"本篇博客主要是对es6基础知识点的学习总结","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对es6基础知识点的学习总结"}]}]},"date":"2021-06-30T00:00:00.000Z","tags":["es6","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇博客主要是对es6基础知识点的学习总结"}]},{"type":"element","tag":"h1","props":{"id":"let和const命令"},"children":[{"type":"text","value":"let和const命令"}]},{"type":"element","tag":"h2","props":{"id":"let基础用法"},"children":[{"type":"text","value":"let基础用法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ES6新增了let命令，用来声明变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效。"}]},{"type":"element","tag":"code","props":{"code":"{\r\nlet a = hlc;\r\nvar b = 1;\r\n}\r\na // ReferenceError: a is not defined.\r\nb // 1\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"hlc"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// ReferenceError: a is not defined.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的代码证明let声明的变量只能在它所在的代码块区域有效，在此之外时不能访问到，而var声明的变量可以。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"适用let的场景比如for循环:"}]},{"type":"element","tag":"code","props":{"code":"for (let i = 0; i < arr.length; i++) {}\r\nconsole.log(i);\r\n//ReferenceError: i is not defined\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9f3b"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"++) {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-55eae7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"//ReferenceError: i is not defined"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"下面的代码如果使用var，最后输出的是10。"}]},{"type":"element","tag":"code","props":{"code":"var a = [];\r\nfor (var i = 0; i < 10; i++) {\r\na[i] = function () {\r\nconsole.log(i);\r\n};\r\n}\r\na[6](); // 10\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = [];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9f3b"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"++) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-55eae7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"](); "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// 10\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码中，变量i是var声明的，在全局范围内都有效。所以每一次循环，新的i值都会覆盖旧值，导致最后输出的是最后一轮的i的值。\r\n如果使用let，声明的变量仅在块级作用域内有效，最后输出的是6。"}]},{"type":"element","tag":"code","props":{"code":"var a = [];\r\nfor (let i = 0; i < 10; i++) {\r\na[i] = function () {\r\nconsole.log(i);\r\n};\r\n}\r\na[6](); // 6\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = [];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9f3b"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"++) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] = "}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-55eae7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"](); "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// 6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[]}]}]}]},{"type":"element","tag":"h3","props":{"id":"注意点"},"children":[{"type":"text","value":"注意点"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"不存在变量提升"}]},{"type":"text","value":"：let不像var 那样存在变量提升的现象，所以一定要在声明之后使用，否则会报错"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"暂时性死区"}]},{"type":"text","value":": 只要块级作用域存在let声明的变量，那么它所声明的变量就会“绑定”当前的区域，不在受外部的影响。比如我提前声明一个全局变量a,然后是我在函数内部再用let去声明一个a,并且在let声明之前去调用他，就会报错。这就被称为“暂时性死区”。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"不能重复声明"}]},{"type":"text","value":"：let不允许在同一作用域同时声明两个相同的变量。"}]}]},{"type":"element","tag":"h2","props":{"id":"块级作用域"},"children":[{"type":"text","value":"块级作用域"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"es5只有全局作用域和函数作用域，没有块级作用域，这就会导致内层变量可能会覆盖外层变量，也有可能导致用来计数的循环变量泄露为全局变量。"}]},{"type":"element","tag":"h2","props":{"id":"const命令"},"children":[{"type":"text","value":"const命令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意"}]},{"type":"text","value":"：const命令是用来声明常量，一旦声明其值就不可再改变，const一旦声明变量，就必须立即初始化，不能留到以后赋值。如果只声明不赋值，也会报错。其作用域也与let 相同，只是在当前声明的块级作用域生效，并且也存在暂时性死区，同样的也只能在声明的位置后面使用。"}]},{"type":"element","tag":"h1","props":{"id":"变量的解构赋值"},"children":[{"type":"text","value":"变量的解构赋值"}]},{"type":"element","tag":"h2","props":{"id":"数组的解构赋值"},"children":[{"type":"text","value":"数组的解构赋值"}]},{"type":"element","tag":"h4","props":{"id":"基本用法"},"children":[{"type":"text","value":"基本用法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"es6允许从数组和对象中按照一定模式提取值，从而对变量进行赋值，这就被称为解构。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之前只能为变量直接指定值，比如"}]},{"type":"element","tag":"code","props":{"code":"var a = 1;\r\nvar b = 2;\r\nvar c = 3;\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"es6可以直接写成"}]},{"type":"element","tag":"code","props":{"code":"var [a,b,c] = [1,2,3]\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] = ["}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其意思就是从数组中提取值，然后赋值给对应的位置的变量。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意："}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以不完全解构"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果解构不成功，那么对应的值就是undefined"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果等号右边的值不是可以遍历的结构，那么也会报错"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解构赋值不仅适用于var命令，同样也适用于let,const ；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于Set结构，也是同样适用"}]},{"type":"element","tag":"code","props":{"code":"var [x,y,c]=new Set([\"a\",\"b\",\"c\"])\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"c"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"]="}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55eae7"},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"a\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"b\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"c\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"])"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"默认值"},"children":[{"type":"text","value":"默认值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解构赋值允许使用默认值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"比如"}]},{"type":"element","tag":"code","props":{"code":"let [x,y=\"2\"]=[\"a\"] // x=a,y=2\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"2\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"]=["}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"a\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// x=a,y=2"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意，ES6内部使用严格相等运算符（===），判断一个位置是否有值。所以，如果一个数组成员不严格等于undefined，默认值是不会生效的。"}]},{"type":"element","tag":"code","props":{"code":"var [x = 1] = [undefined];\r\nx // 1\r\nvar [x = 1] = [null];\r\nx // null\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] = ["}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1ba64f"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"] = ["}]},{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":"];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// null\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面代码中，如果一个数组成员是null，默认值就不会生效，因为null不严格等于undefined。如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求值。"}]},{"type":"element","tag":"h2","props":{"id":"对象解构赋值"},"children":[{"type":"text","value":"对象解构赋值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解构不仅可以用于数组，也可以用于对象，对象的解构与数组有一个重要的不同。数组的元素是按次序排列的，变量的取值由它的位置决定；而对象的属性没有次序，变量必须与属性同名，才能取到正确的值。"}]},{"type":"element","tag":"code","props":{"code":"var { bar, foo } = { foo: \"aaa\", bar: \"bbb\" };\r\nfoo // \"aaa\"\r\nbar // \"bbb\"\r\nvar { baz } = { foo: \"aaa\", bar: \"bbb\" };\r\nbaz // undefined\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" } = { "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"aaa\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"bar:"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"bbb\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// \"aaa\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// \"bbb\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-dcd75c"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"baz"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" } = { "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"aaa\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"bar:"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8779a3"},"children":[{"type":"text","value":"\"bbb\""}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-01a6d6"},"children":[{"type":"text","value":"baz"}]},{"type":"element","tag":"span","props":{"class":"ct-9c1a1b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9d2f85"},"children":[{"type":"text","value":"// undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8779a3{color:#CE9178}\n.ct-55eae7{color:#DCDCAA}\n.ct-5f9f3b{color:#C586C0}\n.ct-9d2f85{color:#6A9955}\n.ct-1ba64f{color:#B5CEA8}\n.ct-01a6d6{color:#9CDCFE}\n.ct-dcd75c{color:#569CD6}\n.ct-9c1a1b{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"let基础用法","depth":2,"text":"let基础用法","children":[{"id":"注意点","depth":3,"text":"注意点"}]},{"id":"块级作用域","depth":2,"text":"块级作用域"},{"id":"const命令","depth":2,"text":"const命令"},{"id":"数组的解构赋值","depth":2,"text":"数组的解构赋值","children":[{"id":"默认值","depth":3,"text":"默认值"}]},{"id":"对象解构赋值","depth":2,"text":"对象解构赋值"}]}},"_type":"markdown","_id":"content:articles:es6入门知识总结.md","_source":"content","_file":"articles/es6入门知识总结.md","_extension":"md"},{"_path":"/articles/js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"js高级进阶","description":"","date":"2022-07-05T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"js高级执行上下文"},"children":[{"type":"text","value":"js高级——执行上下文"}]},{"type":"element","tag":"code","props":{"code":"        // 全局执行上下文\r\n        console.log(a1, window.a1);\r\n        window.a2();\r\n        console.log(this);\r\n        var a1 = 3\r\n        function a2() {\r\n            console.log('a2()');\r\n        }\r\n             console.log(a1);\r\n     //   undefined undefined\r\n     // a2()\r\n     // 25 Window {window: Window, self: Window, document: document,      name: '', location: Location, …}\r\n     // 30 3\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 全局执行上下文\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(a1, window"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".a1"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        window"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".a2"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(this);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" a1 = "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"a2"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'a2()'"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"             console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(a1);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"//   undefined undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// a2()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 25 Window {window: Window, self: Window, document: document,      name: '', location: Location, …}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 30 3"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"改变函数内this指向"},"children":[{"type":"text","value":"改变函数内this指向"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"call()"}]}]},{"type":"element","tag":"code","props":{"code":"        // 1. call()\r\n        var o = {\r\n            name: 'hlc'\r\n        }\r\n        function fn(a, b) {\r\n            console.log(this, a + b);\r\n        }\r\n        fn.call(o, 1, 3)\r\n\r\n        function Father(uname, age, sex) {\r\n            this.uname = uname\r\n            this.age = age\r\n            this.sex = sex\r\n        }\r\n        function Son (uname,age,sex){\r\n            Father.call(this,uname,age,sex)\r\n        }\r\n        var  son =new Son('1','2','3')\r\n        console.log(son);\r\n\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 1. call()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" o = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-1e18af"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'hlc'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(a, b) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(this, "}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        fn"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".call"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(o, "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"Father"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(uname, age, sex) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            this"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".uname"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" = uname\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            this"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".age"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" = age\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            this"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".sex"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" = sex\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" Son (uname,age,sex){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            Father"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".call"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(this,uname,age,sex)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"  son =new "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"Son"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'2'"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'3'"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(son);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"apply"}]}]},{"type":"element","tag":"code","props":{"code":" var o = {\r\n            name: \"andy\"\r\n        };\r\n        function fn(arr) {\r\n            console.log(this);\r\n            console.log(arr);\r\n        }\r\n        fn.apply(o, ['pink'])\r\n        // 1.也是调用函数，第二个可以改变函数内部的this指向\r\n        // 2.但是他的参数必须是数组（伪数组）\r\n        // 3. apply 的主要应用是可以利用apply借助于数学 内置对象求最大值 Math.max()\r\n\r\n        var arr = [1, 88, 22, 43]\r\n        // var max = Math.max.apply(null, arr);\r\n        var max = Math.max.apply(Math, arr);\r\n        var min = Math.min.apply(Math, arr);\r\n        console.log(max,min);\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" o = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-1e18af"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"\"andy\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(arr) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(this);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(arr);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        fn"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".apply"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(o, ["}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"'pink'"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 1.也是调用函数，第二个可以改变函数内部的this指向\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 2.但是他的参数必须是数组（伪数组）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 3. apply 的主要应用是可以利用apply借助于数学 内置对象求最大值 Math.max()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" arr = ["}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"88"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"22"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bbb8c6"},"children":[{"type":"text","value":"43"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// var max = Math.max.apply(null, arr);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" max = Math.max."}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(Math, arr);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" min = Math.min."}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"apply"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(Math, arr);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(max,min);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"bind"}]}]},{"type":"element","tag":"code","props":{"code":"        // 3.bind() 不会的调用函数，但是能改变函数内部的this指向\r\n\r\n\r\n        // 不会调用原来的函数 可以改变原来函数内部的this，指向\r\n        // 返回的是原函数改变this之后产生的新函数\r\n        var o = {\r\n            name: \"andys\"\r\n        };\r\n        function fn() {\r\n            console.log(this);\r\n        }\r\n        var f = fn.bind(o);\r\n        f()\n","language":"stylus","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 3.bind() 不会的调用函数，但是能改变函数内部的this指向\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 不会调用原来的函数 可以改变原来函数内部的this，指向\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-763fd4"},"children":[{"type":"text","value":"// 返回的是原函数改变this之后产生的新函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" o = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-1e18af"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-7235e0"},"children":[{"type":"text","value":"\"andys\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"class":"ct-7370ed"},"children":[{"type":"text","value":".log"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(this);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":" f = fn."}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"bind"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"(o);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ad344"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"class":"ct-ebe48c"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1e18af{color:#9CDCFE}\n.ct-7235e0{color:#CE9178}\n.ct-bbb8c6{color:#B5CEA8}\n.ct-3ad344{color:#DCDCAA}\n.ct-7370ed{color:#D7BA7D}\n.ct-763fd4{color:#6A9955}\n.ct-ebe48c{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"js高级执行上下文","depth":2,"text":"js高级——执行上下文"},{"id":"改变函数内this指向","depth":2,"text":"改变函数内this指向"}]}},"_type":"markdown","_id":"content:articles:js高级.md","_source":"content","_file":"articles/js高级.md","_extension":"md"},{"_path":"/articles/node.js","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"node.js代理解决跨域","description":"安装express和http-proxy-middleware","date":"2022-03-05T00:00:00.000Z","tags":["node.js"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"步骤"},"children":[{"type":"text","value":"步骤"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"安装"}]},{"type":"element","tag":"a","props":{"href":"https://so.csdn.net/so/search?q=express&spm=1001.2101.3001.7020","rel":["nofollow"]},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"和http-proxy-middleware"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前端在调接口的过程中往往会遇到跨域的问题，jq可以采取jsonp的方式，有时候我们也可以使用node.js代理解决跨域"}]},{"type":"element","tag":"code","props":{"code":"npm install express --save\r\nnpm install http-proxy-middle --save\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" --"}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"save\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"middle"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" --"}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"跨域使用cors模块"}]}]},{"type":"element","tag":"img","props":{":src":"$withBase('/images/2022-06-01.png')","alt":"foo"},"children":[]},{"type":"element","tag":"code","props":{"code":"npm install cors --save\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"cors"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" --"}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"save"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"实例：下面是使用了UB 中的一个接口地址做了一下测试："}]},{"type":"element","tag":"code","props":{"code":"const express = require(\"express\");\r\nvar { createProxyMiddleware } = require(\"http-proxy-middleware\");\r\nconst cors = require(\"cors\");\r\nconst app = express();\r\napp.use(cors());\r\n// 服务器地址\r\nconst proxyOptions = {\r\n  target: \"https://www.ubackup.com/ss/license/info\", //真实接口地址\r\n  changeOrigin: true,\r\n};\r\n\r\nconst exampleProxy = createProxyMiddleware(proxyOptions);\r\napp.use(\"/\", exampleProxy);\r\n\r\napp.listen(3000, () => {\r\n  console.log(`代理服务器成功启动在http://127.0.0.1:3000`);\r\n});\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84c3c"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"express\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"createProxyMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" } = "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"http-proxy-middleware\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84c3c"},"children":[{"type":"text","value":"cors"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"cors\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84c3c"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"cors"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4fd24"},"children":[{"type":"text","value":"// 服务器地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84c3c"},"children":[{"type":"text","value":"proxyOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"target:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"https://www.ubackup.com/ss/license/info\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d4fd24"},"children":[{"type":"text","value":"//真实接口地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"changeOrigin:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b84c3c"},"children":[{"type":"text","value":"exampleProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"createProxyMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"proxyOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"exampleProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b1e3da"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-f2b97e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"`代理服务器成功启动在http://127.0.0.1:3000`"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"然后在命令行中输入node app.js,代理服务器就成功启动了"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"在页面中使用"}]}]},{"type":"element","tag":"code","props":{"code":"//随便测试一下\r\n$.ajax({\r\n  type: \"POST\",\r\n  url: \"http://127.0.0.1:3000/\",\r\n  data: {\r\n    license: \"AMAB-UPFMN-LAPKZ-GBTDK\",\r\n    lang: \"en\",\r\n  },\r\n});\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4fd24"},"children":[{"type":"text","value":"//随便测试一下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d499"},"children":[{"type":"text","value":"ajax"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"POST\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"url:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"http://127.0.0.1:3000/\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"data:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"license:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"AMAB-UPFMN-LAPKZ-GBTDK\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-8f69f5"},"children":[{"type":"text","value":"lang:"}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-188240"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-54aeb1"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"原理和收获"},"children":[{"type":"text","value":"原理和收获"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为跨域是针对浏览器来说的，服务器没有跨域请求。访问我们代理服务器的地址"},{"type":"element","tag":"a","props":{"href":"http://127.0.0.1:3000%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%BD%AC%E5%8F%91%E5%88%B0%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%8Cwebpack%E4%BB%A3%E7%90%86%E8%AF%B7%E6%B1%82%E4%B9%9F%E6%98%AF%E9%80%9A%E8%BF%87","rel":["nofollow"]},"children":[{"type":"text","value":"http://127.0.0.1:3000就可以转发到资源服务器上获取数据了，webpack代理请求也是通过"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http-proxy-middleware"}]},{"type":"text","value":" 实现的。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b1e3da{color:#B5CEA8}\n.ct-d4fd24{color:#6A9955}\n.ct-188240{color:#CE9178}\n.ct-d4d499{color:#DCDCAA}\n.ct-b84c3c{color:#4FC1FF}\n.ct-f2b97e{color:#569CD6}\n.ct-54aeb1{color:#D4D4D4}\n.ct-8f69f5{color:#9CDCFE}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"原理和收获","depth":2,"text":"原理和收获"}]}},"_type":"markdown","_id":"content:articles:node.js代理解决跨域.md","_source":"content","_file":"articles/node.js代理解决跨域.md","_extension":"md"},{"_path":"/articles/nodehtml","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"node.js解决批量修改html文件","description":"","date":"2022-06-08T00:00:00.000Z","tags":["node.js"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"背景"},"children":[{"type":"text","value":"背景"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:node批量修改html文件.md","_source":"content","_file":"articles/node批量修改html文件.md","_extension":"md"},{"_path":"/articles/nuxt.jsssg","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Nuxt.js与SSG","description":"SSG全称（Static Site Generator ），中文名就是静态站点生成器，是一种渲染模式，除此以外我还了解的有","date":"2023-03-05T00:00:00.000Z","tags":["nuxt.js"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"什么是ssg"},"children":[{"type":"text","value":"什么是SSG？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SSG全称（Static Site Generator ），中文名就是静态站点生成器，是一种渲染模式，除此以外我还了解的有"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"SSR 全称（Server-Side Rendering） 服务器端渲染"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSR 全称（Client-Side Rendering） 客户端渲染"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ISR 全称（Incremental Static Regeneration） 增量静态再生"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而我们接触最多的渲染模式应该是CSR，全称（Client-Side Rendering，也就是客户端渲染，页面的渲染其实就是浏览器将HTML文本转化为页面帧的过程。而如今我们大部分WEB应用都是使用 JavaScript 框架（Vue、React、Angular）进行页面渲染的，也就是说，求在执行 JavaScript 脚本的时候，HTML页面已经开始解析并且构建DOM树了，JavaScript 脚本只是动态的改变 DOM 树的结构，使得页面动态渲染。这个过程就叫客户端渲染。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SSR服务端渲染就是在浏览器请求页面URL时，服务端直接将我们需要的HTML文本组装好，并返回给浏览器，这个HTML文本被浏览器解析之后，不需要经过JavaScript脚本的执行，可直接构建出完整的DOM树并展示页面中。这个服务端组装的过程，叫做服务端渲染。而从服务器端请求URL获取数据的过程，是在页面加载之前完成的，该过程将首先运行特殊函数映射相关数据，并返回给客户端。在返回前存在一定（映射）延迟。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ISR 全称（Incremental Static Regeneration） 增量静态再生："}]},{"type":"text","value":"\r\n数据在构建时获取一次，在一定冷却时间后再次获取，并在第二次访问时提供。\r\n增量静态再生是SSG和SSR的组合，它是静态服务的，但在特定的时间和条件下，页面将重新构建并再次从API获取数据。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而我们现在所学习的SSG 就是静态站点生成器：在构建时就会去获取一次数据，解析是在构建时执行的，当发出请求时，html 将静态存储，直接发送回客户端。因此SSG适合用来做纯静态网站，比如一些官网，博客之类的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"举例"}]},{"type":"element","tag":"code","props":{"code":"\r\n\r\n     // 插入ga4跟踪代码\r\n      script: [\r\n        {\r\n          type: \"text/javascript\",\r\n          innerHTML: `var __pdl = ${JSON.stringify(this.ga4Json)}`,\r\n        },\r\n        {\r\n          type: \"text/javascript\",\r\n          src: \"/js/team/publicdelores.js\",\r\n          body: true, //<script>是否在body中\r\n        },\r\n      ],\r\n      __dangerouslyDisableSanitizers: [\"script\"], //避免插入的代码被转义成html\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// 插入ga4跟踪代码\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f0683d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"innerHTML:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"`var __pdl = "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-ae60ec"},"children":[{"type":"text","value":"JSON"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a885c3"},"children":[{"type":"text","value":"stringify"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"ga4Json"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"src:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"/js/team/publicdelores.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"body:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"//<script>是否在body中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f0683d"},"children":[{"type":"text","value":"__dangerouslyDisableSanitizers"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"script\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"//避免插入的代码被转义成html"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上述代码所示，this.ga4Json是我在asyncData中去通过接口动态获取的json数据，然后在当前组件页面的head配置对象中去通过script标签插入到页面当中，因为是ssg应用，因此只会在我打包构建的时候去请求一次数据，并且innerHtml到我当前的页面中，这样上线以后就会减少对服务端的请求，提高访问速度。"}]},{"type":"element","tag":"h1","props":{"id":"什么是nuxtjs"},"children":[{"type":"text","value":"什么是Nuxt.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt.js其实就是一个基于vue的用于构建SSR、SSG应用的框架，我所熟知的还有Next.js,这个框架是基于React框架的。二者都是为了SPA模式下的一些不足，比如SEO等方面，因此我们要实现一个SSG 应用，可以直接使用Nuxt框架。以下是初步使用的步骤以及讲解。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1、使用命令行创建一个ssg应用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：如果是第一次使用，还需要加上npx，因为需要安装create-nuxt-app 脚手架。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2、选择我们需要的配置项就开始下载安装，以下是我项目安装完成后的Nuxt.config.js的基础配置"}]},{"type":"element","tag":"code","props":{"code":"/*\r\n * @Copyright: Copyright© 2022 AOMEI\r\n * @Abstract:\r\n * @Date: 2023-05-09 09:06:40\r\n * @Author:\r\n * @LastEditors: houliucun\r\n * @LastEditTime: 2023-05-09 14:09:38\r\n * @RevisionHistory:\r\n */\r\nexport default {\r\n  // Target: https://go.nuxtjs.dev/config-target\r\n  target: \"static\",\r\n  generate: {\r\n    dir: \"dist\",\r\n    fallback: false,\r\n    subFolders: false,//打包时不以文件夹生成，但是其实无所谓，因为生成的dist目录依然是以目录形式的路由访问，而不是以文件html的格式去访问。\r\n  },\r\n  // Global page headers: https://go.nuxtjs.dev/config-head\r\n  head: {\r\n    title: \"MC\",\r\n    htmlAttrs: {\r\n      lang: \"en\",\r\n    },\r\n    meta: [\r\n      { charset: \"utf-8\" },\r\n      { name: \"viewport\", content: \"width=device-width, initial-scale=1\" },\r\n      { hid: \"description\", name: \"description\", content: \"\" },\r\n      { name: \"format-detection\", content: \"telephone=no\" },\r\n    ],\r\n    link: [{ rel: \"icon\", type: \"image/x-icon\", href: \"/favicon.ico\" }],\r\n    script: [\r\n      {\r\n        innerHTML: `(function(w, d, s, l, i) {\r\n          w[l] = w[l] || [];\r\n            w[l].push({\r\n                'gtm.start': new Date().getTime(),\r\n                event: 'gtm.js'\r\n            });\r\n            var f = d.getElementsByTagName(s)[0],\r\n                j = d.createElement(s),\r\n                dl = l != 'dataLayer' ? '&l=' + l : '';\r\n            j.async = true;\r\n            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\r\n            f.parentNode.insertBefore(j, f);\r\n        })(window, document, 'script', 'dataLayer', 'GTM-NP2JSQN');`,\r\n      },\r\n      {\r\n        innerHTML: `! function(t, e, n, c, a, r, s) {\r\n          t[n] = t[n] || function() {\r\n              (t[n].q = t[n].q || []).push(arguments)\r\n          }, (r = e.createElement(c)).async = 1, r.src = \"https://www.clarity.ms/tag/cbhubgtzof\",\r\n         (s = e.getElementsByTagName(c)[0]).parentNode.insertBefore(r, s)\r\n      }(window, document, \"clarity\", \"script\")`,\r\n      },\r\n    ],\r\n    __dangerouslyDisableSanitizers: [\"script\"], //避免插入的代码被转义成html\r\n  },\r\n\r\n  // Global CSS: https://go.nuxtjs.dev/config-css\r\n  css: [],\r\n\r\n  // Plugins to run before rendering page: https://go.nuxtjs.dev/config-plugins\r\n  plugins: [\"@/plugins/GlobalComponent\"],\r\n\r\n  // Auto import components: https://go.nuxtjs.dev/config-components\r\n  components: true,\r\n\r\n  // Modules for dev and build (recommended): https://go.nuxtjs.dev/config-modules\r\n  buildModules: [],\r\n\r\n  // Modules: https://go.nuxtjs.dev/config-modules\r\n  modules: [\"@nuxtjs/axios\", \"@nuxtjs/proxy\"],\r\n  axios: {\r\n    proxy: true,\r\n  },\r\n  proxy: {\r\n    \"/api\": {\r\n      target: \"https://api.aomeisoftware.com\", // 后台服务器的地址\r\n      changeOrigin: true,\r\n    },\r\n  },\r\n  // Build Configuration: https://go.nuxtjs.dev/config-build\r\n  build: {},\r\n};\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"/*\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @Copyright: Copyright© 2022 AOMEI\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @Abstract:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @Date: 2023-05-09 09:06:40\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @Author:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @LastEditors: houliucun\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @LastEditTime: 2023-05-09 14:09:38\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" * @RevisionHistory:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":" */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-8db11b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8db11b"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Target: https://go.nuxtjs.dev/config-target\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"target:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"static\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"generate:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"dir:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"dist\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"fallback:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"subFolders:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"//打包时不以文件夹生成，但是其实无所谓，因为生成的dist目录依然是以目录形式的路由访问，而不是以文件html的格式去访问。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Global page headers: https://go.nuxtjs.dev/config-head\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"head:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"title:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"MC\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"htmlAttrs:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"lang:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"en\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"meta:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"charset:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"utf-8\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"viewport\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"content:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"width=device-width, initial-scale=1\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"hid:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"description\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"description\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"content:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"format-detection\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"content:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"telephone=no\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"link:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" [{ "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"rel:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"icon\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"type:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"image/x-icon\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"href:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"/favicon.ico\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" }],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"script:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"innerHTML:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"`(function(w, d, s, l, i) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"          w[l] = w[l] || [];\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            w[l].push({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"                'gtm.start': new Date().getTime(),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"                event: 'gtm.js'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            var f = d.getElementsByTagName(s)[0],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"                j = d.createElement(s),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"                dl = l != 'dataLayer' ? '&l=' + l : '';\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            j.async = true;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"            f.parentNode.insertBefore(j, f);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"        })(window, document, 'script', 'dataLayer', 'GTM-NP2JSQN');`"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"innerHTML:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"`! function(t, e, n, c, a, r, s) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"          t[n] = t[n] || function() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"              (t[n].q = t[n].q || []).push(arguments)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"          }, (r = e.createElement(c)).async = 1, r.src = \"https://www.clarity.ms/tag/cbhubgtzof\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"         (s = e.getElementsByTagName(c)[0]).parentNode.insertBefore(r, s)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"      }(window, document, \"clarity\", \"script\")`"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"__dangerouslyDisableSanitizers:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"script\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"//避免插入的代码被转义成html\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Global CSS: https://go.nuxtjs.dev/config-css\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"css:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Plugins to run before rendering page: https://go.nuxtjs.dev/config-plugins\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"plugins:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"@/plugins/GlobalComponent\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Auto import components: https://go.nuxtjs.dev/config-components\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"components:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Modules for dev and build (recommended): https://go.nuxtjs.dev/config-modules\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"buildModules:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Modules: https://go.nuxtjs.dev/config-modules\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"modules:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"@nuxtjs/axios\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"@nuxtjs/proxy\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"axios:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"proxy:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"/api\""}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"target:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-313f59"},"children":[{"type":"text","value":"\"https://api.aomeisoftware.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// 后台服务器的地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"changeOrigin:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d8d3c3"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-45fe21"},"children":[{"type":"text","value":"// Build Configuration: https://go.nuxtjs.dev/config-build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3b6741"},"children":[{"type":"text","value":"build:"}]},{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":" {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{"class":"ct-20406e"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如上诉代码所示，在nuxt.config.js文件中可以使用head去定义整个网站公共的TDK,css,js,这里需要注意的是引用的js或者css不能是assets文件夹下面，因为打包的时候默认会把assets文件夹下面的资源编译一次，因此要引用css或者js应该把资源放置在static文件夹下面。同样地，也可以将代码块插入到html中，如上面所示，我把谷歌公共的代码插入到html中，但是因为使用的是innerHTML，因此需要设置__dangerouslyDisableSanitizers: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\"script\""}]},{"type":"text","value":"，这样能够避免插入的js代码被转义，从而不会引起报错。"}]},{"type":"element","tag":"h3","props":{"id":"路由"},"children":[{"type":"text","value":"路由"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在Nuxt中的默认路由就是根据pages文件夹下面的目录去产生，不需要自己再手动去指定路由。当然，如果你希望自己自定义路由，在nuxt.config.js中对应的路由配置选项中去定义的。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8db11b{color:#C586C0}\n.ct-a885c3{color:#DCDCAA}\n.ct-ae60ec{color:#4FC1FF}\n.ct-d8d3c3{color:#569CD6}\n.ct-313f59{color:#CE9178}\n.ct-3b6741{color:#9CDCFE}\n.ct-f0683d{color:#C8C8C8}\n.ct-45fe21{color:#6A9955}\n.ct-20406e{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"路由","depth":3,"text":"路由"}]}},"_type":"markdown","_id":"content:articles:nuxt.js与SSG.md","_source":"content","_file":"articles/nuxt.js与SSG.md","_extension":"md"},{"_path":"/articles/promise","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Promise详解","description":"","date":"2023-01-22T00:00:00.000Z","tags":["JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"概述"},"children":[{"type":"text","value":"概述"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise是"},{"type":"element","tag":"a","props":{"href":"https://so.csdn.net/so/search?q=%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B&spm=1001.2101.3001.7020","rel":["nofollow"]},"children":[{"type":"text","value":"异步编程"}]},{"type":"text","value":"的一种解决方案，可以替代传统的解决方案--回调函数和事件。ES6统一了用法，并原生提供了Promise对象。作为对象，Promise有以下两个特点："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1)对象的状态不受外界影响。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2)一旦状态改变了就不会再变，也就是说任何时候Promise都只有一种状态。"}]},{"type":"element","tag":"h2","props":{"id":"状态"},"children":[{"type":"text","value":"状态"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise 有3种状态，分别是pending(进行中)，resolve(成功)，reject(失败)。最开始都是从Pending状态开始，成功就会转换成resolve成功状态，失败就会转换成为reject失败状态。"}]},{"type":"element","tag":"h2","props":{"id":"基本用法"},"children":[{"type":"text","value":"基本用法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以通过Promise的构造函数创建Promise对象,Promise构造函数接受一个函数作为参数，该函数的两个参数是 resolve ，reject，它们由JavaScript引擎提供。其中 resolve 函数的作用是当Promise对象转移到成功，调用resolve并将操作结果作为其参数传递出去；reject 函数的作用是当Promise对象的状态变为失败时，将操作报出的错误作为参数传递出去。如如下代码："}]},{"type":"element","tag":"code","props":{"code":"function test() {\r\n  const promise = new Promise((resolve, reject) => {\r\n    var txt = \"hello\";\r\n    resolve(txt);\r\n  });\r\n  return promise;\r\n}\r\n\r\nvar dd = test().then((v) => {\r\n  console.log(v);\r\n});\r\nconsole.log(dd);\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c9b16e"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"txt"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"txt"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"dd"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"dd"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意："}]},{"type":"text","value":" 创建一个Promise对象会立即执行里面的代码，所以为了更好的控制代码的运行时刻，可以将其包含在一个函数中，并将这个Promise作为函数的返回值。"}]},{"type":"element","tag":"h2","props":{"id":"then-方法"},"children":[{"type":"text","value":"then 方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"promise的then方法带有一下三个参数：成功的回调，失败的回调，前进的回调。一般情况下只需要实现第一个，后面的是可选的。Promise中最为重要的状态，通过then的状态传递可以实现的回调函数链式操作的实现。先执行以下代码："}]},{"type":"element","tag":"code","props":{"code":"function greet () {\r\n  var promise = new Promise (function(resolve, reject){\r\n    var greet = \"hello world\"\r\n    resolve(greet)\r\n  })\r\n  return promise\r\n}\r\nvar p = greet().then(v => {\r\n  console.log(v)  // hello world\r\n})\r\nconsole.log(p)  // Promise { <pending> }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")  "}]},{"type":"element","tag":"span","props":{"class":"ct-cfab62"},"children":[{"type":"text","value":"// hello world\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")  "}]},{"type":"element","tag":"span","props":{"class":"ct-cfab62"},"children":[{"type":"text","value":"// Promise { <pending> }"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从中可以看出promise执行then还是一个promise，并且Promise的执行是异步的。因为 hello world 在最后一条输出语句的前面就打印出来了，且Promise的状态为pending(进行中)。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为Promise执行then后还是Promise，所以就可以根据这一特性，不断的链式调用回调函数。下面是一个例子："}]},{"type":"element","tag":"code","props":{"code":"function greet () {\r\n  var promise = new Promise(function (resolve, reject){\r\n    var greeet = \"hello world\"\r\n    resolve(greet)\r\n  })\r\n  return promise\r\n}\r\ngreet().then(v => {\r\n  console.log(v+1)\r\n  return v\r\n})\r\n.then (v => {\r\n  console.log(v+2)\r\n  return v\r\n})\r\n.then (v => {\r\n  console.log(v+3)\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"greeet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"hello world\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"greet"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"reject方法"},"children":[{"type":"text","value":"reject方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"reject的作用就是把Promise的状态从pending置为rejected，这样在then中就能捕捉到reject的回调函数。"}]},{"type":"element","tag":"code","props":{"code":"function judgeNumber (num) {\r\n  var promise = new Promise (function(resolve, reject) {\r\n    num = 5\r\n    if(num < 5){\r\n      resolve(\"num小于5，值为\" + num)\r\n    } else {\r\n      reject(\"num不小于5，值为\" + num)\r\n    }\r\n  })\r\n  return promise\r\n}\r\n \r\njudgeNumber().then(\r\n  function (message) {\r\n    console.log(message)\r\n  },\r\n  funtion (message) {\r\n    console.log(message)\r\n  }\r\n)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"judgeNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"5\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" < "}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"num小于5，值为\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"num不小于5，值为\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"judgeNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"funtion"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    console.log(message)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"catch用法"},"children":[{"type":"text","value":"catch用法"}]},{"type":"element","tag":"code","props":{"code":"function judgeNumber(num){\r\n    var promise1 = new Promise(function(resolve,reject){\r\n        num =5;\r\n        if(num<5){\r\n            resolve(\"num小于5，值为：\"+num);\r\n        }else{\r\n            reject(\"num不小于5，值为：\"+num);\r\n        }\r\n    });\r\n    return promise1;\r\n}\r\n \r\njudgeNumber().then(\r\n    function(message){\r\n        console.log(message);\r\n    }\r\n)\r\n.catch(function(message){\r\n    console.log(message);\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"judgeNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"num小于5，值为：\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        }"}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"num不小于5，值为：\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"judgeNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个时候catch执行的是和reject一样的，也就是说如果Promise的状态变为reject时，会被catch捕捉到，不过需要特别注意的是如果前面设置了reject方法的回调函数，·则catch不会捕捉到状态变为reject的情况。catch还有一点不同的是，如果在resolve或者reject发生错误的时候，会被catch捕捉到，这与java，c++的错误处理时一样的，这样就能避免程序卡死在回调函数中了。"}]},{"type":"element","tag":"h3","props":{"id":"all用法"},"children":[{"type":"text","value":"all用法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Promise的all方法提供了并行执行异步操作的能力，在all中所有异步操作结束后才执行回调。"}]},{"type":"element","tag":"code","props":{"code":"function p1(){\r\n    var promise1 = new Promise(function(resolve,reject){\r\n        console.log(\"p1的第一条输出语句\");\r\n        console.log(\"p1的第二条输出语句\");\r\n        resolve(\"p1完成\");\r\n    })\r\n    return promise1;\r\n}\r\n \r\nfunction p2(){\r\n    var promise2 = new Promise(function(resolve,reject){\r\n        console.log(\"p2的第一条输出语句\");\r\n        setTimeout(()=>{console.log(\"p2的第二条输出语句\");resolve(\"p2完成\")},2000);\r\n \r\n    })\r\n    return promise2;\r\n}\r\n \r\nfunction p3(){\r\n    var promise3 = new Promise(function(resolve,reject){\r\n        console.log(\"p3的第一条输出语句\");\r\n        console.log(\"p3的第二条输出语句\");\r\n        resolve(\"p3完成\")\r\n    });\r\n    return  promise3;\r\n}\r\n \r\nPromise.all([p1(),p2(),p3()]).then(function(data){\r\n    console.log(data);\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p1的第一条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p1的第二条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p1完成\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p2的第一条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(()"}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p2的第二条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p2完成\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")},"}]},{"type":"element","tag":"span","props":{"class":"ct-ac8aa8"},"children":[{"type":"text","value":"2000"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p3的第一条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p3的第二条输出语句\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d3dd30"},"children":[{"type":"text","value":"\"p3完成\""}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-061635"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"promise3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":" \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(),"}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(),"}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()])."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"race用法"},"children":[{"type":"text","value":"race用法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在all中的回调函数中，等到所有的Promise都执行完，再来执行回调函数，race则不同它等到第一个Promise改变状态就开始执行回调函数。将上面的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"all"}]},{"type":"text","value":"改为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"race"}]},{"type":"text","value":",得到"}]},{"type":"element","tag":"code","props":{"code":"Promise.race([p1(),p2(),p3()]).then(function(data){\r\n    console.log(data);\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f737ad"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"race"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p1"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(),"}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p2"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"(),"}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"p3"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"()])."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a8a48d"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-be597c"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-780e0a"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-34a78e"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ac8aa8{color:#B5CEA8}\n.ct-cfab62{color:#6A9955}\n.ct-061635{color:#C586C0}\n.ct-d3dd30{color:#CE9178}\n.ct-780e0a{color:#9CDCFE}\n.ct-f737ad{color:#4EC9B0}\n.ct-c9b16e{color:#4FC1FF}\n.ct-be597c{color:#DCDCAA}\n.ct-34a78e{color:#D4D4D4}\n.ct-a8a48d{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"概述","depth":2,"text":"概述"},{"id":"状态","depth":2,"text":"状态"},{"id":"基本用法","depth":2,"text":"基本用法"},{"id":"then-方法","depth":2,"text":"then 方法"},{"id":"reject方法","depth":2,"text":"reject方法","children":[{"id":"catch用法","depth":3,"text":"catch用法"},{"id":"all用法","depth":3,"text":"all用法"},{"id":"race用法","depth":3,"text":"race用法"}]}]}},"_type":"markdown","_id":"content:articles:Promise详解.md","_source":"content","_file":"articles/Promise详解.md","_extension":"md"},{"_path":"/articles/spa","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"SPA应用如何解决首屏加载速度慢的问题","description":"首屏时间（First Contentful Paint），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容","date":"2021-12-12T00:00:00.000Z","tags":["vue","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"什么是首屏加载"},"children":[{"type":"text","value":"什么是首屏加载"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首屏时间（First Contentful Paint），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首屏加载可以说是用户体验中"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"最重要"}]},{"type":"text","value":"的环节。"}]},{"type":"element","tag":"h2","props":{"id":"原因"},"children":[{"type":"text","value":"原因"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在页面渲染的过程，导致加载速度慢的因素可能如下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"网络延时问题"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"资源文件体积是否过大"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"资源是否重复发送请求去加载了"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"加载脚本的时候，渲染内容堵塞了"}]}]},{"type":"element","tag":"h2","props":{"id":"解决方案"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"解决方案"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常见的几种SPA首屏优化方式"}]},{"type":"element","tag":"code","props":{"code":"","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":""}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"减小入口文件积"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"静态资源本地缓存"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"UI框架按需加载"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"图片资源的压缩"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"组件重复打包"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"开启GZip压缩"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用SSR"}]}]},{"type":"element","tag":"h3","props":{"id":"具体实现"},"children":[{"type":"text","value":"具体实现"}]},{"type":"element","tag":"h4","props":{"id":"减小入口文件体积"},"children":[{"type":"text","value":"减小入口文件体积"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"常用的手段是路由懒加载，把不同路由对应的组件分割成不同的代码块，待路由被请求的时候会单独打包路由，使得入口文件变小，加载速度大大增加。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue-router"}]},{"type":"text","value":"配置路由的时候，采用动态加载路由的形式"}]},{"type":"element","tag":"code","props":{"code":"routes:[ \r\n    path: 'Blogs',\r\n    name: 'ShowBlogs',\r\n    component: () => import('./components/ShowBlogs.vue')\r\n]\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-de4869"},"children":[{"type":"text","value":"routes"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":":[ \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'Blogs'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'ShowBlogs'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"component"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'./components/ShowBlogs.vue'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以函数的形式加载路由，这样就可以把各自的路由文件分别打包，只有在解析给定的路由时，才会加载路由组件"}]},{"type":"element","tag":"h4","props":{"id":"静态资源本地缓存"},"children":[{"type":"text","value":"静态资源本地缓存"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"后端返回资源问题："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"采用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HTTP"}]},{"type":"text","value":"缓存，设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cache-Control"}]},{"type":"text","value":"，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Last-Modified"}]},{"type":"text","value":"，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Etag"}]},{"type":"text","value":"等响应头"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"采用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Service Worker"}]},{"type":"text","value":"离线缓存"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前端合理利用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localStorage"}]}]},{"type":"element","tag":"h4","props":{"id":"ui框架按需加载"},"children":[{"type":"text","value":"UI框架按需加载"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在日常使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"UI"}]},{"type":"text","value":"框架，例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"element-UI"}]},{"type":"text","value":"、或者 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"antd"}]},{"type":"text","value":"，我们经常性直接引用整个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"UI"}]},{"type":"text","value":"库，但实际上我用到的组件只有按钮，分页，表格，输入与警告 所以我们要按需引用"}]},{"type":"element","tag":"code","props":{"code":"import { Button, Input, Pagination, Table, TableColumn, MessageBox } from 'element-ui';\r\nVue.use(Button)\r\nVue.use(Input)\r\nVue.use(Pagination)\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7396d0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Button"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Input"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Pagination"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Table"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"TableColumn"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"MessageBox"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-7396d0"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'element-ui'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Button"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Input"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"Pagination"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"组件重复打包"},"children":[{"type":"text","value":"组件重复打包"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假设 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"A.js"}]},{"type":"text","value":"文件是一个常用的库，现在有多个路由使用了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"A.js"}]},{"type":"text","value":"文件，这就造成了重复下载"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决方案：在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"webpack"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config"}]},{"type":"text","value":"文件中，修改 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CommonsChunkPlugin"}]},{"type":"text","value":"的配置"}]},{"type":"element","tag":"code","props":{"code":"minChunks: 3\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-de4869"},"children":[{"type":"text","value":"minChunks"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-dc990f"},"children":[{"type":"text","value":"3"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"minChunks"}]},{"type":"text","value":"为3表示会把使用3次及以上的包抽离出来，放进公共依赖文件，避免了重复加载组件"}]},{"type":"element","tag":"h4","props":{"id":"图片资源的压缩"},"children":[{"type":"text","value":"图片资源的压缩"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"图片资源虽然不在编码过程中，但它却是对页面性能影响最大的因素"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于所有的图片资源，我们可以进行适当的压缩，比如对一些icon可以使用雪碧图，对图片比较大的可以使用无损压缩一下，这样可以节约不少的网络请求资源。"}]},{"type":"element","tag":"h4","props":{"id":"开启gzip压缩"},"children":[{"type":"text","value":"开启GZip压缩"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"拆完包之后，我们再用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"做一下压缩 安装 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"compression-webpack-plugin"}]}]},{"type":"element","tag":"code","props":{"code":"cnmp i compression-webpack-plugin -D\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"cnmp"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"compression"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"webpack"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"plugin"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"class":"ct-81be22"},"children":[{"type":"text","value":"D"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue.congig.js"}]},{"type":"text","value":"中引入并修改 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"webpack"}]},{"type":"text","value":"配置"}]},{"type":"element","tag":"code","props":{"code":"const CompressionPlugin = require('compression-webpack-plugin')\r\n\r\nconfigureWebpack: (config) => {\r\n        if (process.env.NODE_ENV === 'production') {\r\n            // 为生产环境修改配置...\r\n            config.mode = 'production'\r\n            return {\r\n                plugins: [new CompressionPlugin({\r\n                    test: /\\.js$|\\.html$|\\.css/, //匹配文件名\r\n                    threshold: 10240, //对超过10k的数据进行压缩\r\n                    deleteOriginalAssets: false //是否删除原文件\r\n                })]\r\n            }\r\n        }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81be22"},"children":[{"type":"text","value":"CompressionPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'compression-webpack-plugin'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-de4869"},"children":[{"type":"text","value":"configureWebpack"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":": ("}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7396d0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-81be22"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-df8477"},"children":[{"type":"text","value":"// 为生产环境修改配置...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"mode"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'production'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-7396d0"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"plugins:"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"CompressionPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"test:"}]},{"type":"element","tag":"span","props":{"class":"ct-550202"},"children":[{"type":"text","value":" /"}]},{"type":"element","tag":"span","props":{"class":"ct-5961ed"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-550202"},"children":[{"type":"text","value":"js"}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"$|"}]},{"type":"element","tag":"span","props":{"class":"ct-5961ed"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-550202"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"$|"}]},{"type":"element","tag":"span","props":{"class":"ct-5961ed"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-550202"},"children":[{"type":"text","value":"css/"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-df8477"},"children":[{"type":"text","value":"//匹配文件名\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"threshold:"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dc990f"},"children":[{"type":"text","value":"10240"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-df8477"},"children":[{"type":"text","value":"//对超过10k的数据进行压缩\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"deleteOriginalAssets:"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-df8477"},"children":[{"type":"text","value":"//是否删除原文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"                })]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"        }"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在服务器我们也要做相应的配置 如果发送请求的浏览器支持 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"，就发送给它 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"格式的文件 我的服务器是用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"框架搭建的 只要安装一下 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"compression"}]},{"type":"text","value":"就能使用"}]},{"type":"element","tag":"code","props":{"code":"const compression = require('compression')\r\napp.use(compression())  // 在其他中间件使用之前调用\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-1e0a50"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-81be22"},"children":[{"type":"text","value":"compression"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-08b189"},"children":[{"type":"text","value":"'compression'"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-5224da"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-154e64"},"children":[{"type":"text","value":"compression"}]},{"type":"element","tag":"span","props":{"class":"ct-e7f345"},"children":[{"type":"text","value":"())  "}]},{"type":"element","tag":"span","props":{"class":"ct-df8477"},"children":[{"type":"text","value":"// 在其他中间件使用之前调用"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"使用ssr"},"children":[{"type":"text","value":"使用SSR"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"SSR（Server side ），也就是服务端渲染，组件或页面通过服务器生成html字符串，再发送到浏览器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从头搭建一个服务端渲染是很复杂的，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":"应用建议使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Nuxt.js"}]},{"type":"text","value":"实现服务端渲染"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5961ed{color:#D7BA7D}\n.ct-550202{color:#D16969}\n.ct-df8477{color:#6A9955}\n.ct-81be22{color:#4FC1FF}\n.ct-dc990f{color:#B5CEA8}\n.ct-154e64{color:#DCDCAA}\n.ct-7396d0{color:#C586C0}\n.ct-1e0a50{color:#569CD6}\n.ct-08b189{color:#CE9178}\n.ct-5224da{color:#9CDCFE}\n.ct-e7f345{color:#D4D4D4}\n.ct-de4869{color:#C8C8C8}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"原因","depth":2,"text":"原因"},{"id":"解决方案","depth":2,"text":"解决方案","children":[{"id":"具体实现","depth":3,"text":"具体实现"}]}]}},"_type":"markdown","_id":"content:articles:SPA应用如何解决首屏加载速度.md","_source":"content","_file":"articles/SPA应用如何解决首屏加载速度.md","_extension":"md"},{"_path":"/articles/vue2","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"vue2基础知识复习巩固","description":"1.想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；","date":"2021-03-18T00:00:00.000Z","tags":["vue2","框架"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"认识vue"},"children":[{"type":"text","value":"认识Vue"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.root容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3.root容器里的代码被称为【Vue模板】；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4.Vue实例和容器是一一对应的；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"5.真实开发中只有一个Vue实例，并且会配合着组件一起使用；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"6."},{"type":"element","tag":"binding","props":{"value":"xxx"},"children":[]},{"type":"text","value":"中的xxx要写js表达式，且xxx可以自动读取到data中的所有属性；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"7.一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意区分:"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1). a"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2). a+b"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(3). demo(1)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(4). x === y ? 'a' : 'b'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.js代码(语句)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(1). if(){}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(2). for(){}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"示例"}]}]},{"type":"element","tag":"code","props":{"code":"    <div id=\"demo\">\r\n        <h1>Hello，{{name.toUpperCase()}}，{{address}}</h1>\r\n    </div>\r\n\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        //创建Vue实例\r\n        new Vue({\r\n            el: '#demo', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。\r\n            data: { //data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。\r\n                name: 'atguigu',\r\n                address: '北京'\r\n            }\r\n        })\r\n\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"demo\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"Hello，"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{name.toUpperCase()}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"，"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        //创建Vue实例\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#demo'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'atguigu'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'北京'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"模板语法"},"children":[{"type":"text","value":"模板语法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"vue模板语法分为两大类，一种是插值语法，另外一种是指令语法。"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"插值语法"}]},{"type":"text","value":"\r\n功能：用于解析标签体的内容\r\n写法："},{"type":"element","tag":"binding","props":{"value":"aaa"},"children":[]},{"type":"text","value":",aaa是js表达式，且可以读取到data中的所有属性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"指令语法"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"功能：用于解析标签（包括：标签属性、标签体内容、绑定事件.....）。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"举例：v-bind:href=\"xxx\" 或  简写为 "},{"type":"element","tag":"href","props":{},"children":[]},{"type":"text","value":"=\"xxx\"，xxx同样要写js表达式，且可以直接读取到data中的所 有属性。"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"备注：Vue中有很多的指令，且形式都是：v-????，此处我们只是拿v-bind举个例子。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"    <div id=\"root\">\r\n        <h1>插值语法</h1>\r\n        <h3>你好，{{name}}</h3>\r\n        <hr />\r\n        <h1>指令语法</h1>\r\n        <a v-bind:href=\"school.url.toUpperCase()\" x=\"hello\">点我去{{school.name}}学习1</a>\r\n        <a :href=\"school.url\" x=\"hello\">点我去{{school.name}}学习2</a>\r\n    </div>\r\n\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        new Vue({\r\n            el: '#root',\r\n            data: {\r\n                name: 'jack',\r\n                school: {\r\n                    name: '尚硅谷',\r\n                    url: 'http://www.atguigu.com',\r\n                }\r\n            }\r\n        })\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"插值语法"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h3"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"你好，"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h3"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"hr"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"指令语法"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-bind"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"href"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"school.url.toUpperCase()\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"点我去"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{school."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学习1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":":href=\"school.url\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"hello\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"点我去"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{school."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学习2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'jack'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"school:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"url:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'http://www.atguigu.com'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"数据绑定"},"children":[{"type":"text","value":"数据绑定"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在vue中也有两种数据绑定的方式："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"单向绑定(v-bind)：数据只能从data流向页面。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"双向绑定(v-model)：数据不仅能从data流向页面，还可以从页面流向data。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"备注"}]},{"type":"text","value":"：双向绑定一般都应用在表单类元素上（如：input、select等）；v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"<body>\r\n        <!-- \r\n            Vue中有2种数据绑定的方式：\r\n                    1.单向绑定(v-bind)：数据只能从data流向页面。\r\n                    2.双向绑定(v-model)：数据不仅能从data流向页面，还可以从页面流向data。\r\n                        备注：\r\n                                1.双向绑定一般都应用在表单类元素上（如：input、select等）\r\n                                2.v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。\r\n         -->\r\n        <!-- 准备好一个容器-->\r\n        <div id=\"root\">\r\n            <!-- 普通写法 -->\r\n            <!-- 单向数据绑定：<input type=\"text\" v-bind:value=\"name\"><br/>\r\n            双向数据绑定：<input type=\"text\" v-model:value=\"name\"><br/> -->\r\n\r\n            <!-- 简写 -->\r\n            单向数据绑定：<input type=\"text\" :value=\"name\"><br/>\r\n            双向数据绑定：<input type=\"text\" v-model=\"name\"><br/>\r\n\r\n            <!-- 如下代码是错误的，因为v-model只能应用在表单类元素（输入类元素）上 -->\r\n            <!-- <h2 v-model:x=\"name\">你好啊</h2> -->\r\n        </div>\r\n    </body>\r\n\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        new Vue({\r\n            el:'#root',\r\n            data:{\r\n                name:'尚硅谷'\r\n            }\r\n        })\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        <!-- \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            Vue中有2种数据绑定的方式：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    1.单向绑定(v-bind)：数据只能从data流向页面。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    2.双向绑定(v-model)：数据不仅能从data流向页面，还可以从页面流向data。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        备注：\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                                1.双向绑定一般都应用在表单类元素上（如：input、select等）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                                2.v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"         -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        <!-- 准备好一个容器-->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            <!-- 普通写法 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            <!-- 单向数据绑定："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-bind"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            双向数据绑定："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            <!-- 简写 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            单向数据绑定："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":":value=\"name\"><br/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"双向数据绑定：<input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            <!-- 如下代码是错误的，因为v-model只能应用在表单类元素（输入类元素）上 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"你好啊"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"el与data的两种写法"},"children":[{"type":"text","value":"el与data的两种写法"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"el的两种写法"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"new Vue时候配置el属性。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"先创建Vue实例，随后再通过vm.$mount('#root')指定el的值。"}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"data的两种写法"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一种是函数式，一种是对象式，但是在组件中使用的时候必须使用函数式，这样才能避免组件之间的data相互污染"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"提示："}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由vue管理的函数，一定不要写成箭头函数，因为箭头函数没有this实例，因此写了箭头函数之后，this指向的就是不再是vue实例。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"    <div id=\"root\">\r\n        <h1>你好，{{name}}</h1>\r\n    </div>\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        //el的两种写法\r\n        /* const v = new Vue({\r\n            //el:'#root', //第一种写法\r\n            data:{\r\n                name:'尚硅谷'\r\n            }\r\n        })\r\n        console.log(v)\r\n        v.$mount('#root') //第二种写法 */\r\n\r\n        //data的两种写法\r\n        new Vue({\r\n            el: '#root',\r\n            //data的第一种写法：对象式\r\n            /* data:{\r\n                name:'尚硅谷'\r\n            } */\r\n\r\n            //data的第二种写法：函数式\r\n            data() {\r\n                console.log('@@@', this) //此处的this是Vue实例对象\r\n                return {\r\n                    name: '尚硅谷'\r\n                }\r\n            }\r\n        })\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"你好，"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        //el的两种写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        /* const v = new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//el:'#root', //第一种写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        console.log(v)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        v.$mount('#root') //第二种写法 */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        //data的两种写法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//data的第一种写法：对象式\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"/* data:{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"                name:'尚硅谷'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"            } */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//data的第二种写法：函数式\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                console.log("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'@@@'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", this) "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//此处的this是Vue实例对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                return {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"理解mvvm模型"},"children":[{"type":"text","value":"理解MVVM模型"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"含义：MVVM是由M：模型(Model) ：data中的数据，可以是自己写的，也有可能是从后端请求的；V：视图(View) ：模板代码，就是html+css+js；VM：视图模型(ViewModel)：Vue实例这三者组成。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"要实现MVVM模式，那就要页面操作的时候，然后改变数据；或者是数据改变的时候，页面改变。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"V 变→ M 变 那就要DOM 监听，DOM监听才知道视图操作可能引起数据变了，若数据变了才会改变data中的数据。M变 → V变 那就要数据绑定，data数据变了，那就通过数据的绑定改变视图。所以MVVM模式是通过DOM监听 + 数据绑定 完成的"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"发现：data中所有的属性，最后都出现在了vm身上；vm身上所有的属性 及 Vue原型上所有属性，在Vue模板中都可以直接使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1675147738703","src":"image/vue2%E5%9F%BA%E7%A1%80/1675147738703.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"    <div id=\"root\">\r\n        <h1>学校名称：{{name}}</h1>\r\n        <h1>学校地址：{{address}}</h1>\r\n        <!-- <h1>测试一下1：{{1+1}}</h1>\r\n            <h1>测试一下2：{{$options}}</h1>\r\n            <h1>测试一下3：{{$emit}}</h1>\r\n            <h1>测试一下4：{{_c}}</h1> -->\r\n    </div>\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        const vm = new Vue({\r\n            el: '#root',\r\n            data: {\r\n                name: '尚硅谷',\r\n                address: '北京',\r\n            }\r\n        })\r\n        console.log(vm)\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学校名称："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学校地址："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"测试一下1："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"测试一下2："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"测试一下3："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"$emit"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"测试一下4："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"_c"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        const vm = new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'北京'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        console.log(vm)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"数据代理"},"children":[{"type":"text","value":"数据代理"}]},{"type":"element","tag":"h2","props":{"id":"回顾objectdefineproperty方法"},"children":[{"type":"text","value":"回顾Object.defineproperty方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"作用：该方法的作用就是对一个对象定义新的属性，或者修改已经存在的属性。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Object.defineproperty方法需要传递3个参数"}]},{"type":"element","tag":"code","props":{"code":"Object.defineproperty（obj, prop, desc  ）\r\n\r\n参数1：obj     需要定义属性的当前对象\r\n\r\n参数2：prop    当前需要定义的属性名\r\n\r\n参数3：desc    描述符 一般是一个对象\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Object.defineproperty（obj, prop, desc  ）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"参数1：obj     需要定义属性的当前对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"参数2：prop    当前需要定义的属性名\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"参数3：desc    描述符 一般是一个对象"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"        <script type=\"text/javascript\" >\r\n            let number = 18\r\n            let person = {\r\n                name:'张三',\r\n                sex:'男',\r\n            }\r\n\r\n            Object.defineProperty(person,'age',{\r\n                // value:18,\r\n                // enumerable:true, //控制属性是否可以枚举，默认值是false\r\n                // writable:true, //控制属性是否可以被修改，默认值是false\r\n                // configurable:true //控制属性是否可以被删除，默认值是false\r\n\r\n                //当有人读取person的age属性时，get函数(getter)就会被调用，且返回值就是age的值\r\n                get(){\r\n                    console.log('有人读取age属性了')\r\n                    return number\r\n                },\r\n\r\n                //当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值\r\n                set(value){\r\n                    console.log('有人修改了age属性，且值是',value)\r\n                    number = value\r\n                }\r\n\r\n            })\r\n\r\n            // console.log(Object.keys(person))\r\n\r\n            console.log(person)\r\n        </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            let number = 18\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            let person = "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'张三'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"sex"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'男'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            Object.defineProperty(person,'age',"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// value:18,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// enumerable:true, //控制属性是否可以枚举，默认值是false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// writable:true, //控制属性是否可以被修改，默认值是false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// configurable:true //控制属性是否可以被删除，默认值是false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//当有人读取person的age属性时，get函数(getter)就会被调用，且返回值就是age的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    console.log("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'有人读取age属性了'"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"                    return number\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"                },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//当有人修改person的age属性时，set函数(setter)就会被调用，且会收到修改的具体值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"                set(value){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"                    console.log("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'有人修改了age属性，且值是'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",value)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            // console.log(Object.keys(person))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            console.log(person)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：当我们使用了getter或者setter方法的时候，就不能使用value 和 writable属性，否则就会报错。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"get 是获取值的时候触发的方法， set 是修改值的时候出发的方法，两个方法不是必须成对出现。"}]},{"type":"element","tag":"h2","props":{"id":"什么是数据代理"},"children":[{"type":"text","value":"什么是数据代理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"含义：通过对一个对象代理对另一个对象中属性的操作（读写操作，这就是数据代理"}]},{"type":"element","tag":"h2","props":{"id":"简单实现数据代理"},"children":[{"type":"text","value":"简单实现数据代理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"JS有一个内置对象Object数据代理的方法为： =Object.defineProperty(obj, prop, descriptor)= ，通过这个方法即可实现数据代理。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数解析：\r\nobj----------------------------------->要定义属性的对象\r\nprop--------------------------------->要定义或修改的属性的名称或 Symbol\r\ndescriptor-------------------------->要定义或修改的属性描述符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"举例"}]}]},{"type":"element","tag":"code","props":{"code":"    let obj1 = {x:100};\r\n    let obj2 = {y:200};\r\n\r\n    Object.defineProperty(obj2, 'x', {\r\n         // 当读取obj2的x属性时，get函数（getter）就会被调用，且返回值就是x的值\r\n        get() {\r\n            console.log('拿obj1的x了');\r\n            return obj1.x\r\n        },\r\n         // 当修改obj2的x属性时，set函数（setter）就会被调用，且会收到一个具体修改的值value\r\n        set(value) {\r\n            console.log('给obj1的x赋值');\r\n            obj1.x = value\r\n        }\r\n    })\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x:"}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = {"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"y:"}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"};\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'x'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"         "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// 当读取obj2的x属性时，get函数（getter）就会被调用，且返回值就是x的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'拿obj1的x了'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-1966d5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"         "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// 当修改obj2的x属性时，set函数（setter）就会被调用，且会收到一个具体修改的值value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'给obj1的x赋值'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"扩展：在descriptor参数中，除了 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"getter"}]},{"type":"text","value":" 、 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"setter"}]},{"type":"text","value":" （最常用的两个）之外，还有其他配置项，例："}]},{"type":"element","tag":"code","props":{"code":"    let person = {\r\n            name: 'xxc',\r\n            age: 22\r\n        };\r\n\r\n    Object.defineProperty(person, 'age', {\r\n        value: 18,\r\n        enumerable: true, // 控制属性是否可以枚举，默认为false\r\n        writable: true, // 控制属性是否可以被修改，默认为false\r\n        configurable: true, // 控制属性是否可以被删除，默认为false\r\n    })\r\n\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"person"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'xxc'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"age:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"22\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"person"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'age'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"enumerable:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// 控制属性是否可以枚举，默认为false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"writable:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// 控制属性是否可以被修改，默认为false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"configurable:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// 控制属性是否可以被删除，默认为false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注：通过代理的方式修改person中age属性与直接修改person中age属性的区别也很明显，代理的方式属性默认都是不可修改或枚举的，需要手动开启配置项设置。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是我们用数据代理一般只会用到getter和setter，比如在vue中data里的属性就是用到数据代理来方便程序员写代码。"}]},{"type":"element","tag":"h2","props":{"id":"vue中的数据代理"},"children":[{"type":"text","value":"vue中的数据代理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"        <div id=\"root\">\r\n            <h2>学校名称：{{name}}</h2>\r\n            <h2>学校地址：{{address}}</h2>\r\n        </div>\r\n        <script type=\"text/javascript\">\r\n            Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n            const vm = new Vue({\r\n                el:'#root',\r\n                data:{\r\n                    name:'张三',\r\n                    address:'成都'\r\n                }\r\n            })\r\n            console.log(vm);\r\n        </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学校名称："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学校地址："}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            const vm = new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'张三'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"address:"}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'成都'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            console.log(vm);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过打印上面的vm实例，可以发现但是一开始的状态是…(三个点)，这三个点其实就表示的是该数据是通过Object.defineProperty()来创建的；当然在下面也可以看到name和address这两个数据的getter和setter。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么vue 是如何实现getter和setter的呢？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在data中定义的name 和 address的时候，vue 实例 对象在其自身添加了一个_data属性，就是用来存储data中定义的name和address。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是这个时候页面只能通过_data.name的形式才可以访问。但是我们需要直接访问vue实例对象中的name和address，因此，vue 会在当前的vue 实例对象上开始加东西，会将data中定义的数据都加到vue 实例对象中，首先会添加一个name 属性，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"name的值则是通过getter来读取_data中name的值"}]},{"type":"text","value":" ； "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"如果修改vue实例对象中name的值，则通过setter映射到_data中的name来进行修改"}]},{"type":"text","value":" ；"}]},{"type":"element","tag":"h1","props":{"id":"事件处理"},"children":[{"type":"text","value":"事件处理"}]},{"type":"element","tag":"h2","props":{"id":"事件的基本使用"},"children":[{"type":"text","value":"事件的基本使用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"基本使用："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.事件的回调需要配置在methods对象中，最终会在vm上；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3.methods中配置的函数，不要用箭头函数！否则this就不是vm了；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4.methods中配置的函数，都是被Vue所管理的函数，this的指向是vm 或 组件实例对象；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"5.@click=\"demo\" 和 @click=\"demo($event)\" 效果一致，但后者可以传参；"}]},{"type":"element","tag":"code","props":{"code":"    <div id=\"root\">\r\n        <h2>欢迎来到{{name}}学习</h2>\r\n        <!-- <button v-on:click=\"showInfo\">点我提示信息</button> -->\r\n        <button @click=\"showInfo1\">点我提示信息1（不传参）</button>\r\n        <button @click=\"showInfo2($event,66)\">点我提示信息2（传参）</button>\r\n    </div>\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        const vm = new Vue({\r\n            el: '#root',\r\n            data: {\r\n                name: '尚硅谷',\r\n            },\r\n            methods: {\r\n                showInfo1(event) {\r\n                    // console.log(event.target.innerText)\r\n                    // console.log(this) //此处的this是vm\r\n                    alert('同学你好！')\r\n                },\r\n                showInfo2(event, number) {\r\n                    console.log(event, number)\r\n                    // console.log(event.target.innerText)\r\n                    // console.log(this) //此处的this是vm\r\n                    alert('同学你好！！')\r\n                }\r\n            }\r\n        })\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"欢迎来到"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"学习"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"h2"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-on"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"click"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"showInfo\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"点我提示信息"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"@click=\"showInfo1\">点我提示信息1（不传参）</button>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"<button"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"@click=\"showInfo2($event,66)\">点我提示信息2（传参）</button>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"</div>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-52d00b"},"children":[{"type":"text","value":"<script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        const vm = new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'尚硅谷'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"showInfo1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// console.log(event.target.innerText)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// console.log(this) //此处的this是vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"alert"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'同学你好！'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"showInfo2"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// console.log(event.target.innerText)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// console.log(this) //此处的this是vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"alert"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'同学你好！！'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"事件修饰符"},"children":[{"type":"text","value":"事件修饰符"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"包括如下："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.prevent：阻止默认事件（常用）；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.stop：阻止事件冒泡（常用）；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3.once：事件只触发一次（常用）；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"4.capture：使用事件的捕获模式；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"5.self：只有event.target是当前操作的元素时才触发事件；"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"6.passive：事件的默认行为立即执行，无需等待事件回调执行完毕"}]},{"type":"element","tag":"h1","props":{"id":"计算属性computed"},"children":[{"type":"text","value":"计算属性computed"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义：要用的属性不存在，要通过已有属性"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"计算"}]},{"type":"text","value":"得来。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原理：底层借助了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Objcet.defineproperty"}]},{"type":"text","value":"方法提供的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getter"}]},{"type":"text","value":"和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"setter"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"get函数什么时候执行？"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"初次读取时会执行一次。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"当依赖的数据发生改变时会被再次调用。"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优势：与methods实现相比，内部有"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"缓存"}]},{"type":"text","value":"机制（复用），效率更高，调试方便。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"备注："},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"计算属性最终会出现在vm上，直接读取使用即可。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变。"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"代码示例"}]}]},{"type":"element","tag":"code","props":{"code":"    <!-- 准备好一个容器-->\r\n    <div id=\"root\">\r\n        姓：<input type=\"text\" v-model=\"firstName\"> <br /><br />\r\n        名：<input type=\"text\" v-model=\"lastName\"> <br /><br />\r\n        测试：<input type=\"text\" v-model=\"x\"> <br /><br />\r\n        全名：<span>{{fullName}}</span> <br /><br />\r\n        <!-- 全名：<span>{{fullName}}</span> <br/><br/>\r\n            全名：<span>{{fullName}}</span> <br/><br/>\r\n            全名：<span>{{fullName}}</span> -->\r\n    </div>\r\n\r\n    <script type=\"text/javascript\">\r\n        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\r\n\r\n        const vm = new Vue({\r\n            el: '#root',\r\n            data: {\r\n                firstName: '张',\r\n                lastName: '三',\r\n                x: '你好'\r\n            },\r\n            methods: {\r\n                demo() {\r\n\r\n                }\r\n            },\r\n            computed: {\r\n                fullName: {\r\n                    //get有什么作用？当有人读取fullName时，get就会被调用，且返回值就作为fullName的值\r\n                    //get什么时候调用？1.初次读取fullName时。2.所依赖的数据发生变化时。\r\n                    get() {\r\n                        console.log('get被调用了')\r\n                        // console.log(this) //此处的this是vm\r\n                        return this.firstName + '-' + this.lastName\r\n                    },\r\n                    //set什么时候调用? 当fullName被修改时。\r\n                    set(value) {\r\n                        console.log('set', value)\r\n                        const arr = value.split('-')\r\n                        this.firstName = arr[0]\r\n                        this.lastName = arr[1]\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    </script>\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"准备好一个容器"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"-->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        姓："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"firstName\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        名："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"lastName\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        测试："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"v-model"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"x\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        全名："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"fullName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        <!-- 全名："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"fullName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            全名："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"fullName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/><"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"br"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            全名："}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"fullName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"\"text/javascript\""}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        const vm = new Vue("}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'#root'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"firstName:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'张'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"lastName:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'三'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"x:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'你好'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"demo"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"computed"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"fullName:"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//get有什么作用？当有人读取fullName时，get就会被调用，且返回值就作为fullName的值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//get什么时候调用？1.初次读取fullName时。2.所依赖的数据发生变化时。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'get被调用了'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"// console.log(this) //此处的this是vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-1966d5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"firstName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'-'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"lastName\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//set什么时候调用? 当fullName被修改时。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'set'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-46cd3f"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'-'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"firstName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"lastName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"arr"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-bfb775"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-a927c7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"简写形式"}]}]},{"type":"element","tag":"code","props":{"code":"                //简写\r\n                fullName(){\r\n                    console.log('get被调用了')\r\n                    return this.firstName + '-' + this.lastName\r\n                }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//简写\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"fullName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'get被调用了'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                    "}]},{"type":"element","tag":"span","props":{"class":"ct-1966d5"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"firstName"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'-'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"lastName\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"                }"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"监视属性watch"},"children":[{"type":"text","value":"监视属性watch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"定义：通过vm对象的$watch()或者watch配置来指定监视的属性，当属性发生变化时，回调函数自动调用，在函数内部进行计算"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1.在new Vue时传入watch配置"}]},{"type":"element","tag":"code","props":{"code":"watch:{\r\n    isHot:{\r\n        immediate:true, //初始化时让handler调用一下\r\n        //handler什么时候调用？当isHot发生改变时。\r\n        handler(newValue,oldValue){\r\n            console.log('isHot被修改了',newValue,oldValue)\r\n        }\r\n    }\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ee06a"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7ee06a"},"children":[{"type":"text","value":"isHot"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7ee06a"},"children":[{"type":"text","value":"immediate"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//初始化时让handler调用一下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//handler什么时候调用？当isHot发生改变时。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"newValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"oldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'isHot被修改了'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"newValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"oldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2.通过vm.$watch监视"}]},{"type":"element","tag":"code","props":{"code":"vm.$watch('isHot',{\r\n    immediate:true, //初始化时让handler调用一下\r\n    //handler什么时候调用？当isHot发生改变时。\r\n    handler(newValue,oldValue){\r\n        console.log('isHot被修改了',newValue,oldValue)\r\n    }\r\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"$watch"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'isHot'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":",{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"immediate:"}]},{"type":"element","tag":"span","props":{"class":"ct-acf954"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//初始化时让handler调用一下\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bf7128"},"children":[{"type":"text","value":"//handler什么时候调用？当isHot发生改变时。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"newValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"oldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c3b29"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-18fc00"},"children":[{"type":"text","value":"'isHot被修改了'"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"newValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-9202b1"},"children":[{"type":"text","value":"oldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa514"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"深度监视："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue中的watch默认不监测对象内部值的改变（一层）。配置deep:true可以监测对象内部值改变（多层）。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"备注：Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以！使用watch时根据数据的具体结构，决定是否采用深度监视。"}]},{"type":"element","tag":"h1","props":{"id":"mixin混入"},"children":[{"type":"text","value":"mixin混入"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"含义：Vue的混合可以对钩子函数的复用，data中的数据如果组件本身就有的，以组件自己的为准，但是组件本身有的方法和混合里面的方法都会有。并且可以在main.js进行全局混合。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"功能：可以把多个组件共用的配置提取成一个混入对象"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用方式："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一步定义混合"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第二步使用混入："}]},{"type":"element","tag":"code","props":{"code":"全局混入：``Vue.mixin(xxx)``，在main.js使用\r\n局部混入：``mixins:['xxx']   ``在组件中使用\n","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"全局混入：``Vue.mixin(xxx)``，在main.js使用\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"局部混入：``mixins:['xxx']   ``在组件中使用"}]}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"总结todolist案例"},"children":[{"type":"text","value":"总结TodoList案例"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"组件化编码流程：\r\n(1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。\r\n(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：\r\n1).一个组件在用：放在组件自身即可。\r\n2). 一些组件在用：放在他们共同的父组件上（"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<span style=\"color:red\">"}]},{"type":"text","value":"状态提升）。\r\n(3).实现交互：从绑定事件开始。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"props适用于：\r\n(1).父组件 ==> 子组件 通信\r\n(2).子组件 ==> 父组件 通信（要求父先给子一个函数）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7ee06a{color:#C8C8C8}\n.ct-46cd3f{color:#4FC1FF}\n.ct-1966d5{color:#C586C0}\n.ct-bfb775{color:#B5CEA8}\n.ct-6c3b29{color:#DCDCAA}\n.ct-52d00b{color:#F44747}\n.ct-bf7128{color:#6A9955}\n.ct-18fc00{color:#CE9178}\n.ct-9202b1{color:#9CDCFE}\n.ct-acf954{color:#569CD6}\n.ct-a927c7{color:#808080}\n.ct-7aa514{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"回顾objectdefineproperty方法","depth":2,"text":"回顾Object.defineproperty方法"},{"id":"什么是数据代理","depth":2,"text":"什么是数据代理"},{"id":"简单实现数据代理","depth":2,"text":"简单实现数据代理"},{"id":"vue中的数据代理","depth":2,"text":"vue中的数据代理"},{"id":"事件的基本使用","depth":2,"text":"事件的基本使用"},{"id":"事件修饰符","depth":2,"text":"事件修饰符"}]}},"_type":"markdown","_id":"content:articles:vue2基础.md","_source":"content","_file":"articles/vue2基础.md","_extension":"md"},{"_path":"/articles/vue","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"动态给vue的data添加一个新的属性时会发生什么？怎样解决？","description":"","date":"2021-12-15T00:00:00.000Z","tags":["vue","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"一直接添加属性的问题"},"children":[{"type":"text","value":"一、直接添加属性的问题"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue2"}]},{"type":"text","value":"是用过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.defineProperty"}]},{"type":"text","value":"实现数据响应式"}]},{"type":"element","tag":"code","props":{"code":"const obj = {}\r\nObject.defineProperty(obj, 'foo', {\r\n        get() {\r\n            console.log(`get foo:${val}`);\r\n            return val\r\n        },\r\n        set(newVal) {\r\n            if (newVal !== val) {\r\n                console.log(`set foo:${newVal}`);\r\n                val = newVal\r\n            }\r\n        }\r\n    })\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1d77f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0cb380"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" = {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-932167"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"obj"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-fb27e4"},"children":[{"type":"text","value":"'foo'"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-932167"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-932167"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fb27e4"},"children":[{"type":"text","value":"`get foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-f1d77f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-f1d77f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-fb27e4"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-101654"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"val\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-932167"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"newVal"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-101654"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"newVal"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-932167"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fb27e4"},"children":[{"type":"text","value":"`set foo:"}]},{"type":"element","tag":"span","props":{"class":"ct-f1d77f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"newVal"}]},{"type":"element","tag":"span","props":{"class":"ct-f1d77f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-fb27e4"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-064a3d"},"children":[{"type":"text","value":"newVal\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-eee3d1"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们访问 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":"属性或者设置 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":"值的时候都能够触发 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"setter"}]},{"type":"text","value":"与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getter"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是我们为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"obj"}]},{"type":"text","value":"添加新属性的时候，却无法触发事件属性的拦截"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原因是一开始 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"obj"}]},{"type":"text","value":"的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":"属性被设成了响应式数据，而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bar"}]},{"type":"text","value":"是后面新增的属性，并没有通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.defineProperty"}]},{"type":"text","value":"设置成响应式数据"}]},{"type":"element","tag":"h2","props":{"id":"解决方案"},"children":[{"type":"text","value":"解决方案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":" 不允许在已经创建的实例上动态添加新的响应式属性"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若想实现数据与视图同步更新，可采取下面三种解决方案："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vue.set()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Object.assign()"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"$forcecUpdated()"}]}]},{"type":"element","tag":"h3","props":{"id":"vueset"},"children":[{"type":"element","tag":"a","props":{"href":"https://vue3js.cn/interview/vue/data_object_add_attrs.html#vue-set","rel":["nofollow"]},"children":[{"type":"text","value":"#"}]},{"type":"text","value":"Vue.set()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue.set( target, propertyName/index, value )"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"参数"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{Object | Array} target"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{string | number} propertyName/index"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"{any} value"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"返回值：设置的值"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue.set"}]},{"type":"text","value":"向响应式对象中添加一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"property"}]},{"type":"text","value":"，并确保这个新 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"property"}]},{"type":"text","value":"同样是响应式的，且触发视图更新"}]},{"type":"element","tag":"h3","props":{"id":"objectassign"},"children":[{"type":"text","value":"Object.assign()"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.assign()"}]},{"type":"text","value":"添加到对象的新属性不会触发更新"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"应创建一个新的对象，合并原对象和混入对象的属性"}]},{"type":"element","tag":"h3","props":{"id":"forceupdate"},"children":[{"type":"text","value":"$forceUpdate"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你发现你自己需要在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"中做一次强制更新，99.9% 的情况，是你在某个地方做错了事"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$forceUpdate"}]},{"type":"text","value":"迫使 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":" 实例重新渲染"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PS：仅仅影响实例本身和插入插槽内容的子组件，而不是所有子组件。"}]},{"type":"element","tag":"h3","props":{"id":"小结"},"children":[{"type":"text","value":"小结"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果为对象添加少量的新属性，可以直接采用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue.set()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果需要为新对象添加大量的新属性，则通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Object.assign()"}]},{"type":"text","value":"创建新对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"如果你实在不知道怎么操作时，可采取 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$forceUpdate()"}]},{"type":"text","value":"进行强制刷新 (不建议)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PS："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue3"}]},{"type":"text","value":"是用过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"proxy"}]},{"type":"text","value":"实现数据响应式的，直接动态添加新属性仍可以实现数据响应式"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-101654{color:#C586C0}\n.ct-fb27e4{color:#CE9178}\n.ct-932167{color:#DCDCAA}\n.ct-064a3d{color:#9CDCFE}\n.ct-0cb380{color:#4FC1FF}\n.ct-eee3d1{color:#D4D4D4}\n.ct-f1d77f{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"一直接添加属性的问题","depth":2,"text":"一、直接添加属性的问题"},{"id":"解决方案","depth":2,"text":"解决方案","children":[{"id":"vueset","depth":3,"text":"#Vue.set()"},{"id":"objectassign","depth":3,"text":"Object.assign()"},{"id":"forceupdate","depth":3,"text":"$forceUpdate"},{"id":"小结","depth":3,"text":"小结"}]}]}},"_type":"markdown","_id":"content:articles:vue给对象添加新属性，界面不更新.md","_source":"content","_file":"articles/vue给对象添加新属性，界面不更新.md","_extension":"md"},{"_path":"/articles/vue","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"vue深入浅出第1章","description":"Js有两种侦测变化，一种事Object.defineProperty，一种就是es6的Proxy。","date":"2022-05-30T00:00:00.000Z","tags":["vue2","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"变化侦测"},"children":[{"type":"text","value":"变化侦测"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Js有两种侦测变化，一种事Object.defineProperty，一种就是es6的Proxy。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那么什么是Object.defineProperty？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个方法接受3个参数："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"属性所在的对象"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"属性的名字"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"一个描述符对象"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"什么是描述符对象？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"数据属性："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"configurable:表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性，默认值为false。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"enumerable：表示能否通过for in循环访问属性，默认值为false。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"writable：表示能否修改属性的值。默认值为false。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"value：包含这个属性的数据值。默认值为undefined。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"configurable属性解析"}]}]},{"type":"element","tag":"code","props":{"code":"      let info = {\r\n            name: \"Dorr\"\r\n        }\r\n        Object.defineProperty(info, \"name\", {\r\n            configurable: false\r\n        })\r\n        delete info.name\r\n        console.log(info.name);\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ab189c"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" = {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-51a43f"},"children":[{"type":"text","value":"\"Dorr\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-538a72"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-51a43f"},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"configurable:"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab189c"},"children":[{"type":"text","value":"false\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ab189c"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"name\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-538a72"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述代码可以发现当configurable的值时fasle 的时候，使用的delete是无法删除属性。而当其是true时，打印的info.name就是undefined。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"writable属性解析"}]},{"type":"text","value":"，详细代码如下："}]},{"type":"element","tag":"code","props":{"code":"        Object.defineProperty(info, \"age\", {\r\n            writable: false,\r\n            value: 15\r\n\r\n        })\r\n        info.age = 20\r\n        console.log(info.age);//15\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-538a72"},"children":[{"type":"text","value":"defineProperty"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-51a43f"},"children":[{"type":"text","value":"\"age\""}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"writable:"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab189c"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"value:"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cf2c6d"},"children":[{"type":"text","value":"15\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-cf2c6d"},"children":[{"type":"text","value":"20\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-538a72"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4cf031"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-348b2b"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-dd7d56"},"children":[{"type":"text","value":"//15"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上述代码的意思就是我们给info对象新增一个名为age的属性，但是因为writable的是false，因此我们无法对age的值i进行修改。最后打印的值依然是15。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"enumerable属性解析"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当给这个属性的值设置为属性后，就无法使用迭代遍历器迭代出age属性的值。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-dd7d56{color:#6A9955}\n.ct-cf2c6d{color:#B5CEA8}\n.ct-538a72{color:#DCDCAA}\n.ct-51a43f{color:#CE9178}\n.ct-4cf031{color:#9CDCFE}\n.ct-ab189c{color:#569CD6}\n.ct-348b2b{color:#D4D4D4}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:vue深入浅出知识点.md","_source":"content","_file":"articles/vue深入浅出知识点.md","_extension":"md"},{"_path":"/articles/vue","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"vue在实例挂载发生了什么","description":"我之前学习Vue的时候听说过vue实例这几个字，但是还没有对vue在new Vue()这个过程中到底发生了什么？整个过程是如何解析模板，渲染数据，更新数据的。","date":"2021-11-26T00:00:00.000Z","tags":["vue","JavaScript"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我之前学习Vue的时候听说过vue实例这几个字，但是还没有对vue在new Vue()这个过程中到底发生了什么？整个过程是如何解析模板，渲染数据，更新数据的。"}]},{"type":"element","tag":"h1","props":{"id":"分析"},"children":[{"type":"text","value":"分析"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先找到vue的构造函数并进行分析：源码位置：src\\core\\instance\\index.js"}]},{"type":"element","tag":"code","props":{"code":"function Vue (options) {\r\n  if (process.env.NODE_ENV !== 'production' &&\r\n    !(this instanceof Vue)\r\n  ) {\r\n    warn('Vue is a constructor and should be called with the `new` keyword')\r\n  }\r\n  this._init(options)\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" &&\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    !("}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"instanceof"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  ) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'Vue is a constructor and should be called with the `new` keyword'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"_init"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"options"}]},{"type":"text","value":"是用户传递过来的配置项，如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data、methods"}]},{"type":"text","value":"等常用的方法。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":"构建函数调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_init"}]},{"type":"text","value":"方法，但我们发现本文件中并没有此方法，但仔细可以看到文件下方定定义了很多初始化方法"}]},{"type":"element","tag":"code","props":{"code":"initMixin(Vue);     // 定义 _init\r\nstateMixin(Vue);    // 定义 $set $get $delete $watch 等\r\neventsMixin(Vue);   // 定义事件  $on  $once $off $emit\r\nlifecycleMixin(Vue);// 定义 _update  $forceUpdate  $destroy\r\nrenderMixin(Vue);   // 定义 _render 返回虚拟dom\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":");     "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 定义 _init\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"stateMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":");    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 定义 $set $get $delete $watch 等\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"eventsMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":");   "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 定义事件  $on  $once $off $emit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"lifecycleMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":");"}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 定义 _update  $forceUpdate  $destroy\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"renderMixin"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":");   "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 定义 _render 返回虚拟dom"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先可以看 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"initMixin"}]},{"type":"text","value":"方法，发现该方法在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"原型上定义了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_init"}]},{"type":"text","value":"方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"源码位置：src\\core\\instance\\init.js"}]},{"type":"element","tag":"code","props":{"code":"\r\n\r\n\r\n\r\n\r\n\r\nVue.prototype._init = function (options?: Object) {\r\n    const vm: Component = this\r\n    // a uid\r\n    vm._uid = uid++\r\n    let startTag, endTag\r\n    /* istanbul ignore if */\r\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\r\n      startTag = `vue-perf-start:${vm._uid}`\r\n      endTag = `vue-perf-end:${vm._uid}`\r\n      mark(startTag)\r\n    }\r\n\r\n    // a flag to avoid this being observed\r\n    vm._isVue = true\r\n    // merge options\r\n    // 合并属性，判断初始化的是否是组件，这里合并主要是 mixins 或 extends 的方法\r\n    if (options && options._isComponent) {\r\n      // optimize internal component instantiation\r\n      // since dynamic options merging is pretty slow, and none of the\r\n      // internal component options needs special treatment.\r\n      initInternalComponent(vm, options)\r\n    } else { // 合并vue属性\r\n      vm.$options = mergeOptions(\r\n        resolveConstructorOptions(vm.constructor),\r\n        options || {},\r\n        vm\r\n      )\r\n    }\r\n    /* istanbul ignore else */\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // 初始化proxy拦截器\r\n      initProxy(vm)\r\n    } else {\r\n      vm._renderProxy = vm\r\n    }\r\n    // expose real self\r\n    vm._self = vm\r\n    // 初始化组件生命周期标志位\r\n    initLifecycle(vm)\r\n    // 初始化组件事件侦听\r\n    initEvents(vm)\r\n    // 初始化渲染方法\r\n    initRender(vm)\r\n    callHook(vm, 'beforeCreate')\r\n    // 初始化依赖注入内容，在初始化data、props之前\r\n    initInjections(vm) // resolve injections before data/props\r\n    // 初始化props/data/method/watch/methods\r\n    initState(vm)\r\n    initProvide(vm) // resolve provide after data/props\r\n    callHook(vm, 'created')\r\n\r\n    /* istanbul ignore if */\r\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\r\n      vm._name = formatComponentName(vm, false)\r\n      mark(endTag)\r\n      measure(`vue ${vm._name} init`, startTag, endTag)\r\n    }\r\n    // 挂载元素\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Vue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"_init"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"?: "}]},{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Component"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"this\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// a uid\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_uid"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"uid"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"++\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"startTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"endTag\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"/* istanbul ignore if */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"performance"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"mark"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"startTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`vue-perf-start:"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_uid"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"endTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`vue-perf-end:"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_uid"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"mark"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"startTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// a flag to avoid this being observed\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_isVue"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// merge options\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 合并属性，判断初始化的是否是组件，这里合并主要是 mixins 或 extends 的方法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_isComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// optimize internal component instantiation\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// since dynamic options merging is pretty slow, and none of the\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// internal component options needs special treatment.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initInternalComponent"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 合并vue属性\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"mergeOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"resolveConstructorOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" || {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"/* istanbul ignore else */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化proxy拦截器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_renderProxy"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// expose real self\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_self"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化组件生命周期标志位\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initLifecycle"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化组件事件侦听\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化渲染方法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initRender"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"callHook"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'beforeCreate'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化依赖注入内容，在初始化data、props之前\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initInjections"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// resolve injections before data/props\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化props/data/method/watch/methods\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initState"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initProvide"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// resolve provide after data/props\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"callHook"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'created'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"/* istanbul ignore if */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"performance"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"mark"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"formatComponentName"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"mark"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"endTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"measure"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`vue "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_name"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":" init`"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"startTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"endTag"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 挂载元素\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"$mount"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"el"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"仔细阅读上面的代码，我们得到以下结论："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beforeCreate"}]},{"type":"text","value":"之前，数据初始化并未完成，像 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"props"}]},{"type":"text","value":"这些属性无法访问到"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"到了 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"created"}]},{"type":"text","value":"的时候，数据已经初始化完成，能够访问 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"props"}]},{"type":"text","value":"这些属性，但这时候并未完成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dom"}]},{"type":"text","value":"的挂载，因此无法访问到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dom"}]},{"type":"text","value":"元素"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"挂载方法是调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$mount"}]},{"type":"text","value":"方法"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"initState"}]},{"type":"text","value":"方法是完成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"props/data/method/watch/methods"}]},{"type":"text","value":"的初始化"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"源码位置：src\\core\\instance\\state.js"}]},{"type":"element","tag":"code","props":{"code":"export function initState (vm: Component) {\r\n  // 初始化组件的watcher列表\r\n  vm._watchers = []\r\n  const opts = vm.$options\r\n  // 初始化props\r\n  if (opts.props) initProps(vm, opts.props)\r\n  // 初始化methods方法\r\n  if (opts.methods) initMethods(vm, opts.methods)\r\n  if (opts.data) {\r\n    // 初始化data  \r\n    initData(vm)\r\n  } else {\r\n    observe(vm._data = {}, true /* asRootData */)\r\n  }\r\n  if (opts.computed) initComputed(vm, opts.computed)\r\n  if (opts.watch && opts.watch !== nativeWatch) {\r\n    initWatch(vm, opts.watch)\r\n  }\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initState"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Component"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化组件的watcher列表\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_watchers"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化props\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initProps"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化methods方法\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initMethods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 初始化data  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initData"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"observe"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = {}, "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"/* asRootData */"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"computed"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initComputed"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"computed"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"nativeWatch"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initWatch"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"opts"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们和这里主要看初始化 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":"的方法为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"initData"}]},{"type":"text","value":"，它与 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"initState"}]},{"type":"text","value":"在同一文件上"}]},{"type":"element","tag":"code","props":{"code":"function initData (vm: Component) {\r\n  let data = vm.$options.data\r\n  // 获取到组件上的data\r\n  data = vm._data = typeof data === 'function'\r\n    ? getData(data, vm)\r\n    : data || {}\r\n  if (!isPlainObject(data)) {\r\n    data = {}\r\n    process.env.NODE_ENV !== 'production' && warn(\r\n      'data functions should return an object:\\n' +\r\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\r\n      vm\r\n    )\r\n  }\r\n  // proxy data on instance\r\n  const keys = Object.keys(data)\r\n  const props = vm.$options.props\r\n  const methods = vm.$options.methods\r\n  let i = keys.length\r\n  while (i--) {\r\n    const key = keys[i]\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // 属性名不能与方法名重复\r\n      if (methods && hasOwn(methods, key)) {\r\n        warn(\r\n          `Method \"${key}\" has already been defined as a data property.`,\r\n          vm\r\n        )\r\n      }\r\n    }\r\n    // 属性名不能与state名称重复\r\n    if (props && hasOwn(props, key)) {\r\n      process.env.NODE_ENV !== 'production' && warn(\r\n        `The data property \"${key}\" is already declared as a prop. ` +\r\n        `Use prop default value instead.`,\r\n        vm\r\n      )\r\n    } else if (!isReserved(key)) { // 验证key值的合法性\r\n      // 将_data中的数据挂载到组件vm上,这样就可以通过this.xxx访问到组件上的数据\r\n      proxy(vm, `_data`, key)\r\n    }\r\n  }\r\n  // observe data\r\n  // 响应式监听data是数据的变化\r\n  observe(data, true /* asRootData */)\r\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"initData"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cae578"},"children":[{"type":"text","value":"Component"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 获取到组件上的data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"_data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" === "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'function'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    ? "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"getData"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    : "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" || {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" (!"}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"isPlainObject"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'data functions should return an object:"}]},{"type":"element","tag":"span","props":{"class":"ct-0cf864"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// proxy data on instance\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"props\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"methods\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"length\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"--) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"keys"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 属性名不能与方法名重复\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"hasOwn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`Method \""}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"\" has already been defined as a data property.`"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 属性名不能与state名称重复\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"hasOwn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6c72f4"},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" !== "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"'production'"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" && "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"warn"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`The data property \""}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"\" is already declared as a prop. `"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`Use prop default value instead.`"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-579fe2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" (!"}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"isReserved"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")) { "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 验证key值的合法性\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 将_data中的数据挂载到组件vm上,这样就可以通过this.xxx访问到组件上的数据\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"proxy"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-924f7b"},"children":[{"type":"text","value":"`_data`"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// observe data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"// 响应式监听data是数据的变化\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-29a4fc"},"children":[{"type":"text","value":"observe"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1c1d6d"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-daf105"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e6fb2f"},"children":[{"type":"text","value":"/* asRootData */"}]},{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf750"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"仔细阅读上面的代码，我们可以得到以下结论："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"初始化顺序："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"props"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"methods"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":"定义的时候可选择函数形式或者对象形式（组件只能为函数形式）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"关于数据响应式在这就不展开详细说明"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上文提到挂载方法是调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vm.$mount"}]},{"type":"text","value":"方法"}]},{"type":"element","tag":"h2","props":{"id":"结论"},"children":[{"type":"text","value":"结论"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"new Vue"}]},{"type":"text","value":"的时候调用会调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_init"}]},{"type":"text","value":"方法"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$set"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$get"}]},{"type":"text","value":" 、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$delete"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$watch"}]},{"type":"text","value":" 等方法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$on"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$off"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$emit"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$off"}]},{"type":"text","value":"等事件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_update"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$forceUpdate"}]},{"type":"text","value":"、"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$destroy"}]},{"type":"text","value":"生命周期"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"调用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$mount"}]},{"type":"text","value":"进行页面的挂载"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"挂载的时候主要是通过 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mountComponent"}]},{"type":"text","value":"方法"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"updateComponent"}]},{"type":"text","value":"更新函数"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"执行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":"生成虚拟 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_update"}]},{"type":"text","value":"将虚拟 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]},{"type":"text","value":"生成真实 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DOM"}]},{"type":"text","value":"结构，并且渲染到页面中"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0cf864{color:#D7BA7D}\n.ct-e6fb2f{color:#6A9955}\n.ct-cae578{color:#4EC9B0}\n.ct-924f7b{color:#CE9178}\n.ct-6c72f4{color:#4FC1FF}\n.ct-579fe2{color:#C586C0}\n.ct-1c1d6d{color:#9CDCFE}\n.ct-29a4fc{color:#DCDCAA}\n.ct-cbf750{color:#D4D4D4}\n.ct-daf105{color:#569CD6}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"结论","depth":2,"text":"结论"}]}},"_type":"markdown","_id":"content:articles:vue在实例挂载的过程中发生了什么.md","_source":"content","_file":"articles/vue在实例挂载的过程中发生了什么.md","_extension":"md"}],"navigation":[{"title":"网站公共方法整合以及说明","_path":"/articles","children":[{"title":"12种常用的js函数","_path":"/articles/12"},{"title":"异步编程","_path":"/articles/2020-04-01-js"},{"title":"深入 JS 之作用域和闭包","_path":"/articles/2020-05-02-js"},{"title":"主题使用指南","_path":"/articles/2020-05-02"},{"title":"CSS中z-index属性在使用opacity后失效","_path":"/articles/2020-05-02-cssz-indexopacity"},{"title":"深入 JS 之原型和原型链","_path":"/articles/2020-05-29"},{"title":"深入JS之this","_path":"/articles/2020-06-09-jsthis"},{"title":"深入JS之内存机制","_path":"/articles/2020-06-22-js"},{"title":"深入JS之Promise","_path":"/articles/2020-06-27-js-promise"},{"title":"HTTP 缓存","_path":"/articles/2020-06-28-http"},{"title":"JQ给伪元素绑定事件","_path":"/articles/2021-11-20-jsyuan"},{"title":"JQuery 中slidedown和slideup函数使用注意","_path":"/articles/2022-01-17-jquery-slidedownslideup"},{"title":"深js解决浮点数运算精度丢失","_path":"/articles/2022-03-22-js"},{"title":"从(++[[]][+[]]+[+[]]) 等于10了解隐式转换","_path":"/articles/2022-04-14-js"},{"title":"blur与click冲突解决","_path":"/articles/2022-04-22-blurclick"},{"title":"node.js学习day01","_path":"/articles/2022-05-01-node.jsday01"},{"title":"小程序云开发学习","_path":"/articles/2022-06-01-copy"},{"title":"关于html模板引擎的尝试","_path":"/articles/html"},{"title":"浅谈对Vue的理解","_path":"/articles/vue"},{"title":"如何理解ES6中的Set和Map两种数据结构","_path":"/articles/es6setmap"},{"title":"设备像素、css像素、设备独立像素、dpr、ppi 之间的区别","_path":"/articles/cssdprppi"},{"title":"什么是SPA应用","_path":"/articles/spa"},{"title":"Core Web Vitals性能优化","_path":"/articles/core-web-vitals"},{"title":"css常用动画效果","_path":"/articles/css"},{"title":"em,px,rem,vh,vw区别","_path":"/articles/empxremvhvw"},{"title":"es6入门知识点总结","_path":"/articles/es6"},{"title":"js高级进阶","_path":"/articles/js"},{"title":"node.js代理解决跨域","_path":"/articles/node.js"},{"title":"node.js解决批量修改html文件","_path":"/articles/nodehtml"},{"title":"Nuxt.js与SSG","_path":"/articles/nuxt.jsssg"},{"title":"Promise详解","_path":"/articles/promise"},{"title":"SPA应用如何解决首屏加载速度慢的问题","_path":"/articles/spa"},{"title":"vue2基础知识复习巩固","_path":"/articles/vue2"},{"title":"动态给vue的data添加一个新的属性时会发生什么？怎样解决？","_path":"/articles/vue"},{"title":"vue深入浅出第1章","_path":"/articles/vue"},{"title":"vue在实例挂载发生了什么","_path":"/articles/vue"}]},{"title":"脚本加载失败如何重试","_path":"/articles"},{"title":"面向对象","_path":"/articles"},{"title":"如何判断鼠标是否离开页面","_path":"/articles"},{"title":"尾递归的理解，有哪些应用场景","_path":"/articles"},{"title":"字符串常用方法","_path":"/articles"}]}