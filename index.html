<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>侯某的个人网站</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="前端相关的博客">
<link rel="apple-touch-icon" sizes="180x180" type="image/x-icon" href="/myblog/apple-touch-icon.png">
<link rel="icon" sizes="32x32" type="image/png" href="/myblog/favicon-32x32.png">
<link rel="icon" sizes="16x16" type="image/png" href="/myblog/favicon-16x16.png">
<link rel="manifest" href="/myblog/site.webmanifest">
<link rel="shortcut icon" type="image/x-icon" href="/myblog/favicon.ico"><link rel="preload" as="fetch" crossorigin="anonymous" href="/myblog/_payload.json"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/entry.10d87d8f.js"><link rel="preload" as="style" href="/myblog/_nuxt/entry.a3bd1811.css"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/index.db2acace.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/publicMethos.57c6e402.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/nuxt-link.2e60e9c1.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/_plugin-vue_export-helper.c27b6911.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/query.35f740aa.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/utils.83e403af.js"><link rel="modulepreload" as="script" crossorigin href="/myblog/_nuxt/preview.4dce322b.js"><link rel="prefetch" as="image" type="image/svg+xml" href="/myblog/_nuxt/fa-brands-400.9b3a8965.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/myblog/_nuxt/fa-regular-400.62f1f2b9.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/myblog/_nuxt/fa-solid-900.25630646.svg"><link rel="prefetch" as="script" crossorigin href="/myblog/_nuxt/error-component.26c36bab.js"><link rel="prefetch" as="image" type="image/jpeg" href="/myblog/_nuxt/pexels-kevin-bidwell-2042281.d83e9566.jpg"><link rel="prefetch" as="image" type="image/jpeg" href="/myblog/_nuxt/pexels-andrea-davis-3653849.92a70a6a.jpg"><link rel="stylesheet" href="/myblog/_nuxt/entry.a3bd1811.css"><style>.posts[data-v-f034d7a3]{flex-direction:row}article[data-v-f034d7a3]{margin:0 6em 0 0}</style></head>
<body ><div id="__nuxt"><div><div id="wrapper" data-v-f034d7a3><div data-v-f034d7a3><div id="sidebar" class=""><div class="inner"><section id="search" class="alt"><form method="post" action="#"><input type="text" name="query" id="query" placeholder="搜索"></form></section><nav id="menu"><header class="major"><h2>菜单</h2></header><ul><li><a aria-current="page" href="/myblog/" class="router-link-active router-link-exact-active">主页</a></li><li><a href="/myblog/blog" class="">blog</a></li><li> 旅游 </li><li> 生活 </li></ul></nav><section><ul class="contact"><li class="icon solid fa-envelope">1726660621@qq.com</li><li class="icon solid fa-phone">17380127492</li><li class="icon solid fa-home">四川省成都市水碾河</li></ul></section><footer id="footer"><p class="copyright">@版权所有-HLC的个人博客，记录生活，成长学习</p></footer></div><a href="javascript:;" rel="noopener noreferrer" class="toggle">Toggle</a></div></div><div id="main" class="" data-v-f034d7a3><div class="inner" data-v-f034d7a3><div data-v-f034d7a3><header id="header"><a aria-current="page" href="/myblog/" class="router-link-active router-link-exact-active logo"><strong>Dorr</strong></a><ul class="icons"><li><a aria-current="page" href="/myblog/#" class="router-link-active router-link-exact-active icon brands fa-twitter"><span class="label">Twitter</span></a></li><li><a aria-current="page" href="/myblog/#" class="router-link-active router-link-exact-active icon brands fa-facebook-f"><span class="label">Facebook</span></a></li><li><a aria-current="page" href="/myblog/#" class="router-link-active router-link-exact-active icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a></li><li><a aria-current="page" href="/myblog/#" class="router-link-active router-link-exact-active icon brands fa-instagram"><span class="label">Instagram</span></a></li><li><a aria-current="page" href="/myblog/#" class="router-link-active router-link-exact-active icon brands fa-medium-m"><span class="label">Medium</span></a></li></ul></header></div><section id="banner" data-v-f034d7a3><div class="content" data-aos="fade-right" data-aos-duration="800" data-v-f034d7a3><header data-v-f034d7a3><h1 data-v-f034d7a3> 嗨咯，欢迎来到<br data-v-f034d7a3> Hlc的个人站点 </h1><p data-v-f034d7a3>记录工作，生活的个人网站</p></header><p data-v-f034d7a3> 作为一名web前端开发人员，我负责构建和维护网站和应用程序。我有扎实的HTML、CSS和JavaScript编程技能，能够将设计师提供的设计转化为交互性强、易于使用的网站和应用程序。 能够根据项目需求选择合适的工具。我了解响应式设计和移动优先设计的原则，并能够开发适用于各种设备和屏幕大小的网站和应用程序。 我也了解后端开发，熟悉Node.js和Express框架，能够与后端开发人员合作构建完整的应用程序。我了解数据库设计和管理，能够使用MySQL和MongoDB等数据库管理工具。 我注重代码质量和可维护性，熟悉版本控制工具，例如Git和SVN，能够使用这些工具进行协作开发。 </p></div><span class="image object" data-aos="fade-up" data-aos-duration="800" data-v-f034d7a3><img src="/myblog/_nuxt/pexels-kevin-bidwell-2042281.d83e9566.jpg" alt="" data-v-f034d7a3></span></section><section data-v-f034d7a3><header class="major" data-v-f034d7a3><h2 data-v-f034d7a3>关于我</h2></header><div class="features" data-v-f034d7a3><article data-aos="fade-right" data-aos-duration="800" data-v-f034d7a3><span class="icon fa-gem" data-v-f034d7a3></span><div class="content" data-v-f034d7a3><h3 data-v-f034d7a3>用户体验设计</h3><p data-v-f034d7a3> 我非常注重用户体验设计，通过仔细考虑用户需求和习惯，我可以优化您的网站，使其更加易于使用和可访问，从而提高用户的满意度和忠诚度。 </p></div></article><article data-aos="fade-right" data-aos-duration="1200" data-v-f034d7a3><span class="icon solid fa-paper-plane" data-v-f034d7a3></span><div class="content" data-v-f034d7a3><h3 data-v-f034d7a3>技术栈广泛</h3><p data-v-f034d7a3> 我拥有多年的前端开发经验，熟练掌握HTML、CSS、JavaScript等多种技术，并且不断学习和掌握最新的技术和趋势，因此可以将我的广泛技术栈作为我的优势来展示我的全面性和专业性。 </p></div></article><article data-aos="fade-right" data-aos-duration="1400" data-v-f034d7a3><span class="icon solid fa-rocket" data-v-f034d7a3></span><div class="content" data-v-f034d7a3><h3 data-v-f034d7a3>协作能力</h3><p data-v-f034d7a3> 我拥有很强的协作能力，与其他团队成员如设计师、后端工程师等等紧密合作，我了解如何与他人合作，提供建设性的反馈，促进项目进展，并确保项目成功完成。 </p></div></article><article data-aos="fade-right" data-aos-duration="1600" data-v-f034d7a3><span class="icon solid fa-signal" data-v-f034d7a3></span><div class="content" data-v-f034d7a3><h3 data-v-f034d7a3>持续学习</h3><p data-v-f034d7a3> 作为前端开发人员，我始终保持学习的状态，并随时掌握最新的技术和趋势。我了解学习新技能的重要性，因此我将我的持续学习能力作为我的优势，展示我的学习能力和适应能力。 </p></div></article></div></section><section data-v-f034d7a3><header class="major" data-v-f034d7a3><h2 data-v-f034d7a3>最新博客</h2></header><div class="posts" data-v-f034d7a3><!--[--><article data-aos="fade-up" data-aos-duration="800" data-v-f034d7a3><a href="#" class="image" data-v-f034d7a3><img src="/myblog/_nuxt/pexels-andrea-davis-3653849.92a70a6a.jpg" alt="" data-v-f034d7a3></a><h3 data-v-f034d7a3>异步编程</h3><p data-v-f034d7a3>Javcscript是单线程机制，单线程模型指的是，JavaScript只在一个线程上运行。也就是说，JavaScript 同时只能执行一个任务，其他任务都必须在后面排队等待。JavaScript 之所以采用单线程，而不是多线程，原因是不想让浏览器变得太复杂，因为多线程需要共享资源、且有可能修改彼此的运行结果，对于一种网页脚本语言来说，这就太复杂了。</p><ul class="actions" data-v-f034d7a3><li data-v-f034d7a3><div class="button" data-v-f034d7a3> 更多 </div></li></ul></article><article data-aos="fade-up" data-aos-duration="800" data-v-f034d7a3><a href="#" class="image" data-v-f034d7a3><img src="/myblog/_nuxt/pexels-andrea-davis-3653849.92a70a6a.jpg" alt="" data-v-f034d7a3></a><h3 data-v-f034d7a3>CSS中z-index属性在使用opacity后失效</h3><p data-v-f034d7a3>本篇博客主要是对 CSS 中 z-index 属性在使用 opacity 后失效</p><ul class="actions" data-v-f034d7a3><li data-v-f034d7a3><div class="button" data-v-f034d7a3> 更多 </div></li></ul></article><article data-aos="fade-up" data-aos-duration="800" data-v-f034d7a3><a href="#" class="image" data-v-f034d7a3><img src="/myblog/_nuxt/pexels-andrea-davis-3653849.92a70a6a.jpg" alt="" data-v-f034d7a3></a><h3 data-v-f034d7a3>深入 JS 之作用域和闭包</h3><p data-v-f034d7a3>本篇博客主要是对 Javcscript 作用域和闭包学习理解</p><ul class="actions" data-v-f034d7a3><li data-v-f034d7a3><div class="button" data-v-f034d7a3> 更多 </div></li></ul></article><!--]--></div></section></div></div></div></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/myblog/_payload.json">[{"state":1,"_errors":3,"serverRendered":5,"pinia":6,"prerenderedAt":5098},["Reactive",2],{},["Reactive",4],{},true,["Reactive",7],{"articles":8},{"recentArticle":9,"allArticle":5097},[10,3216,3272],{"_path":11,"_dir":12,"_draft":13,"_partial":13,"_locale":14,"_empty":13,"title":15,"description":16,"date":17,"tags":18,"body":20,"_type":3211,"_id":3212,"_source":3213,"_file":3214,"_extension":3215},"/articles/2020-04-01-js","articles",false,"","异步编程","Javcscript是单线程机制，单线程模型指的是，JavaScript只在一个线程上运行。也就是说，JavaScript 同时只能执行一个任务，其他任务都必须在后面排队等待。JavaScript 之所以采用单线程，而不是多线程，原因是不想让浏览器变得太复杂，因为多线程需要共享资源、且有可能修改彼此的运行结果，对于一种网页脚本语言来说，这就太复杂了。","2020-04-01T00:00:00.000Z",[19],"JavaScript",{"type":21,"children":22,"toc":3200},"root",[23,30,37,42,47,82,87,92,116,127,138,147,153,158,333,356,362,367,545,593,614,620,666,901,948,966,972,1015,1037,1122,1138,1329,1334,1670,1723,1729,1746,1780,1789,1834,2058,2126,2132,2173,2183,2225,2325,2342,3100,3141,3150,3155,3195],{"type":24,"tag":25,"props":26,"children":27},"element","p",{},[28],{"type":29,"value":16},"text",{"type":24,"tag":31,"props":32,"children":34},"h2",{"id":33},"异步编程解决了什么问题",[35],{"type":29,"value":36},"异步编程解决了什么问题？",{"type":24,"tag":25,"props":38,"children":39},{},[40],{"type":29,"value":41},"单线程的好处是实现起来比较简单，执行环境相对单纯；坏处是只要有一个任务耗时很长，后面的任务都必须排队等着，会拖延整个程序的执行。常见的浏览器无响应（假死），往往就是因为某一段JavaScript代码长时间运行（比如死循环），导致整个页面卡在这个地方，其他任务无法执行。",{"type":24,"tag":25,"props":43,"children":44},{},[45],{"type":29,"value":46},"为了解决JavaScript执行任务只能一个一个排队执行得问题（同步执行）引入了异步编程方案来实现（异步并行执行任务），对于几种常见异步编程方案有：",{"type":24,"tag":48,"props":49,"children":50},"ul",{},[51,57,62,67,72,77],{"type":24,"tag":52,"props":53,"children":54},"li",{},[55],{"type":29,"value":56},"回调函数",{"type":24,"tag":52,"props":58,"children":59},{},[60],{"type":29,"value":61},"事件监听",{"type":24,"tag":52,"props":63,"children":64},{},[65],{"type":29,"value":66},"发布/订阅",{"type":24,"tag":52,"props":68,"children":69},{},[70],{"type":29,"value":71},"Promise对象",{"type":24,"tag":52,"props":73,"children":74},{},[75],{"type":29,"value":76},"Generator/yield（ES6）",{"type":24,"tag":52,"props":78,"children":79},{},[80],{"type":29,"value":81},"async/await（ES7）",{"type":24,"tag":31,"props":83,"children":85},{"id":84},"同步和异步任务",[86],{"type":29,"value":84},{"type":24,"tag":25,"props":88,"children":89},{},[90],{"type":29,"value":91},"程序里面所有的任务，可以分成两类：同步任务（synchronous）和异步任务（asynchronous）。",{"type":24,"tag":48,"props":93,"children":94},{},[95,106],{"type":24,"tag":52,"props":96,"children":97},{},[98,104],{"type":24,"tag":99,"props":100,"children":101},"code-inline",{},[102],{"type":29,"value":103},"同步任务",{"type":29,"value":105},":是指那些没有被引擎挂起、在主线程上排队执行的任务。只有前一个任务执行完毕，才能执行后一个任务。",{"type":24,"tag":52,"props":107,"children":108},{},[109,114],{"type":24,"tag":99,"props":110,"children":111},{},[112],{"type":29,"value":113},"异步任务",{"type":29,"value":115},":是指那些被引擎放在一边，不进入主线程、而进入任务队列的任务。",{"type":24,"tag":25,"props":117,"children":118},{},[119,121,125],{"type":29,"value":120},"只有引擎认为某个异步任务可以执行了（比如 Ajax 操作从服务器得到了结果），该任务（采用回调函数的形式）才会进入主线程执行。",{"type":24,"tag":99,"props":122,"children":123},{},[124],{"type":29,"value":19},{"type":29,"value":126},"运行时，除了一个正在运行的主线程，引擎还提供一个任务队列（task queue），里面是各种需要当前程序处理的异步任务。",{"type":24,"tag":25,"props":128,"children":129},{},[130,132,136],{"type":29,"value":131},"异步任务的写法通常是 ",{"type":24,"tag":99,"props":133,"children":134},{},[135],{"type":29,"value":56},{"type":29,"value":137},"。一旦异步任务重新进入主线程，就会执行对应的回调函数。如果一个异步任务没有回调函数，就不会进入任务队列，也就是说，不会重新进入主线程，因为没有用回调函数指定下一步的操作。",{"type":24,"tag":25,"props":139,"children":140},{},[141],{"type":24,"tag":142,"props":143,"children":144},"strong",{},[145],{"type":29,"value":146},"下面总结一下异步操作的几种模式。",{"type":24,"tag":31,"props":148,"children":150},{"id":149},"_1回调函数",[151],{"type":29,"value":152},"1、回调函数",{"type":24,"tag":25,"props":154,"children":155},{},[156],{"type":29,"value":157},"回调函数是异步操作最基本的方法，一般指函数里面嵌套函数来调用其他函数。",{"type":24,"tag":159,"props":160,"children":164},"code",{"code":161,"language":162,"meta":163},"function f1(callback) {\r\n  // ...\r\n  callback();\r\n}\r\n\r\nfunction f2() {\r\n  // ...\r\n}\r\n\r\nf1(f2);\n","js",null,[165],{"type":24,"tag":166,"props":167,"children":168},"pre",{},[169],{"type":24,"tag":159,"props":170,"children":171},{"__ignoreMap":14},[172,212,227,244,253,262,284,296,304,312],{"type":24,"tag":173,"props":174,"children":177},"span",{"class":175,"line":176},"line",1,[178,184,190,196,201,207],{"type":24,"tag":173,"props":179,"children":181},{"class":180},"ct-4bb509",[182],{"type":29,"value":183},"function",{"type":24,"tag":173,"props":185,"children":187},{"class":186},"ct-56eaea",[188],{"type":29,"value":189}," ",{"type":24,"tag":173,"props":191,"children":193},{"class":192},"ct-3df832",[194],{"type":29,"value":195},"f1",{"type":24,"tag":173,"props":197,"children":198},{"class":186},[199],{"type":29,"value":200},"(",{"type":24,"tag":173,"props":202,"children":204},{"class":203},"ct-565978",[205],{"type":29,"value":206},"callback",{"type":24,"tag":173,"props":208,"children":209},{"class":186},[210],{"type":29,"value":211},") {\n",{"type":24,"tag":173,"props":213,"children":215},{"class":175,"line":214},2,[216,221],{"type":24,"tag":173,"props":217,"children":218},{"class":186},[219],{"type":29,"value":220},"  ",{"type":24,"tag":173,"props":222,"children":224},{"class":223},"ct-ca0565",[225],{"type":29,"value":226},"// ...\n",{"type":24,"tag":173,"props":228,"children":230},{"class":175,"line":229},3,[231,235,239],{"type":24,"tag":173,"props":232,"children":233},{"class":186},[234],{"type":29,"value":220},{"type":24,"tag":173,"props":236,"children":237},{"class":192},[238],{"type":29,"value":206},{"type":24,"tag":173,"props":240,"children":241},{"class":186},[242],{"type":29,"value":243},"();\n",{"type":24,"tag":173,"props":245,"children":247},{"class":175,"line":246},4,[248],{"type":24,"tag":173,"props":249,"children":250},{"class":186},[251],{"type":29,"value":252},"}\n",{"type":24,"tag":173,"props":254,"children":256},{"class":175,"line":255},5,[257],{"type":24,"tag":173,"props":258,"children":259},{},[260],{"type":29,"value":261},"\n",{"type":24,"tag":173,"props":263,"children":265},{"class":175,"line":264},6,[266,270,274,279],{"type":24,"tag":173,"props":267,"children":268},{"class":180},[269],{"type":29,"value":183},{"type":24,"tag":173,"props":271,"children":272},{"class":186},[273],{"type":29,"value":189},{"type":24,"tag":173,"props":275,"children":276},{"class":192},[277],{"type":29,"value":278},"f2",{"type":24,"tag":173,"props":280,"children":281},{"class":186},[282],{"type":29,"value":283},"() {\n",{"type":24,"tag":173,"props":285,"children":287},{"class":175,"line":286},7,[288,292],{"type":24,"tag":173,"props":289,"children":290},{"class":186},[291],{"type":29,"value":220},{"type":24,"tag":173,"props":293,"children":294},{"class":223},[295],{"type":29,"value":226},{"type":24,"tag":173,"props":297,"children":299},{"class":175,"line":298},8,[300],{"type":24,"tag":173,"props":301,"children":302},{"class":186},[303],{"type":29,"value":252},{"type":24,"tag":173,"props":305,"children":307},{"class":175,"line":306},9,[308],{"type":24,"tag":173,"props":309,"children":310},{},[311],{"type":29,"value":261},{"type":24,"tag":173,"props":313,"children":315},{"class":175,"line":314},10,[316,320,324,328],{"type":24,"tag":173,"props":317,"children":318},{"class":192},[319],{"type":29,"value":195},{"type":24,"tag":173,"props":321,"children":322},{"class":186},[323],{"type":29,"value":200},{"type":24,"tag":173,"props":325,"children":326},{"class":203},[327],{"type":29,"value":278},{"type":24,"tag":173,"props":329,"children":330},{"class":186},[331],{"type":29,"value":332},");",{"type":24,"tag":48,"props":334,"children":335},{},[336,346],{"type":24,"tag":52,"props":337,"children":338},{},[339,344],{"type":24,"tag":99,"props":340,"children":341},{},[342],{"type":29,"value":343},"优点",{"type":29,"value":345},"：简单、容易理解和实现。",{"type":24,"tag":52,"props":347,"children":348},{},[349,354],{"type":24,"tag":99,"props":350,"children":351},{},[352],{"type":29,"value":353},"缺点",{"type":29,"value":355},"：不利于代码的阅读和维护，容易形成‘回调地狱’，各个部分之间高度耦合（coupling），使得程序结构混乱、流程难以追踪（尤其是多个回调函数嵌套的情况），而且每个任务只能指定一个回调函数。",{"type":24,"tag":31,"props":357,"children":359},{"id":358},"_2事件监听",[360],{"type":29,"value":361},"2、事件监听",{"type":24,"tag":25,"props":363,"children":364},{},[365],{"type":29,"value":366},"事件监听是采用事件驱动模式。异步任务的执行不取决于代码的顺序，而取决于某个事件是否发生。",{"type":24,"tag":159,"props":368,"children":370},{"code":369,"language":162,"meta":163},"f1.on('done', f2);\r\n\r\nfunction f1() {\r\n  setTimeout(function () {\r\n    // ...\r\n    f1.trigger('done'); // 触发done事情\r\n  }, 1000);\r\n}\n",[371],{"type":24,"tag":166,"props":372,"children":373},{},[374],{"type":24,"tag":159,"props":375,"children":376},{"__ignoreMap":14},[377,418,425,444,469,481,519,537],{"type":24,"tag":173,"props":378,"children":379},{"class":175,"line":176},[380,384,389,394,398,404,409,413],{"type":24,"tag":173,"props":381,"children":382},{"class":203},[383],{"type":29,"value":195},{"type":24,"tag":173,"props":385,"children":386},{"class":186},[387],{"type":29,"value":388},".",{"type":24,"tag":173,"props":390,"children":391},{"class":192},[392],{"type":29,"value":393},"on",{"type":24,"tag":173,"props":395,"children":396},{"class":186},[397],{"type":29,"value":200},{"type":24,"tag":173,"props":399,"children":401},{"class":400},"ct-2c5239",[402],{"type":29,"value":403},"'done'",{"type":24,"tag":173,"props":405,"children":406},{"class":186},[407],{"type":29,"value":408},", ",{"type":24,"tag":173,"props":410,"children":411},{"class":203},[412],{"type":29,"value":278},{"type":24,"tag":173,"props":414,"children":415},{"class":186},[416],{"type":29,"value":417},");\n",{"type":24,"tag":173,"props":419,"children":420},{"class":175,"line":214},[421],{"type":24,"tag":173,"props":422,"children":423},{},[424],{"type":29,"value":261},{"type":24,"tag":173,"props":426,"children":427},{"class":175,"line":229},[428,432,436,440],{"type":24,"tag":173,"props":429,"children":430},{"class":180},[431],{"type":29,"value":183},{"type":24,"tag":173,"props":433,"children":434},{"class":186},[435],{"type":29,"value":189},{"type":24,"tag":173,"props":437,"children":438},{"class":192},[439],{"type":29,"value":195},{"type":24,"tag":173,"props":441,"children":442},{"class":186},[443],{"type":29,"value":283},{"type":24,"tag":173,"props":445,"children":446},{"class":175,"line":246},[447,451,456,460,464],{"type":24,"tag":173,"props":448,"children":449},{"class":186},[450],{"type":29,"value":220},{"type":24,"tag":173,"props":452,"children":453},{"class":192},[454],{"type":29,"value":455},"setTimeout",{"type":24,"tag":173,"props":457,"children":458},{"class":186},[459],{"type":29,"value":200},{"type":24,"tag":173,"props":461,"children":462},{"class":180},[463],{"type":29,"value":183},{"type":24,"tag":173,"props":465,"children":466},{"class":186},[467],{"type":29,"value":468}," () {\n",{"type":24,"tag":173,"props":470,"children":471},{"class":175,"line":255},[472,477],{"type":24,"tag":173,"props":473,"children":474},{"class":186},[475],{"type":29,"value":476},"    ",{"type":24,"tag":173,"props":478,"children":479},{"class":223},[480],{"type":29,"value":226},{"type":24,"tag":173,"props":482,"children":483},{"class":175,"line":264},[484,488,492,496,501,505,509,514],{"type":24,"tag":173,"props":485,"children":486},{"class":186},[487],{"type":29,"value":476},{"type":24,"tag":173,"props":489,"children":490},{"class":203},[491],{"type":29,"value":195},{"type":24,"tag":173,"props":493,"children":494},{"class":186},[495],{"type":29,"value":388},{"type":24,"tag":173,"props":497,"children":498},{"class":192},[499],{"type":29,"value":500},"trigger",{"type":24,"tag":173,"props":502,"children":503},{"class":186},[504],{"type":29,"value":200},{"type":24,"tag":173,"props":506,"children":507},{"class":400},[508],{"type":29,"value":403},{"type":24,"tag":173,"props":510,"children":511},{"class":186},[512],{"type":29,"value":513},"); ",{"type":24,"tag":173,"props":515,"children":516},{"class":223},[517],{"type":29,"value":518},"// 触发done事情\n",{"type":24,"tag":173,"props":520,"children":521},{"class":175,"line":286},[522,527,533],{"type":24,"tag":173,"props":523,"children":524},{"class":186},[525],{"type":29,"value":526},"  }, ",{"type":24,"tag":173,"props":528,"children":530},{"class":529},"ct-f729d8",[531],{"type":29,"value":532},"1000",{"type":24,"tag":173,"props":534,"children":535},{"class":186},[536],{"type":29,"value":417},{"type":24,"tag":173,"props":538,"children":539},{"class":175,"line":298},[540],{"type":24,"tag":173,"props":541,"children":542},{"class":186},[543],{"type":29,"value":544},"}",{"type":24,"tag":25,"props":546,"children":547},{},[548,550,554,556,560,562,567,569,573,575,579,581,585,587,591],{"type":29,"value":549},"上面代码使用JQuery编写， 首先，为 ",{"type":24,"tag":99,"props":551,"children":552},{},[553],{"type":29,"value":195},{"type":29,"value":555},"绑定一个事件，当 ",{"type":24,"tag":99,"props":557,"children":558},{},[559],{"type":29,"value":195},{"type":29,"value":561},"发生 ",{"type":24,"tag":99,"props":563,"children":564},{},[565],{"type":29,"value":566},"done",{"type":29,"value":568},"事件，就执行 ",{"type":24,"tag":99,"props":570,"children":571},{},[572],{"type":29,"value":278},{"type":29,"value":574},"，而 ",{"type":24,"tag":99,"props":576,"children":577},{},[578],{"type":29,"value":195},{"type":29,"value":580},"执行完成后，立即触发 ",{"type":24,"tag":99,"props":582,"children":583},{},[584],{"type":29,"value":566},{"type":29,"value":586},"事件，从而开始执行 ",{"type":24,"tag":99,"props":588,"children":589},{},[590],{"type":29,"value":278},{"type":29,"value":592},"。",{"type":24,"tag":48,"props":594,"children":595},{},[596,605],{"type":24,"tag":52,"props":597,"children":598},{},[599,603],{"type":24,"tag":99,"props":600,"children":601},{},[602],{"type":29,"value":343},{"type":29,"value":604},"：比较容易理解，可以绑定多个事件，每个事件可以指定多个回调函数，而且可以\"去耦合\"（Decoupling），有利于实现模块化。",{"type":24,"tag":52,"props":606,"children":607},{},[608,612],{"type":24,"tag":99,"props":609,"children":610},{},[611],{"type":29,"value":353},{"type":29,"value":613},"：整个程序都要变成事件驱动型，运行流程会变得很不清晰。",{"type":24,"tag":31,"props":615,"children":617},{"id":616},"_3发布订阅",[618],{"type":29,"value":619},"3、发布/订阅",{"type":24,"tag":25,"props":621,"children":622},{},[623,625,630,632,637,639,644,646,651,653,658,660,665],{"type":29,"value":624},"事件完全可以理解成 ",{"type":24,"tag":99,"props":626,"children":627},{},[628],{"type":29,"value":629},"信号",{"type":29,"value":631},"，如果存在一个 ",{"type":24,"tag":99,"props":633,"children":634},{},[635],{"type":29,"value":636},"信号中心",{"type":29,"value":638},"，某个任务执行完成，就向信号中心 ",{"type":24,"tag":99,"props":640,"children":641},{},[642],{"type":29,"value":643},"发布",{"type":29,"value":645},"一个信号，其他任务可以向信号中心 ",{"type":24,"tag":99,"props":647,"children":648},{},[649],{"type":29,"value":650},"订阅",{"type":29,"value":652},"这个信号，从而知道什么时候自己可以开始执行。这就叫做 ",{"type":24,"tag":99,"props":654,"children":655},{},[656],{"type":29,"value":657},"发布/订阅模式",{"type":29,"value":659},"，又称 ",{"type":24,"tag":99,"props":661,"children":662},{},[663],{"type":29,"value":664},"观察者模式",{"type":29,"value":592},{"type":24,"tag":159,"props":667,"children":669},{"code":668,"language":162,"meta":163},"// 订阅信号\r\njQuery.subscribe('done', f2);\r\n\r\nfunction f1() {\r\n  setTimeout(function () {\r\n    // ...\r\n    // 向信号中心jQuery发布done信号,从而引发f2的执行\r\n    jQuery.publish('done');\r\n  }, 1000);\r\n}\r\n\r\n// 取消订阅\r\njQuery.unsubscribe('done', f2);\n",[670],{"type":24,"tag":166,"props":671,"children":672},{},[673],{"type":24,"tag":159,"props":674,"children":675},{"__ignoreMap":14},[676,684,721,728,747,770,781,793,825,840,847,855,864],{"type":24,"tag":173,"props":677,"children":678},{"class":175,"line":176},[679],{"type":24,"tag":173,"props":680,"children":681},{"class":223},[682],{"type":29,"value":683},"// 订阅信号\n",{"type":24,"tag":173,"props":685,"children":686},{"class":175,"line":214},[687,692,696,701,705,709,713,717],{"type":24,"tag":173,"props":688,"children":689},{"class":203},[690],{"type":29,"value":691},"jQuery",{"type":24,"tag":173,"props":693,"children":694},{"class":186},[695],{"type":29,"value":388},{"type":24,"tag":173,"props":697,"children":698},{"class":192},[699],{"type":29,"value":700},"subscribe",{"type":24,"tag":173,"props":702,"children":703},{"class":186},[704],{"type":29,"value":200},{"type":24,"tag":173,"props":706,"children":707},{"class":400},[708],{"type":29,"value":403},{"type":24,"tag":173,"props":710,"children":711},{"class":186},[712],{"type":29,"value":408},{"type":24,"tag":173,"props":714,"children":715},{"class":203},[716],{"type":29,"value":278},{"type":24,"tag":173,"props":718,"children":719},{"class":186},[720],{"type":29,"value":417},{"type":24,"tag":173,"props":722,"children":723},{"class":175,"line":229},[724],{"type":24,"tag":173,"props":725,"children":726},{},[727],{"type":29,"value":261},{"type":24,"tag":173,"props":729,"children":730},{"class":175,"line":246},[731,735,739,743],{"type":24,"tag":173,"props":732,"children":733},{"class":180},[734],{"type":29,"value":183},{"type":24,"tag":173,"props":736,"children":737},{"class":186},[738],{"type":29,"value":189},{"type":24,"tag":173,"props":740,"children":741},{"class":192},[742],{"type":29,"value":195},{"type":24,"tag":173,"props":744,"children":745},{"class":186},[746],{"type":29,"value":283},{"type":24,"tag":173,"props":748,"children":749},{"class":175,"line":255},[750,754,758,762,766],{"type":24,"tag":173,"props":751,"children":752},{"class":186},[753],{"type":29,"value":220},{"type":24,"tag":173,"props":755,"children":756},{"class":192},[757],{"type":29,"value":455},{"type":24,"tag":173,"props":759,"children":760},{"class":186},[761],{"type":29,"value":200},{"type":24,"tag":173,"props":763,"children":764},{"class":180},[765],{"type":29,"value":183},{"type":24,"tag":173,"props":767,"children":768},{"class":186},[769],{"type":29,"value":468},{"type":24,"tag":173,"props":771,"children":772},{"class":175,"line":264},[773,777],{"type":24,"tag":173,"props":774,"children":775},{"class":186},[776],{"type":29,"value":476},{"type":24,"tag":173,"props":778,"children":779},{"class":223},[780],{"type":29,"value":226},{"type":24,"tag":173,"props":782,"children":783},{"class":175,"line":286},[784,788],{"type":24,"tag":173,"props":785,"children":786},{"class":186},[787],{"type":29,"value":476},{"type":24,"tag":173,"props":789,"children":790},{"class":223},[791],{"type":29,"value":792},"// 向信号中心jQuery发布done信号,从而引发f2的执行\n",{"type":24,"tag":173,"props":794,"children":795},{"class":175,"line":298},[796,800,804,808,813,817,821],{"type":24,"tag":173,"props":797,"children":798},{"class":186},[799],{"type":29,"value":476},{"type":24,"tag":173,"props":801,"children":802},{"class":203},[803],{"type":29,"value":691},{"type":24,"tag":173,"props":805,"children":806},{"class":186},[807],{"type":29,"value":388},{"type":24,"tag":173,"props":809,"children":810},{"class":192},[811],{"type":29,"value":812},"publish",{"type":24,"tag":173,"props":814,"children":815},{"class":186},[816],{"type":29,"value":200},{"type":24,"tag":173,"props":818,"children":819},{"class":400},[820],{"type":29,"value":403},{"type":24,"tag":173,"props":822,"children":823},{"class":186},[824],{"type":29,"value":417},{"type":24,"tag":173,"props":826,"children":827},{"class":175,"line":306},[828,832,836],{"type":24,"tag":173,"props":829,"children":830},{"class":186},[831],{"type":29,"value":526},{"type":24,"tag":173,"props":833,"children":834},{"class":529},[835],{"type":29,"value":532},{"type":24,"tag":173,"props":837,"children":838},{"class":186},[839],{"type":29,"value":417},{"type":24,"tag":173,"props":841,"children":842},{"class":175,"line":314},[843],{"type":24,"tag":173,"props":844,"children":845},{"class":186},[846],{"type":29,"value":252},{"type":24,"tag":173,"props":848,"children":850},{"class":175,"line":849},11,[851],{"type":24,"tag":173,"props":852,"children":853},{},[854],{"type":29,"value":261},{"type":24,"tag":173,"props":856,"children":858},{"class":175,"line":857},12,[859],{"type":24,"tag":173,"props":860,"children":861},{"class":223},[862],{"type":29,"value":863},"// 取消订阅\n",{"type":24,"tag":173,"props":865,"children":867},{"class":175,"line":866},13,[868,872,876,881,885,889,893,897],{"type":24,"tag":173,"props":869,"children":870},{"class":203},[871],{"type":29,"value":691},{"type":24,"tag":173,"props":873,"children":874},{"class":186},[875],{"type":29,"value":388},{"type":24,"tag":173,"props":877,"children":878},{"class":192},[879],{"type":29,"value":880},"unsubscribe",{"type":24,"tag":173,"props":882,"children":883},{"class":186},[884],{"type":29,"value":200},{"type":24,"tag":173,"props":886,"children":887},{"class":400},[888],{"type":29,"value":403},{"type":24,"tag":173,"props":890,"children":891},{"class":186},[892],{"type":29,"value":408},{"type":24,"tag":173,"props":894,"children":895},{"class":203},[896],{"type":29,"value":278},{"type":24,"tag":173,"props":898,"children":899},{"class":186},[900],{"type":29,"value":332},{"type":24,"tag":25,"props":902,"children":903},{},[904,906,910,912,916,918,922,924,928,930,934,936,940,942,946],{"type":29,"value":905},"上面代码使用JQuery编写，首先，",{"type":24,"tag":99,"props":907,"children":908},{},[909],{"type":29,"value":278},{"type":29,"value":911},"向信号中心 ",{"type":24,"tag":99,"props":913,"children":914},{},[915],{"type":29,"value":691},{"type":29,"value":917},"订阅 ",{"type":24,"tag":99,"props":919,"children":920},{},[921],{"type":29,"value":566},{"type":29,"value":923},"信号。",{"type":24,"tag":99,"props":925,"children":926},{},[927],{"type":29,"value":195},{"type":29,"value":929},"执行完成后，向信号中心 ",{"type":24,"tag":99,"props":931,"children":932},{},[933],{"type":29,"value":691},{"type":29,"value":935},"发布 ",{"type":24,"tag":99,"props":937,"children":938},{},[939],{"type":29,"value":566},{"type":29,"value":941},"信号，从而引发 ",{"type":24,"tag":99,"props":943,"children":944},{},[945],{"type":29,"value":278},{"type":29,"value":947},"的执行。",{"type":24,"tag":25,"props":949,"children":950},{},[951,953,957,959,964],{"type":29,"value":952},"这种方法的性质与 ",{"type":24,"tag":99,"props":954,"children":955},{},[956],{"type":29,"value":61},{"type":29,"value":958},"类似，但是明显优于后者。因为可以通过查看 ",{"type":24,"tag":99,"props":960,"children":961},{},[962],{"type":29,"value":963},"消息中心",{"type":29,"value":965},"，了解存在多少信号、每个信号有多少订阅者，从而监控程序的运行。",{"type":24,"tag":31,"props":967,"children":969},{"id":968},"_4promise",[970],{"type":29,"value":971},"4、Promise",{"type":24,"tag":25,"props":973,"children":974},{},[975,980,982,986,988,993,995,1000,1002,1007,1009,1013],{"type":24,"tag":99,"props":976,"children":977},{},[978],{"type":29,"value":979},"Promise",{"type":29,"value":981}," 实际就是一个对象， 从它可以获得异步操作的消息，",{"type":24,"tag":99,"props":983,"children":984},{},[985],{"type":29,"value":979},{"type":29,"value":987}," 对象有三种状态，",{"type":24,"tag":99,"props":989,"children":990},{},[991],{"type":29,"value":992},"pending",{"type":29,"value":994},"(进行中)、",{"type":24,"tag":99,"props":996,"children":997},{},[998],{"type":29,"value":999},"fulfilled",{"type":29,"value":1001},"（已成功）和 ",{"type":24,"tag":99,"props":1003,"children":1004},{},[1005],{"type":29,"value":1006},"rejected",{"type":29,"value":1008},"（已失败）。",{"type":24,"tag":99,"props":1010,"children":1011},{},[1012],{"type":29,"value":979},{"type":29,"value":1014}," 的状态一旦改变之后，就不会在发生任何变化,将回调函数变成了链式调用。",{"type":24,"tag":25,"props":1016,"children":1017},{},[1018,1022,1024,1028,1030,1035],{"type":24,"tag":99,"props":1019,"children":1020},{},[1021],{"type":29,"value":979},{"type":29,"value":1023}," 的设计思想是，每一个异步任务返回一个 ",{"type":24,"tag":99,"props":1025,"children":1026},{},[1027],{"type":29,"value":979},{"type":29,"value":1029},"对象，该对象有一个 ",{"type":24,"tag":99,"props":1031,"children":1032},{},[1033],{"type":29,"value":1034},"then",{"type":29,"value":1036},"方法，用来指定下一步的回调函数。",{"type":24,"tag":159,"props":1038,"children":1040},{"code":1039,"language":162,"meta":163},"var p1 = new Promise(f1);\r\np1.then(f2);\n",[1041],{"type":24,"tag":166,"props":1042,"children":1043},{},[1044],{"type":24,"tag":159,"props":1045,"children":1046},{"__ignoreMap":14},[1047,1095],{"type":24,"tag":173,"props":1048,"children":1049},{"class":175,"line":176},[1050,1055,1059,1064,1069,1074,1078,1083,1087,1091],{"type":24,"tag":173,"props":1051,"children":1052},{"class":180},[1053],{"type":29,"value":1054},"var",{"type":24,"tag":173,"props":1056,"children":1057},{"class":186},[1058],{"type":29,"value":189},{"type":24,"tag":173,"props":1060,"children":1061},{"class":203},[1062],{"type":29,"value":1063},"p1",{"type":24,"tag":173,"props":1065,"children":1066},{"class":186},[1067],{"type":29,"value":1068}," = ",{"type":24,"tag":173,"props":1070,"children":1071},{"class":180},[1072],{"type":29,"value":1073},"new",{"type":24,"tag":173,"props":1075,"children":1076},{"class":186},[1077],{"type":29,"value":189},{"type":24,"tag":173,"props":1079,"children":1081},{"class":1080},"ct-d7a7da",[1082],{"type":29,"value":979},{"type":24,"tag":173,"props":1084,"children":1085},{"class":186},[1086],{"type":29,"value":200},{"type":24,"tag":173,"props":1088,"children":1089},{"class":203},[1090],{"type":29,"value":195},{"type":24,"tag":173,"props":1092,"children":1093},{"class":186},[1094],{"type":29,"value":417},{"type":24,"tag":173,"props":1096,"children":1097},{"class":175,"line":214},[1098,1102,1106,1110,1114,1118],{"type":24,"tag":173,"props":1099,"children":1100},{"class":203},[1101],{"type":29,"value":1063},{"type":24,"tag":173,"props":1103,"children":1104},{"class":186},[1105],{"type":29,"value":388},{"type":24,"tag":173,"props":1107,"children":1108},{"class":192},[1109],{"type":29,"value":1034},{"type":24,"tag":173,"props":1111,"children":1112},{"class":186},[1113],{"type":29,"value":200},{"type":24,"tag":173,"props":1115,"children":1116},{"class":203},[1117],{"type":29,"value":278},{"type":24,"tag":173,"props":1119,"children":1120},{"class":186},[1121],{"type":29,"value":332},{"type":24,"tag":25,"props":1123,"children":1124},{},[1125,1127,1131,1133,1137],{"type":29,"value":1126},"上面代码中，",{"type":24,"tag":99,"props":1128,"children":1129},{},[1130],{"type":29,"value":195},{"type":29,"value":1132},"的异步操作执行完成，就会执行 ",{"type":24,"tag":99,"props":1134,"children":1135},{},[1136],{"type":29,"value":278},{"type":29,"value":592},{"type":24,"tag":159,"props":1139,"children":1141},{"code":1140,"language":162,"meta":163},"function f1(){\r\n    var dfd = $.Deferred();\r\n    setTimeout(function () {\r\n        // f1的任务代码\r\n        dfd.resolve();\r\n    }, 500);\r\n    return dfd.promise;\r\n}\n",[1142],{"type":24,"tag":166,"props":1143,"children":1144},{},[1145],{"type":24,"tag":159,"props":1146,"children":1147},{"__ignoreMap":14},[1148,1168,1210,1233,1246,1270,1287,1322],{"type":24,"tag":173,"props":1149,"children":1150},{"class":175,"line":176},[1151,1155,1159,1163],{"type":24,"tag":173,"props":1152,"children":1153},{"class":180},[1154],{"type":29,"value":183},{"type":24,"tag":173,"props":1156,"children":1157},{"class":186},[1158],{"type":29,"value":189},{"type":24,"tag":173,"props":1160,"children":1161},{"class":192},[1162],{"type":29,"value":195},{"type":24,"tag":173,"props":1164,"children":1165},{"class":186},[1166],{"type":29,"value":1167},"(){\n",{"type":24,"tag":173,"props":1169,"children":1170},{"class":175,"line":214},[1171,1175,1179,1183,1188,1192,1197,1201,1206],{"type":24,"tag":173,"props":1172,"children":1173},{"class":186},[1174],{"type":29,"value":476},{"type":24,"tag":173,"props":1176,"children":1177},{"class":180},[1178],{"type":29,"value":1054},{"type":24,"tag":173,"props":1180,"children":1181},{"class":186},[1182],{"type":29,"value":189},{"type":24,"tag":173,"props":1184,"children":1185},{"class":203},[1186],{"type":29,"value":1187},"dfd",{"type":24,"tag":173,"props":1189,"children":1190},{"class":186},[1191],{"type":29,"value":1068},{"type":24,"tag":173,"props":1193,"children":1194},{"class":203},[1195],{"type":29,"value":1196},"$",{"type":24,"tag":173,"props":1198,"children":1199},{"class":186},[1200],{"type":29,"value":388},{"type":24,"tag":173,"props":1202,"children":1203},{"class":192},[1204],{"type":29,"value":1205},"Deferred",{"type":24,"tag":173,"props":1207,"children":1208},{"class":186},[1209],{"type":29,"value":243},{"type":24,"tag":173,"props":1211,"children":1212},{"class":175,"line":229},[1213,1217,1221,1225,1229],{"type":24,"tag":173,"props":1214,"children":1215},{"class":186},[1216],{"type":29,"value":476},{"type":24,"tag":173,"props":1218,"children":1219},{"class":192},[1220],{"type":29,"value":455},{"type":24,"tag":173,"props":1222,"children":1223},{"class":186},[1224],{"type":29,"value":200},{"type":24,"tag":173,"props":1226,"children":1227},{"class":180},[1228],{"type":29,"value":183},{"type":24,"tag":173,"props":1230,"children":1231},{"class":186},[1232],{"type":29,"value":468},{"type":24,"tag":173,"props":1234,"children":1235},{"class":175,"line":246},[1236,1241],{"type":24,"tag":173,"props":1237,"children":1238},{"class":186},[1239],{"type":29,"value":1240},"        ",{"type":24,"tag":173,"props":1242,"children":1243},{"class":223},[1244],{"type":29,"value":1245},"// f1的任务代码\n",{"type":24,"tag":173,"props":1247,"children":1248},{"class":175,"line":255},[1249,1253,1257,1261,1266],{"type":24,"tag":173,"props":1250,"children":1251},{"class":186},[1252],{"type":29,"value":1240},{"type":24,"tag":173,"props":1254,"children":1255},{"class":203},[1256],{"type":29,"value":1187},{"type":24,"tag":173,"props":1258,"children":1259},{"class":186},[1260],{"type":29,"value":388},{"type":24,"tag":173,"props":1262,"children":1263},{"class":192},[1264],{"type":29,"value":1265},"resolve",{"type":24,"tag":173,"props":1267,"children":1268},{"class":186},[1269],{"type":29,"value":243},{"type":24,"tag":173,"props":1271,"children":1272},{"class":175,"line":264},[1273,1278,1283],{"type":24,"tag":173,"props":1274,"children":1275},{"class":186},[1276],{"type":29,"value":1277},"    }, ",{"type":24,"tag":173,"props":1279,"children":1280},{"class":529},[1281],{"type":29,"value":1282},"500",{"type":24,"tag":173,"props":1284,"children":1285},{"class":186},[1286],{"type":29,"value":417},{"type":24,"tag":173,"props":1288,"children":1289},{"class":175,"line":286},[1290,1294,1300,1304,1308,1312,1317],{"type":24,"tag":173,"props":1291,"children":1292},{"class":186},[1293],{"type":29,"value":476},{"type":24,"tag":173,"props":1295,"children":1297},{"class":1296},"ct-6c4a9a",[1298],{"type":29,"value":1299},"return",{"type":24,"tag":173,"props":1301,"children":1302},{"class":186},[1303],{"type":29,"value":189},{"type":24,"tag":173,"props":1305,"children":1306},{"class":203},[1307],{"type":29,"value":1187},{"type":24,"tag":173,"props":1309,"children":1310},{"class":186},[1311],{"type":29,"value":388},{"type":24,"tag":173,"props":1313,"children":1314},{"class":203},[1315],{"type":29,"value":1316},"promise",{"type":24,"tag":173,"props":1318,"children":1319},{"class":186},[1320],{"type":29,"value":1321},";\n",{"type":24,"tag":173,"props":1323,"children":1324},{"class":175,"line":298},[1325],{"type":24,"tag":173,"props":1326,"children":1327},{"class":186},[1328],{"type":29,"value":544},{"type":24,"tag":25,"props":1330,"children":1331},{},[1332],{"type":29,"value":1333},"每次调用返回的都是一个新的Promise实例(then可用链式调用的原因)",{"type":24,"tag":159,"props":1335,"children":1337},{"code":1336,"language":162,"meta":163},"// 传统写法\r\nstep1(function (value1) {\r\n  step2(value1, function(value2) {\r\n    step3(value2, function(value3) {\r\n      step4(value3, function(value4) {\r\n        // ...\r\n      });\r\n    });\r\n  });\r\n});\r\n\r\n// Promise 的写法\r\n(new Promise(step1))\r\n  .then(step2)\r\n  .then(step3)\r\n  .then(step4);\n",[1338],{"type":24,"tag":166,"props":1339,"children":1340},{},[1341],{"type":24,"tag":159,"props":1342,"children":1343},{"__ignoreMap":14},[1344,1352,1382,1423,1464,1506,1517,1525,1533,1541,1549,1556,1564,1596,1622,1646],{"type":24,"tag":173,"props":1345,"children":1346},{"class":175,"line":176},[1347],{"type":24,"tag":173,"props":1348,"children":1349},{"class":223},[1350],{"type":29,"value":1351},"// 传统写法\n",{"type":24,"tag":173,"props":1353,"children":1354},{"class":175,"line":214},[1355,1360,1364,1368,1373,1378],{"type":24,"tag":173,"props":1356,"children":1357},{"class":192},[1358],{"type":29,"value":1359},"step1",{"type":24,"tag":173,"props":1361,"children":1362},{"class":186},[1363],{"type":29,"value":200},{"type":24,"tag":173,"props":1365,"children":1366},{"class":180},[1367],{"type":29,"value":183},{"type":24,"tag":173,"props":1369,"children":1370},{"class":186},[1371],{"type":29,"value":1372}," (",{"type":24,"tag":173,"props":1374,"children":1375},{"class":203},[1376],{"type":29,"value":1377},"value1",{"type":24,"tag":173,"props":1379,"children":1380},{"class":186},[1381],{"type":29,"value":211},{"type":24,"tag":173,"props":1383,"children":1384},{"class":175,"line":229},[1385,1389,1394,1398,1402,1406,1410,1414,1419],{"type":24,"tag":173,"props":1386,"children":1387},{"class":186},[1388],{"type":29,"value":220},{"type":24,"tag":173,"props":1390,"children":1391},{"class":192},[1392],{"type":29,"value":1393},"step2",{"type":24,"tag":173,"props":1395,"children":1396},{"class":186},[1397],{"type":29,"value":200},{"type":24,"tag":173,"props":1399,"children":1400},{"class":203},[1401],{"type":29,"value":1377},{"type":24,"tag":173,"props":1403,"children":1404},{"class":186},[1405],{"type":29,"value":408},{"type":24,"tag":173,"props":1407,"children":1408},{"class":180},[1409],{"type":29,"value":183},{"type":24,"tag":173,"props":1411,"children":1412},{"class":186},[1413],{"type":29,"value":200},{"type":24,"tag":173,"props":1415,"children":1416},{"class":203},[1417],{"type":29,"value":1418},"value2",{"type":24,"tag":173,"props":1420,"children":1421},{"class":186},[1422],{"type":29,"value":211},{"type":24,"tag":173,"props":1424,"children":1425},{"class":175,"line":246},[1426,1430,1435,1439,1443,1447,1451,1455,1460],{"type":24,"tag":173,"props":1427,"children":1428},{"class":186},[1429],{"type":29,"value":476},{"type":24,"tag":173,"props":1431,"children":1432},{"class":192},[1433],{"type":29,"value":1434},"step3",{"type":24,"tag":173,"props":1436,"children":1437},{"class":186},[1438],{"type":29,"value":200},{"type":24,"tag":173,"props":1440,"children":1441},{"class":203},[1442],{"type":29,"value":1418},{"type":24,"tag":173,"props":1444,"children":1445},{"class":186},[1446],{"type":29,"value":408},{"type":24,"tag":173,"props":1448,"children":1449},{"class":180},[1450],{"type":29,"value":183},{"type":24,"tag":173,"props":1452,"children":1453},{"class":186},[1454],{"type":29,"value":200},{"type":24,"tag":173,"props":1456,"children":1457},{"class":203},[1458],{"type":29,"value":1459},"value3",{"type":24,"tag":173,"props":1461,"children":1462},{"class":186},[1463],{"type":29,"value":211},{"type":24,"tag":173,"props":1465,"children":1466},{"class":175,"line":255},[1467,1472,1477,1481,1485,1489,1493,1497,1502],{"type":24,"tag":173,"props":1468,"children":1469},{"class":186},[1470],{"type":29,"value":1471},"      ",{"type":24,"tag":173,"props":1473,"children":1474},{"class":192},[1475],{"type":29,"value":1476},"step4",{"type":24,"tag":173,"props":1478,"children":1479},{"class":186},[1480],{"type":29,"value":200},{"type":24,"tag":173,"props":1482,"children":1483},{"class":203},[1484],{"type":29,"value":1459},{"type":24,"tag":173,"props":1486,"children":1487},{"class":186},[1488],{"type":29,"value":408},{"type":24,"tag":173,"props":1490,"children":1491},{"class":180},[1492],{"type":29,"value":183},{"type":24,"tag":173,"props":1494,"children":1495},{"class":186},[1496],{"type":29,"value":200},{"type":24,"tag":173,"props":1498,"children":1499},{"class":203},[1500],{"type":29,"value":1501},"value4",{"type":24,"tag":173,"props":1503,"children":1504},{"class":186},[1505],{"type":29,"value":211},{"type":24,"tag":173,"props":1507,"children":1508},{"class":175,"line":264},[1509,1513],{"type":24,"tag":173,"props":1510,"children":1511},{"class":186},[1512],{"type":29,"value":1240},{"type":24,"tag":173,"props":1514,"children":1515},{"class":223},[1516],{"type":29,"value":226},{"type":24,"tag":173,"props":1518,"children":1519},{"class":175,"line":286},[1520],{"type":24,"tag":173,"props":1521,"children":1522},{"class":186},[1523],{"type":29,"value":1524},"      });\n",{"type":24,"tag":173,"props":1526,"children":1527},{"class":175,"line":298},[1528],{"type":24,"tag":173,"props":1529,"children":1530},{"class":186},[1531],{"type":29,"value":1532},"    });\n",{"type":24,"tag":173,"props":1534,"children":1535},{"class":175,"line":306},[1536],{"type":24,"tag":173,"props":1537,"children":1538},{"class":186},[1539],{"type":29,"value":1540},"  });\n",{"type":24,"tag":173,"props":1542,"children":1543},{"class":175,"line":314},[1544],{"type":24,"tag":173,"props":1545,"children":1546},{"class":186},[1547],{"type":29,"value":1548},"});\n",{"type":24,"tag":173,"props":1550,"children":1551},{"class":175,"line":849},[1552],{"type":24,"tag":173,"props":1553,"children":1554},{},[1555],{"type":29,"value":261},{"type":24,"tag":173,"props":1557,"children":1558},{"class":175,"line":857},[1559],{"type":24,"tag":173,"props":1560,"children":1561},{"class":223},[1562],{"type":29,"value":1563},"// Promise 的写法\n",{"type":24,"tag":173,"props":1565,"children":1566},{"class":175,"line":866},[1567,1571,1575,1579,1583,1587,1591],{"type":24,"tag":173,"props":1568,"children":1569},{"class":186},[1570],{"type":29,"value":200},{"type":24,"tag":173,"props":1572,"children":1573},{"class":180},[1574],{"type":29,"value":1073},{"type":24,"tag":173,"props":1576,"children":1577},{"class":186},[1578],{"type":29,"value":189},{"type":24,"tag":173,"props":1580,"children":1581},{"class":1080},[1582],{"type":29,"value":979},{"type":24,"tag":173,"props":1584,"children":1585},{"class":186},[1586],{"type":29,"value":200},{"type":24,"tag":173,"props":1588,"children":1589},{"class":203},[1590],{"type":29,"value":1359},{"type":24,"tag":173,"props":1592,"children":1593},{"class":186},[1594],{"type":29,"value":1595},"))\n",{"type":24,"tag":173,"props":1597,"children":1599},{"class":175,"line":1598},14,[1600,1605,1609,1613,1617],{"type":24,"tag":173,"props":1601,"children":1602},{"class":186},[1603],{"type":29,"value":1604},"  .",{"type":24,"tag":173,"props":1606,"children":1607},{"class":192},[1608],{"type":29,"value":1034},{"type":24,"tag":173,"props":1610,"children":1611},{"class":186},[1612],{"type":29,"value":200},{"type":24,"tag":173,"props":1614,"children":1615},{"class":203},[1616],{"type":29,"value":1393},{"type":24,"tag":173,"props":1618,"children":1619},{"class":186},[1620],{"type":29,"value":1621},")\n",{"type":24,"tag":173,"props":1623,"children":1625},{"class":175,"line":1624},15,[1626,1630,1634,1638,1642],{"type":24,"tag":173,"props":1627,"children":1628},{"class":186},[1629],{"type":29,"value":1604},{"type":24,"tag":173,"props":1631,"children":1632},{"class":192},[1633],{"type":29,"value":1034},{"type":24,"tag":173,"props":1635,"children":1636},{"class":186},[1637],{"type":29,"value":200},{"type":24,"tag":173,"props":1639,"children":1640},{"class":203},[1641],{"type":29,"value":1434},{"type":24,"tag":173,"props":1643,"children":1644},{"class":186},[1645],{"type":29,"value":1621},{"type":24,"tag":173,"props":1647,"children":1649},{"class":175,"line":1648},16,[1650,1654,1658,1662,1666],{"type":24,"tag":173,"props":1651,"children":1652},{"class":186},[1653],{"type":29,"value":1604},{"type":24,"tag":173,"props":1655,"children":1656},{"class":192},[1657],{"type":29,"value":1034},{"type":24,"tag":173,"props":1659,"children":1660},{"class":186},[1661],{"type":29,"value":200},{"type":24,"tag":173,"props":1663,"children":1664},{"class":203},[1665],{"type":29,"value":1476},{"type":24,"tag":173,"props":1667,"children":1668},{"class":186},[1669],{"type":29,"value":332},{"type":24,"tag":25,"props":1671,"children":1672},{},[1673,1675,1679,1681,1685,1687,1692,1694,1698,1700,1704,1705,1709,1711,1715,1717,1721],{"type":29,"value":1674},"传统的写法可能需要把 ",{"type":24,"tag":99,"props":1676,"children":1677},{},[1678],{"type":29,"value":278},{"type":29,"value":1680},"作为回调函数传入 ",{"type":24,"tag":99,"props":1682,"children":1683},{},[1684],{"type":29,"value":195},{"type":29,"value":1686},"，比如写成 ",{"type":24,"tag":99,"props":1688,"children":1689},{},[1690],{"type":29,"value":1691},"f1(f2)",{"type":29,"value":1693},"，异步操作完成后，在 ",{"type":24,"tag":99,"props":1695,"children":1696},{},[1697],{"type":29,"value":195},{"type":29,"value":1699},"内部调用 ",{"type":24,"tag":99,"props":1701,"children":1702},{},[1703],{"type":29,"value":278},{"type":29,"value":592},{"type":24,"tag":99,"props":1706,"children":1707},{},[1708],{"type":29,"value":979},{"type":29,"value":1710},"使得 ",{"type":24,"tag":99,"props":1712,"children":1713},{},[1714],{"type":29,"value":195},{"type":29,"value":1716},"和 ",{"type":24,"tag":99,"props":1718,"children":1719},{},[1720],{"type":29,"value":278},{"type":29,"value":1722},"变成了链式写法。不仅改善了可读性，而且对于多层嵌套的回调函数尤其方便。",{"type":24,"tag":31,"props":1724,"children":1726},{"id":1725},"_5generator",[1727],{"type":29,"value":1728},"5、Generator",{"type":24,"tag":25,"props":1730,"children":1731},{},[1732,1737,1739,1744],{"type":24,"tag":99,"props":1733,"children":1734},{},[1735],{"type":29,"value":1736},"Generator",{"type":29,"value":1738}," 函数是协程在 ",{"type":24,"tag":99,"props":1740,"children":1741},{},[1742],{"type":29,"value":1743},"ES6",{"type":29,"value":1745}," 的实现，最大特点就是可以交出函数的执行权（即暂停执行）",{"type":24,"tag":25,"props":1747,"children":1748},{},[1749,1753,1755,1759,1761,1766,1768,1772,1774,1778],{"type":24,"tag":99,"props":1750,"children":1751},{},[1752],{"type":29,"value":1736},{"type":29,"value":1754}," 函数是一个状态机，封装了多个内部状态。执行 ",{"type":24,"tag":99,"props":1756,"children":1757},{},[1758],{"type":29,"value":1736},{"type":29,"value":1760}," 函数会返回一个遍历器对象，使用该对象的 ",{"type":24,"tag":99,"props":1762,"children":1763},{},[1764],{"type":29,"value":1765},"next()",{"type":29,"value":1767}," 方法，可以遍历 ",{"type":24,"tag":99,"props":1769,"children":1770},{},[1771],{"type":29,"value":1736},{"type":29,"value":1773}," 函数内部的每一个状态，直到 ",{"type":24,"tag":99,"props":1775,"children":1776},{},[1777],{"type":29,"value":1299},{"type":29,"value":1779}," 语句。",{"type":24,"tag":25,"props":1781,"children":1782},{},[1783,1787],{"type":24,"tag":99,"props":1784,"children":1785},{},[1786],{"type":29,"value":1736},{"type":29,"value":1788}," 函数的特征:",{"type":24,"tag":48,"props":1790,"children":1791},{},[1792,1801,1819],{"type":24,"tag":52,"props":1793,"children":1794},{},[1795,1799],{"type":24,"tag":99,"props":1796,"children":1797},{},[1798],{"type":29,"value":183},{"type":29,"value":1800}," 关键字与函数名之间有一个星号",{"type":24,"tag":52,"props":1802,"children":1803},{},[1804,1806,1811,1813,1817],{"type":29,"value":1805},"函数体内部使用 ",{"type":24,"tag":99,"props":1807,"children":1808},{},[1809],{"type":29,"value":1810},"yield",{"type":29,"value":1812}," 表达式，",{"type":24,"tag":99,"props":1814,"children":1815},{},[1816],{"type":29,"value":1810},{"type":29,"value":1818}," 是暂停执行的标记",{"type":24,"tag":52,"props":1820,"children":1821},{},[1822,1826,1828,1832],{"type":24,"tag":99,"props":1823,"children":1824},{},[1825],{"type":29,"value":1765},{"type":29,"value":1827}," 方法遇到 ",{"type":24,"tag":99,"props":1829,"children":1830},{},[1831],{"type":29,"value":1810},{"type":29,"value":1833}," 表达式，就暂停执行后面的操作,并返回后面的值。",{"type":24,"tag":159,"props":1835,"children":1837},{"code":1836,"language":162,"meta":163},"function* gen(x){\r\n  var y = yield x + 2;\r\n  return y;\r\n}\r\n\r\nvar g = gen(1);\r\ng.next() // { value: 3, done: false }\r\ng.next(2) // { value: 2, done: true }\n",[1838],{"type":24,"tag":166,"props":1839,"children":1840},{},[1841],{"type":24,"tag":159,"props":1842,"children":1843},{"__ignoreMap":14},[1844,1875,1925,1948,1955,1962,1999,2025],{"type":24,"tag":173,"props":1845,"children":1846},{"class":175,"line":176},[1847,1852,1856,1861,1865,1870],{"type":24,"tag":173,"props":1848,"children":1849},{"class":180},[1850],{"type":29,"value":1851},"function*",{"type":24,"tag":173,"props":1853,"children":1854},{"class":186},[1855],{"type":29,"value":189},{"type":24,"tag":173,"props":1857,"children":1858},{"class":192},[1859],{"type":29,"value":1860},"gen",{"type":24,"tag":173,"props":1862,"children":1863},{"class":186},[1864],{"type":29,"value":200},{"type":24,"tag":173,"props":1866,"children":1867},{"class":203},[1868],{"type":29,"value":1869},"x",{"type":24,"tag":173,"props":1871,"children":1872},{"class":186},[1873],{"type":29,"value":1874},"){\n",{"type":24,"tag":173,"props":1876,"children":1877},{"class":175,"line":214},[1878,1882,1886,1890,1895,1899,1903,1907,1911,1916,1921],{"type":24,"tag":173,"props":1879,"children":1880},{"class":186},[1881],{"type":29,"value":220},{"type":24,"tag":173,"props":1883,"children":1884},{"class":180},[1885],{"type":29,"value":1054},{"type":24,"tag":173,"props":1887,"children":1888},{"class":186},[1889],{"type":29,"value":189},{"type":24,"tag":173,"props":1891,"children":1892},{"class":203},[1893],{"type":29,"value":1894},"y",{"type":24,"tag":173,"props":1896,"children":1897},{"class":186},[1898],{"type":29,"value":1068},{"type":24,"tag":173,"props":1900,"children":1901},{"class":1296},[1902],{"type":29,"value":1810},{"type":24,"tag":173,"props":1904,"children":1905},{"class":186},[1906],{"type":29,"value":189},{"type":24,"tag":173,"props":1908,"children":1909},{"class":203},[1910],{"type":29,"value":1869},{"type":24,"tag":173,"props":1912,"children":1913},{"class":186},[1914],{"type":29,"value":1915}," + ",{"type":24,"tag":173,"props":1917,"children":1918},{"class":529},[1919],{"type":29,"value":1920},"2",{"type":24,"tag":173,"props":1922,"children":1923},{"class":186},[1924],{"type":29,"value":1321},{"type":24,"tag":173,"props":1926,"children":1927},{"class":175,"line":229},[1928,1932,1936,1940,1944],{"type":24,"tag":173,"props":1929,"children":1930},{"class":186},[1931],{"type":29,"value":220},{"type":24,"tag":173,"props":1933,"children":1934},{"class":1296},[1935],{"type":29,"value":1299},{"type":24,"tag":173,"props":1937,"children":1938},{"class":186},[1939],{"type":29,"value":189},{"type":24,"tag":173,"props":1941,"children":1942},{"class":203},[1943],{"type":29,"value":1894},{"type":24,"tag":173,"props":1945,"children":1946},{"class":186},[1947],{"type":29,"value":1321},{"type":24,"tag":173,"props":1949,"children":1950},{"class":175,"line":246},[1951],{"type":24,"tag":173,"props":1952,"children":1953},{"class":186},[1954],{"type":29,"value":252},{"type":24,"tag":173,"props":1956,"children":1957},{"class":175,"line":255},[1958],{"type":24,"tag":173,"props":1959,"children":1960},{},[1961],{"type":29,"value":261},{"type":24,"tag":173,"props":1963,"children":1964},{"class":175,"line":264},[1965,1969,1973,1978,1982,1986,1990,1995],{"type":24,"tag":173,"props":1966,"children":1967},{"class":180},[1968],{"type":29,"value":1054},{"type":24,"tag":173,"props":1970,"children":1971},{"class":186},[1972],{"type":29,"value":189},{"type":24,"tag":173,"props":1974,"children":1975},{"class":203},[1976],{"type":29,"value":1977},"g",{"type":24,"tag":173,"props":1979,"children":1980},{"class":186},[1981],{"type":29,"value":1068},{"type":24,"tag":173,"props":1983,"children":1984},{"class":192},[1985],{"type":29,"value":1860},{"type":24,"tag":173,"props":1987,"children":1988},{"class":186},[1989],{"type":29,"value":200},{"type":24,"tag":173,"props":1991,"children":1992},{"class":529},[1993],{"type":29,"value":1994},"1",{"type":24,"tag":173,"props":1996,"children":1997},{"class":186},[1998],{"type":29,"value":417},{"type":24,"tag":173,"props":2000,"children":2001},{"class":175,"line":286},[2002,2006,2010,2015,2020],{"type":24,"tag":173,"props":2003,"children":2004},{"class":203},[2005],{"type":29,"value":1977},{"type":24,"tag":173,"props":2007,"children":2008},{"class":186},[2009],{"type":29,"value":388},{"type":24,"tag":173,"props":2011,"children":2012},{"class":192},[2013],{"type":29,"value":2014},"next",{"type":24,"tag":173,"props":2016,"children":2017},{"class":186},[2018],{"type":29,"value":2019},"() ",{"type":24,"tag":173,"props":2021,"children":2022},{"class":223},[2023],{"type":29,"value":2024},"// { value: 3, done: false }\n",{"type":24,"tag":173,"props":2026,"children":2027},{"class":175,"line":298},[2028,2032,2036,2040,2044,2048,2053],{"type":24,"tag":173,"props":2029,"children":2030},{"class":203},[2031],{"type":29,"value":1977},{"type":24,"tag":173,"props":2033,"children":2034},{"class":186},[2035],{"type":29,"value":388},{"type":24,"tag":173,"props":2037,"children":2038},{"class":192},[2039],{"type":29,"value":2014},{"type":24,"tag":173,"props":2041,"children":2042},{"class":186},[2043],{"type":29,"value":200},{"type":24,"tag":173,"props":2045,"children":2046},{"class":529},[2047],{"type":29,"value":1920},{"type":24,"tag":173,"props":2049,"children":2050},{"class":186},[2051],{"type":29,"value":2052},") ",{"type":24,"tag":173,"props":2054,"children":2055},{"class":223},[2056],{"type":29,"value":2057},"// { value: 2, done: true }",{"type":24,"tag":25,"props":2059,"children":2060},{},[2061,2063,2067,2069,2074,2076,2081,2083,2088,2090,2094,2096,2100,2102,2106,2108,2112,2114,2118,2120,2124],{"type":29,"value":2062},"上面代码中，第一个 ",{"type":24,"tag":99,"props":2064,"children":2065},{},[2066],{"type":29,"value":2014},{"type":29,"value":2068}," 方法的 ",{"type":24,"tag":99,"props":2070,"children":2071},{},[2072],{"type":29,"value":2073},"value",{"type":29,"value":2075}," 属性，返回表达式 ",{"type":24,"tag":99,"props":2077,"children":2078},{},[2079],{"type":29,"value":2080},"x + 2",{"type":29,"value":2082}," 的值 ",{"type":24,"tag":99,"props":2084,"children":2085},{},[2086],{"type":29,"value":2087},"3",{"type":29,"value":2089},"。第二个 ",{"type":24,"tag":99,"props":2091,"children":2092},{},[2093],{"type":29,"value":2014},{"type":29,"value":2095}," 方法带有参数 ",{"type":24,"tag":99,"props":2097,"children":2098},{},[2099],{"type":29,"value":1920},{"type":29,"value":2101},"，这个参数可以传入 ",{"type":24,"tag":99,"props":2103,"children":2104},{},[2105],{"type":29,"value":1736},{"type":29,"value":2107}," 函数，作为上个阶段异步任务的返回结果，被函数体内的变量 ",{"type":24,"tag":99,"props":2109,"children":2110},{},[2111],{"type":29,"value":1894},{"type":29,"value":2113}," 接收。因此，这一步的 ",{"type":24,"tag":99,"props":2115,"children":2116},{},[2117],{"type":29,"value":2073},{"type":29,"value":2119}," 属性，返回的就是 ",{"type":24,"tag":99,"props":2121,"children":2122},{},[2123],{"type":29,"value":1920},{"type":29,"value":2125},"（变量 y 的值）。",{"type":24,"tag":31,"props":2127,"children":2129},{"id":2128},"_6asyncawait",[2130],{"type":29,"value":2131},"6、async/await",{"type":24,"tag":25,"props":2133,"children":2134},{},[2135,2140,2142,2146,2148,2152,2154,2158,2160,2164,2166,2171],{"type":24,"tag":99,"props":2136,"children":2137},{},[2138],{"type":29,"value":2139},"async",{"type":29,"value":2141}," 函数就是 ",{"type":24,"tag":99,"props":2143,"children":2144},{},[2145],{"type":29,"value":1736},{"type":29,"value":2147}," 函数的语法糖。",{"type":24,"tag":99,"props":2149,"children":2150},{},[2151],{"type":29,"value":2139},{"type":29,"value":2153}," 函数返回一个 ",{"type":24,"tag":99,"props":2155,"children":2156},{},[2157],{"type":29,"value":979},{"type":29,"value":2159}," 对象，可以使用 ",{"type":24,"tag":99,"props":2161,"children":2162},{},[2163],{"type":29,"value":1034},{"type":29,"value":2165}," 方法添加回调函数。当函数执行的时候，一旦遇到 ",{"type":24,"tag":99,"props":2167,"children":2168},{},[2169],{"type":29,"value":2170},"await",{"type":29,"value":2172}," 就会先返回，等到触发的异步操作完成，再接着执行函数体内后面的语句。",{"type":24,"tag":25,"props":2174,"children":2175},{},[2176,2181],{"type":24,"tag":99,"props":2177,"children":2178},{},[2179],{"type":29,"value":2180},"async/await",{"type":29,"value":2182},"的特征有：",{"type":24,"tag":48,"props":2184,"children":2185},{},[2186,2201,2216],{"type":24,"tag":52,"props":2187,"children":2188},{},[2189,2193,2195,2199],{"type":24,"tag":99,"props":2190,"children":2191},{},[2192],{"type":29,"value":2180},{"type":29,"value":2194},"是基于 ",{"type":24,"tag":99,"props":2196,"children":2197},{},[2198],{"type":29,"value":979},{"type":29,"value":2200},"实现的，它不能用于普通的回调函数。",{"type":24,"tag":52,"props":2202,"children":2203},{},[2204,2208,2210,2214],{"type":24,"tag":99,"props":2205,"children":2206},{},[2207],{"type":29,"value":2180},{"type":29,"value":2209},"与 ",{"type":24,"tag":99,"props":2211,"children":2212},{},[2213],{"type":29,"value":979},{"type":29,"value":2215},"一样，是非阻塞的。",{"type":24,"tag":52,"props":2217,"children":2218},{},[2219,2223],{"type":24,"tag":99,"props":2220,"children":2221},{},[2222],{"type":29,"value":2180},{"type":29,"value":2224},"使得异步代码看起来像同步代码，这正是它的魔力所在。",{"type":24,"tag":159,"props":2226,"children":2228},{"code":2227,"language":162,"meta":163},"async function async1() {\r\n  return 2\r\n}\r\nconsole.log(async1()) // Promise {\u003Cresolved>: 2}\n",[2229],{"type":24,"tag":166,"props":2230,"children":2231},{},[2232],{"type":24,"tag":159,"props":2233,"children":2234},{"__ignoreMap":14},[2235,2263,2283,2290],{"type":24,"tag":173,"props":2236,"children":2237},{"class":175,"line":176},[2238,2242,2246,2250,2254,2259],{"type":24,"tag":173,"props":2239,"children":2240},{"class":180},[2241],{"type":29,"value":2139},{"type":24,"tag":173,"props":2243,"children":2244},{"class":186},[2245],{"type":29,"value":189},{"type":24,"tag":173,"props":2247,"children":2248},{"class":180},[2249],{"type":29,"value":183},{"type":24,"tag":173,"props":2251,"children":2252},{"class":186},[2253],{"type":29,"value":189},{"type":24,"tag":173,"props":2255,"children":2256},{"class":192},[2257],{"type":29,"value":2258},"async1",{"type":24,"tag":173,"props":2260,"children":2261},{"class":186},[2262],{"type":29,"value":283},{"type":24,"tag":173,"props":2264,"children":2265},{"class":175,"line":214},[2266,2270,2274,2278],{"type":24,"tag":173,"props":2267,"children":2268},{"class":186},[2269],{"type":29,"value":220},{"type":24,"tag":173,"props":2271,"children":2272},{"class":1296},[2273],{"type":29,"value":1299},{"type":24,"tag":173,"props":2275,"children":2276},{"class":186},[2277],{"type":29,"value":189},{"type":24,"tag":173,"props":2279,"children":2280},{"class":529},[2281],{"type":29,"value":2282},"2\n",{"type":24,"tag":173,"props":2284,"children":2285},{"class":175,"line":229},[2286],{"type":24,"tag":173,"props":2287,"children":2288},{"class":186},[2289],{"type":29,"value":252},{"type":24,"tag":173,"props":2291,"children":2292},{"class":175,"line":246},[2293,2298,2302,2307,2311,2315,2320],{"type":24,"tag":173,"props":2294,"children":2295},{"class":203},[2296],{"type":29,"value":2297},"console",{"type":24,"tag":173,"props":2299,"children":2300},{"class":186},[2301],{"type":29,"value":388},{"type":24,"tag":173,"props":2303,"children":2304},{"class":192},[2305],{"type":29,"value":2306},"log",{"type":24,"tag":173,"props":2308,"children":2309},{"class":186},[2310],{"type":29,"value":200},{"type":24,"tag":173,"props":2312,"children":2313},{"class":192},[2314],{"type":29,"value":2258},{"type":24,"tag":173,"props":2316,"children":2317},{"class":186},[2318],{"type":29,"value":2319},"()) ",{"type":24,"tag":173,"props":2321,"children":2322},{"class":223},[2323],{"type":29,"value":2324},"// Promise {\u003Cresolved>: 2}",{"type":24,"tag":25,"props":2326,"children":2327},{},[2328,2330,2334,2336,2340],{"type":29,"value":2329},"上面代码中，函数前面加上 ",{"type":24,"tag":99,"props":2331,"children":2332},{},[2333],{"type":29,"value":2139},{"type":29,"value":2335}," 就会返回一个 ",{"type":24,"tag":99,"props":2337,"children":2338},{},[2339],{"type":29,"value":1316},{"type":29,"value":2341}," 对象。",{"type":24,"tag":159,"props":2343,"children":2345},{"code":2344,"language":162,"meta":163},"const fs = require('fs');\r\n\r\nconst readFile = function (fileName) {\r\n  return new Promise(function (resolve, reject) {\r\n    fs.readFile(fileName, function(error, data) {\r\n      if (error) return reject(error);\r\n      resolve(data);\r\n    });\r\n  });\r\n};\r\n// Generator 函数写法\r\nconst gen = function* () {\r\n  const f1 = yield readFile('/etc/fstab');\r\n  const f2 = yield readFile('/etc/shells');\r\n  console.log(f1.toString());\r\n  console.log(f2.toString());\r\n};\r\n\r\n// aynsc 函数写法\r\nconst asyncReadFile = async function () {\r\n  const f1 = await readFile('/etc/fstab');\r\n  const f2 = await readFile('/etc/shells');\r\n  console.log(f1.toString());\r\n  console.log(f2.toString());\r\n};\n",[2346],{"type":24,"tag":166,"props":2347,"children":2348},{},[2349],{"type":24,"tag":159,"props":2350,"children":2351},{"__ignoreMap":14},[2352,2392,2399,2436,2492,2549,2597,2620,2627,2634,2642,2650,2677,2725,2773,2814,2853,2861,2869,2878,2915,2963,3011,3051,3091],{"type":24,"tag":173,"props":2353,"children":2354},{"class":175,"line":176},[2355,2360,2364,2370,2374,2379,2383,2388],{"type":24,"tag":173,"props":2356,"children":2357},{"class":180},[2358],{"type":29,"value":2359},"const",{"type":24,"tag":173,"props":2361,"children":2362},{"class":186},[2363],{"type":29,"value":189},{"type":24,"tag":173,"props":2365,"children":2367},{"class":2366},"ct-14aa4b",[2368],{"type":29,"value":2369},"fs",{"type":24,"tag":173,"props":2371,"children":2372},{"class":186},[2373],{"type":29,"value":1068},{"type":24,"tag":173,"props":2375,"children":2376},{"class":192},[2377],{"type":29,"value":2378},"require",{"type":24,"tag":173,"props":2380,"children":2381},{"class":186},[2382],{"type":29,"value":200},{"type":24,"tag":173,"props":2384,"children":2385},{"class":400},[2386],{"type":29,"value":2387},"'fs'",{"type":24,"tag":173,"props":2389,"children":2390},{"class":186},[2391],{"type":29,"value":417},{"type":24,"tag":173,"props":2393,"children":2394},{"class":175,"line":214},[2395],{"type":24,"tag":173,"props":2396,"children":2397},{},[2398],{"type":29,"value":261},{"type":24,"tag":173,"props":2400,"children":2401},{"class":175,"line":229},[2402,2406,2410,2415,2419,2423,2427,2432],{"type":24,"tag":173,"props":2403,"children":2404},{"class":180},[2405],{"type":29,"value":2359},{"type":24,"tag":173,"props":2407,"children":2408},{"class":186},[2409],{"type":29,"value":189},{"type":24,"tag":173,"props":2411,"children":2412},{"class":192},[2413],{"type":29,"value":2414},"readFile",{"type":24,"tag":173,"props":2416,"children":2417},{"class":186},[2418],{"type":29,"value":1068},{"type":24,"tag":173,"props":2420,"children":2421},{"class":180},[2422],{"type":29,"value":183},{"type":24,"tag":173,"props":2424,"children":2425},{"class":186},[2426],{"type":29,"value":1372},{"type":24,"tag":173,"props":2428,"children":2429},{"class":203},[2430],{"type":29,"value":2431},"fileName",{"type":24,"tag":173,"props":2433,"children":2434},{"class":186},[2435],{"type":29,"value":211},{"type":24,"tag":173,"props":2437,"children":2438},{"class":175,"line":246},[2439,2443,2447,2451,2455,2459,2463,2467,2471,2475,2479,2483,2488],{"type":24,"tag":173,"props":2440,"children":2441},{"class":186},[2442],{"type":29,"value":220},{"type":24,"tag":173,"props":2444,"children":2445},{"class":1296},[2446],{"type":29,"value":1299},{"type":24,"tag":173,"props":2448,"children":2449},{"class":186},[2450],{"type":29,"value":189},{"type":24,"tag":173,"props":2452,"children":2453},{"class":180},[2454],{"type":29,"value":1073},{"type":24,"tag":173,"props":2456,"children":2457},{"class":186},[2458],{"type":29,"value":189},{"type":24,"tag":173,"props":2460,"children":2461},{"class":1080},[2462],{"type":29,"value":979},{"type":24,"tag":173,"props":2464,"children":2465},{"class":186},[2466],{"type":29,"value":200},{"type":24,"tag":173,"props":2468,"children":2469},{"class":180},[2470],{"type":29,"value":183},{"type":24,"tag":173,"props":2472,"children":2473},{"class":186},[2474],{"type":29,"value":1372},{"type":24,"tag":173,"props":2476,"children":2477},{"class":203},[2478],{"type":29,"value":1265},{"type":24,"tag":173,"props":2480,"children":2481},{"class":186},[2482],{"type":29,"value":408},{"type":24,"tag":173,"props":2484,"children":2485},{"class":203},[2486],{"type":29,"value":2487},"reject",{"type":24,"tag":173,"props":2489,"children":2490},{"class":186},[2491],{"type":29,"value":211},{"type":24,"tag":173,"props":2493,"children":2494},{"class":175,"line":255},[2495,2499,2503,2507,2511,2515,2519,2523,2527,2531,2536,2540,2545],{"type":24,"tag":173,"props":2496,"children":2497},{"class":186},[2498],{"type":29,"value":476},{"type":24,"tag":173,"props":2500,"children":2501},{"class":203},[2502],{"type":29,"value":2369},{"type":24,"tag":173,"props":2504,"children":2505},{"class":186},[2506],{"type":29,"value":388},{"type":24,"tag":173,"props":2508,"children":2509},{"class":192},[2510],{"type":29,"value":2414},{"type":24,"tag":173,"props":2512,"children":2513},{"class":186},[2514],{"type":29,"value":200},{"type":24,"tag":173,"props":2516,"children":2517},{"class":203},[2518],{"type":29,"value":2431},{"type":24,"tag":173,"props":2520,"children":2521},{"class":186},[2522],{"type":29,"value":408},{"type":24,"tag":173,"props":2524,"children":2525},{"class":180},[2526],{"type":29,"value":183},{"type":24,"tag":173,"props":2528,"children":2529},{"class":186},[2530],{"type":29,"value":200},{"type":24,"tag":173,"props":2532,"children":2533},{"class":203},[2534],{"type":29,"value":2535},"error",{"type":24,"tag":173,"props":2537,"children":2538},{"class":186},[2539],{"type":29,"value":408},{"type":24,"tag":173,"props":2541,"children":2542},{"class":203},[2543],{"type":29,"value":2544},"data",{"type":24,"tag":173,"props":2546,"children":2547},{"class":186},[2548],{"type":29,"value":211},{"type":24,"tag":173,"props":2550,"children":2551},{"class":175,"line":264},[2552,2556,2561,2565,2569,2573,2577,2581,2585,2589,2593],{"type":24,"tag":173,"props":2553,"children":2554},{"class":186},[2555],{"type":29,"value":1471},{"type":24,"tag":173,"props":2557,"children":2558},{"class":1296},[2559],{"type":29,"value":2560},"if",{"type":24,"tag":173,"props":2562,"children":2563},{"class":186},[2564],{"type":29,"value":1372},{"type":24,"tag":173,"props":2566,"children":2567},{"class":203},[2568],{"type":29,"value":2535},{"type":24,"tag":173,"props":2570,"children":2571},{"class":186},[2572],{"type":29,"value":2052},{"type":24,"tag":173,"props":2574,"children":2575},{"class":1296},[2576],{"type":29,"value":1299},{"type":24,"tag":173,"props":2578,"children":2579},{"class":186},[2580],{"type":29,"value":189},{"type":24,"tag":173,"props":2582,"children":2583},{"class":192},[2584],{"type":29,"value":2487},{"type":24,"tag":173,"props":2586,"children":2587},{"class":186},[2588],{"type":29,"value":200},{"type":24,"tag":173,"props":2590,"children":2591},{"class":203},[2592],{"type":29,"value":2535},{"type":24,"tag":173,"props":2594,"children":2595},{"class":186},[2596],{"type":29,"value":417},{"type":24,"tag":173,"props":2598,"children":2599},{"class":175,"line":286},[2600,2604,2608,2612,2616],{"type":24,"tag":173,"props":2601,"children":2602},{"class":186},[2603],{"type":29,"value":1471},{"type":24,"tag":173,"props":2605,"children":2606},{"class":192},[2607],{"type":29,"value":1265},{"type":24,"tag":173,"props":2609,"children":2610},{"class":186},[2611],{"type":29,"value":200},{"type":24,"tag":173,"props":2613,"children":2614},{"class":203},[2615],{"type":29,"value":2544},{"type":24,"tag":173,"props":2617,"children":2618},{"class":186},[2619],{"type":29,"value":417},{"type":24,"tag":173,"props":2621,"children":2622},{"class":175,"line":298},[2623],{"type":24,"tag":173,"props":2624,"children":2625},{"class":186},[2626],{"type":29,"value":1532},{"type":24,"tag":173,"props":2628,"children":2629},{"class":175,"line":306},[2630],{"type":24,"tag":173,"props":2631,"children":2632},{"class":186},[2633],{"type":29,"value":1540},{"type":24,"tag":173,"props":2635,"children":2636},{"class":175,"line":314},[2637],{"type":24,"tag":173,"props":2638,"children":2639},{"class":186},[2640],{"type":29,"value":2641},"};\n",{"type":24,"tag":173,"props":2643,"children":2644},{"class":175,"line":849},[2645],{"type":24,"tag":173,"props":2646,"children":2647},{"class":223},[2648],{"type":29,"value":2649},"// Generator 函数写法\n",{"type":24,"tag":173,"props":2651,"children":2652},{"class":175,"line":857},[2653,2657,2661,2665,2669,2673],{"type":24,"tag":173,"props":2654,"children":2655},{"class":180},[2656],{"type":29,"value":2359},{"type":24,"tag":173,"props":2658,"children":2659},{"class":186},[2660],{"type":29,"value":189},{"type":24,"tag":173,"props":2662,"children":2663},{"class":192},[2664],{"type":29,"value":1860},{"type":24,"tag":173,"props":2666,"children":2667},{"class":186},[2668],{"type":29,"value":1068},{"type":24,"tag":173,"props":2670,"children":2671},{"class":180},[2672],{"type":29,"value":1851},{"type":24,"tag":173,"props":2674,"children":2675},{"class":186},[2676],{"type":29,"value":468},{"type":24,"tag":173,"props":2678,"children":2679},{"class":175,"line":866},[2680,2684,2688,2692,2696,2700,2704,2708,2712,2716,2721],{"type":24,"tag":173,"props":2681,"children":2682},{"class":186},[2683],{"type":29,"value":220},{"type":24,"tag":173,"props":2685,"children":2686},{"class":180},[2687],{"type":29,"value":2359},{"type":24,"tag":173,"props":2689,"children":2690},{"class":186},[2691],{"type":29,"value":189},{"type":24,"tag":173,"props":2693,"children":2694},{"class":2366},[2695],{"type":29,"value":195},{"type":24,"tag":173,"props":2697,"children":2698},{"class":186},[2699],{"type":29,"value":1068},{"type":24,"tag":173,"props":2701,"children":2702},{"class":1296},[2703],{"type":29,"value":1810},{"type":24,"tag":173,"props":2705,"children":2706},{"class":186},[2707],{"type":29,"value":189},{"type":24,"tag":173,"props":2709,"children":2710},{"class":192},[2711],{"type":29,"value":2414},{"type":24,"tag":173,"props":2713,"children":2714},{"class":186},[2715],{"type":29,"value":200},{"type":24,"tag":173,"props":2717,"children":2718},{"class":400},[2719],{"type":29,"value":2720},"'/etc/fstab'",{"type":24,"tag":173,"props":2722,"children":2723},{"class":186},[2724],{"type":29,"value":417},{"type":24,"tag":173,"props":2726,"children":2727},{"class":175,"line":1598},[2728,2732,2736,2740,2744,2748,2752,2756,2760,2764,2769],{"type":24,"tag":173,"props":2729,"children":2730},{"class":186},[2731],{"type":29,"value":220},{"type":24,"tag":173,"props":2733,"children":2734},{"class":180},[2735],{"type":29,"value":2359},{"type":24,"tag":173,"props":2737,"children":2738},{"class":186},[2739],{"type":29,"value":189},{"type":24,"tag":173,"props":2741,"children":2742},{"class":2366},[2743],{"type":29,"value":278},{"type":24,"tag":173,"props":2745,"children":2746},{"class":186},[2747],{"type":29,"value":1068},{"type":24,"tag":173,"props":2749,"children":2750},{"class":1296},[2751],{"type":29,"value":1810},{"type":24,"tag":173,"props":2753,"children":2754},{"class":186},[2755],{"type":29,"value":189},{"type":24,"tag":173,"props":2757,"children":2758},{"class":192},[2759],{"type":29,"value":2414},{"type":24,"tag":173,"props":2761,"children":2762},{"class":186},[2763],{"type":29,"value":200},{"type":24,"tag":173,"props":2765,"children":2766},{"class":400},[2767],{"type":29,"value":2768},"'/etc/shells'",{"type":24,"tag":173,"props":2770,"children":2771},{"class":186},[2772],{"type":29,"value":417},{"type":24,"tag":173,"props":2774,"children":2775},{"class":175,"line":1624},[2776,2780,2784,2788,2792,2796,2800,2804,2809],{"type":24,"tag":173,"props":2777,"children":2778},{"class":186},[2779],{"type":29,"value":220},{"type":24,"tag":173,"props":2781,"children":2782},{"class":203},[2783],{"type":29,"value":2297},{"type":24,"tag":173,"props":2785,"children":2786},{"class":186},[2787],{"type":29,"value":388},{"type":24,"tag":173,"props":2789,"children":2790},{"class":192},[2791],{"type":29,"value":2306},{"type":24,"tag":173,"props":2793,"children":2794},{"class":186},[2795],{"type":29,"value":200},{"type":24,"tag":173,"props":2797,"children":2798},{"class":203},[2799],{"type":29,"value":195},{"type":24,"tag":173,"props":2801,"children":2802},{"class":186},[2803],{"type":29,"value":388},{"type":24,"tag":173,"props":2805,"children":2806},{"class":192},[2807],{"type":29,"value":2808},"toString",{"type":24,"tag":173,"props":2810,"children":2811},{"class":186},[2812],{"type":29,"value":2813},"());\n",{"type":24,"tag":173,"props":2815,"children":2816},{"class":175,"line":1648},[2817,2821,2825,2829,2833,2837,2841,2845,2849],{"type":24,"tag":173,"props":2818,"children":2819},{"class":186},[2820],{"type":29,"value":220},{"type":24,"tag":173,"props":2822,"children":2823},{"class":203},[2824],{"type":29,"value":2297},{"type":24,"tag":173,"props":2826,"children":2827},{"class":186},[2828],{"type":29,"value":388},{"type":24,"tag":173,"props":2830,"children":2831},{"class":192},[2832],{"type":29,"value":2306},{"type":24,"tag":173,"props":2834,"children":2835},{"class":186},[2836],{"type":29,"value":200},{"type":24,"tag":173,"props":2838,"children":2839},{"class":203},[2840],{"type":29,"value":278},{"type":24,"tag":173,"props":2842,"children":2843},{"class":186},[2844],{"type":29,"value":388},{"type":24,"tag":173,"props":2846,"children":2847},{"class":192},[2848],{"type":29,"value":2808},{"type":24,"tag":173,"props":2850,"children":2851},{"class":186},[2852],{"type":29,"value":2813},{"type":24,"tag":173,"props":2854,"children":2856},{"class":175,"line":2855},17,[2857],{"type":24,"tag":173,"props":2858,"children":2859},{"class":186},[2860],{"type":29,"value":2641},{"type":24,"tag":173,"props":2862,"children":2864},{"class":175,"line":2863},18,[2865],{"type":24,"tag":173,"props":2866,"children":2867},{},[2868],{"type":29,"value":261},{"type":24,"tag":173,"props":2870,"children":2872},{"class":175,"line":2871},19,[2873],{"type":24,"tag":173,"props":2874,"children":2875},{"class":223},[2876],{"type":29,"value":2877},"// aynsc 函数写法\n",{"type":24,"tag":173,"props":2879,"children":2881},{"class":175,"line":2880},20,[2882,2886,2890,2895,2899,2903,2907,2911],{"type":24,"tag":173,"props":2883,"children":2884},{"class":180},[2885],{"type":29,"value":2359},{"type":24,"tag":173,"props":2887,"children":2888},{"class":186},[2889],{"type":29,"value":189},{"type":24,"tag":173,"props":2891,"children":2892},{"class":192},[2893],{"type":29,"value":2894},"asyncReadFile",{"type":24,"tag":173,"props":2896,"children":2897},{"class":186},[2898],{"type":29,"value":1068},{"type":24,"tag":173,"props":2900,"children":2901},{"class":180},[2902],{"type":29,"value":2139},{"type":24,"tag":173,"props":2904,"children":2905},{"class":186},[2906],{"type":29,"value":189},{"type":24,"tag":173,"props":2908,"children":2909},{"class":180},[2910],{"type":29,"value":183},{"type":24,"tag":173,"props":2912,"children":2913},{"class":186},[2914],{"type":29,"value":468},{"type":24,"tag":173,"props":2916,"children":2918},{"class":175,"line":2917},21,[2919,2923,2927,2931,2935,2939,2943,2947,2951,2955,2959],{"type":24,"tag":173,"props":2920,"children":2921},{"class":186},[2922],{"type":29,"value":220},{"type":24,"tag":173,"props":2924,"children":2925},{"class":180},[2926],{"type":29,"value":2359},{"type":24,"tag":173,"props":2928,"children":2929},{"class":186},[2930],{"type":29,"value":189},{"type":24,"tag":173,"props":2932,"children":2933},{"class":2366},[2934],{"type":29,"value":195},{"type":24,"tag":173,"props":2936,"children":2937},{"class":186},[2938],{"type":29,"value":1068},{"type":24,"tag":173,"props":2940,"children":2941},{"class":1296},[2942],{"type":29,"value":2170},{"type":24,"tag":173,"props":2944,"children":2945},{"class":186},[2946],{"type":29,"value":189},{"type":24,"tag":173,"props":2948,"children":2949},{"class":192},[2950],{"type":29,"value":2414},{"type":24,"tag":173,"props":2952,"children":2953},{"class":186},[2954],{"type":29,"value":200},{"type":24,"tag":173,"props":2956,"children":2957},{"class":400},[2958],{"type":29,"value":2720},{"type":24,"tag":173,"props":2960,"children":2961},{"class":186},[2962],{"type":29,"value":417},{"type":24,"tag":173,"props":2964,"children":2966},{"class":175,"line":2965},22,[2967,2971,2975,2979,2983,2987,2991,2995,2999,3003,3007],{"type":24,"tag":173,"props":2968,"children":2969},{"class":186},[2970],{"type":29,"value":220},{"type":24,"tag":173,"props":2972,"children":2973},{"class":180},[2974],{"type":29,"value":2359},{"type":24,"tag":173,"props":2976,"children":2977},{"class":186},[2978],{"type":29,"value":189},{"type":24,"tag":173,"props":2980,"children":2981},{"class":2366},[2982],{"type":29,"value":278},{"type":24,"tag":173,"props":2984,"children":2985},{"class":186},[2986],{"type":29,"value":1068},{"type":24,"tag":173,"props":2988,"children":2989},{"class":1296},[2990],{"type":29,"value":2170},{"type":24,"tag":173,"props":2992,"children":2993},{"class":186},[2994],{"type":29,"value":189},{"type":24,"tag":173,"props":2996,"children":2997},{"class":192},[2998],{"type":29,"value":2414},{"type":24,"tag":173,"props":3000,"children":3001},{"class":186},[3002],{"type":29,"value":200},{"type":24,"tag":173,"props":3004,"children":3005},{"class":400},[3006],{"type":29,"value":2768},{"type":24,"tag":173,"props":3008,"children":3009},{"class":186},[3010],{"type":29,"value":417},{"type":24,"tag":173,"props":3012,"children":3014},{"class":175,"line":3013},23,[3015,3019,3023,3027,3031,3035,3039,3043,3047],{"type":24,"tag":173,"props":3016,"children":3017},{"class":186},[3018],{"type":29,"value":220},{"type":24,"tag":173,"props":3020,"children":3021},{"class":203},[3022],{"type":29,"value":2297},{"type":24,"tag":173,"props":3024,"children":3025},{"class":186},[3026],{"type":29,"value":388},{"type":24,"tag":173,"props":3028,"children":3029},{"class":192},[3030],{"type":29,"value":2306},{"type":24,"tag":173,"props":3032,"children":3033},{"class":186},[3034],{"type":29,"value":200},{"type":24,"tag":173,"props":3036,"children":3037},{"class":203},[3038],{"type":29,"value":195},{"type":24,"tag":173,"props":3040,"children":3041},{"class":186},[3042],{"type":29,"value":388},{"type":24,"tag":173,"props":3044,"children":3045},{"class":192},[3046],{"type":29,"value":2808},{"type":24,"tag":173,"props":3048,"children":3049},{"class":186},[3050],{"type":29,"value":2813},{"type":24,"tag":173,"props":3052,"children":3054},{"class":175,"line":3053},24,[3055,3059,3063,3067,3071,3075,3079,3083,3087],{"type":24,"tag":173,"props":3056,"children":3057},{"class":186},[3058],{"type":29,"value":220},{"type":24,"tag":173,"props":3060,"children":3061},{"class":203},[3062],{"type":29,"value":2297},{"type":24,"tag":173,"props":3064,"children":3065},{"class":186},[3066],{"type":29,"value":388},{"type":24,"tag":173,"props":3068,"children":3069},{"class":192},[3070],{"type":29,"value":2306},{"type":24,"tag":173,"props":3072,"children":3073},{"class":186},[3074],{"type":29,"value":200},{"type":24,"tag":173,"props":3076,"children":3077},{"class":203},[3078],{"type":29,"value":278},{"type":24,"tag":173,"props":3080,"children":3081},{"class":186},[3082],{"type":29,"value":388},{"type":24,"tag":173,"props":3084,"children":3085},{"class":192},[3086],{"type":29,"value":2808},{"type":24,"tag":173,"props":3088,"children":3089},{"class":186},[3090],{"type":29,"value":2813},{"type":24,"tag":173,"props":3092,"children":3094},{"class":175,"line":3093},25,[3095],{"type":24,"tag":173,"props":3096,"children":3097},{"class":186},[3098],{"type":29,"value":3099},"};",{"type":24,"tag":25,"props":3101,"children":3102},{},[3103,3105,3109,3111,3115,3117,3122,3124,3128,3130,3134,3135,3139],{"type":29,"value":3104},"一比较就会发现，",{"type":24,"tag":99,"props":3106,"children":3107},{},[3108],{"type":29,"value":2139},{"type":29,"value":3110},"函数就是将 ",{"type":24,"tag":99,"props":3112,"children":3113},{},[3114],{"type":29,"value":1736},{"type":29,"value":3116},"函数的星号 ",{"type":24,"tag":99,"props":3118,"children":3119},{},[3120],{"type":29,"value":3121},"*",{"type":29,"value":3123},"替换成 ",{"type":24,"tag":99,"props":3125,"children":3126},{},[3127],{"type":29,"value":2139},{"type":29,"value":3129},"，将 ",{"type":24,"tag":99,"props":3131,"children":3132},{},[3133],{"type":29,"value":1810},{"type":29,"value":3123},{"type":24,"tag":99,"props":3136,"children":3137},{},[3138],{"type":29,"value":2170},{"type":29,"value":3140},"，仅此而已。",{"type":24,"tag":25,"props":3142,"children":3143},{},[3144,3148],{"type":24,"tag":99,"props":3145,"children":3146},{},[3147],{"type":29,"value":343},{"type":29,"value":3149},"：更好的语义,更广的适用性,返回值是 Promise。",{"type":24,"tag":31,"props":3151,"children":3153},{"id":3152},"总结",[3154],{"type":29,"value":3152},{"type":24,"tag":25,"props":3156,"children":3157},{},[3158,3160,3164,3166,3170,3171,3176,3177,3182,3183,3187,3189,3193],{"type":29,"value":3159},"JS 异步编程发展史：",{"type":24,"tag":99,"props":3161,"children":3162},{},[3163],{"type":29,"value":206},{"type":29,"value":3165}," -> ",{"type":24,"tag":99,"props":3167,"children":3168},{},[3169],{"type":29,"value":1316},{"type":29,"value":3165},{"type":24,"tag":99,"props":3172,"children":3173},{},[3174],{"type":29,"value":3175},"generator",{"type":29,"value":3165},{"type":24,"tag":99,"props":3178,"children":3179},{},[3180],{"type":29,"value":3181},"async + await",{"type":29,"value":592},{"type":24,"tag":99,"props":3184,"children":3185},{},[3186],{"type":29,"value":2180},{"type":29,"value":3188},"函数的实现是将 ",{"type":24,"tag":99,"props":3190,"children":3191},{},[3192],{"type":29,"value":1736},{"type":29,"value":3194},"函数和自动执行器，包装在一个函数里。它也是目前异步最好的解决方案了。",{"type":24,"tag":3196,"children":3197},"style",[3198],{"type":29,"value":3199},".ct-14aa4b{color:#4FC1FF}\n.ct-6c4a9a{color:#C586C0}\n.ct-d7a7da{color:#4EC9B0}\n.ct-f729d8{color:#B5CEA8}\n.ct-2c5239{color:#CE9178}\n.ct-ca0565{color:#6A9955}\n.ct-565978{color:#9CDCFE}\n.ct-3df832{color:#DCDCAA}\n.ct-56eaea{color:#D4D4D4}\n.ct-4bb509{color:#569CD6}",{"title":14,"searchDepth":214,"depth":214,"links":3201},[3202,3203,3204,3205,3206,3207,3208,3209,3210],{"id":33,"depth":214,"text":36},{"id":84,"depth":214,"text":84},{"id":149,"depth":214,"text":152},{"id":358,"depth":214,"text":361},{"id":616,"depth":214,"text":619},{"id":968,"depth":214,"text":971},{"id":1725,"depth":214,"text":1728},{"id":2128,"depth":214,"text":2131},{"id":3152,"depth":214,"text":3152},"markdown","content:articles:2020-04-01-Js异步编程方案总结.md","content","articles/2020-04-01-Js异步编程方案总结.md","md",{"_path":3217,"_dir":12,"_draft":13,"_partial":13,"_locale":14,"_empty":13,"title":3218,"description":3219,"excerpt":3220,"date":3226,"tags":3227,"body":3229,"_type":3211,"_id":3270,"_source":3213,"_file":3271,"_extension":3215},"/articles/2020-05-02-cssz-indexopacity","CSS中z-index属性在使用opacity后失效","本篇博客主要是对 CSS 中 z-index 属性在使用 opacity 后失效",{"type":21,"children":3221},[3222],{"type":24,"tag":25,"props":3223,"children":3224},{},[3225],{"type":29,"value":3219},"2020-05-01T00:00:00.000Z",[3228],"css",{"type":21,"children":3230,"toc":3265},[3231,3235,3240,3245,3250,3255,3260],{"type":24,"tag":25,"props":3232,"children":3233},{},[3234],{"type":29,"value":3219},{"type":24,"tag":31,"props":3236,"children":3238},{"id":3237},"背景",[3239],{"type":29,"value":3237},{"type":24,"tag":25,"props":3241,"children":3242},{},[3243],{"type":29,"value":3244},"当父盒子背景需要修改透明度 和 子盒子使用 z-index 提高层级的时候，会出现以下情况,会被阻挡",{"type":24,"tag":31,"props":3246,"children":3248},{"id":3247},"原因",[3249],{"type":29,"value":3247},{"type":24,"tag":25,"props":3251,"children":3252},{},[3253],{"type":29,"value":3254},"父盒子的 opacity 会导致 子盒子在使用 z-index 的失效",{"type":24,"tag":31,"props":3256,"children":3258},{"id":3257},"解决办法",[3259],{"type":29,"value":3257},{"type":24,"tag":25,"props":3261,"children":3262},{},[3263],{"type":29,"value":3264},"比如 父盒子背景需要设置颜色为白色， opacity 为 0.8 的时候，可以将背景颜色修改为 rgba 写法 通过第四个值，alpha 值，制定了色彩的透明度/不透明度，它的范围为 0.0 到 1.0 之间,0.5 为半透明。可以解决子元素 z-index 失效，这样就能避免使用 opacity.",{"title":14,"searchDepth":214,"depth":214,"links":3266},[3267,3268,3269],{"id":3237,"depth":214,"text":3237},{"id":3247,"depth":214,"text":3247},{"id":3257,"depth":214,"text":3257},"content:articles:2020-05-02-CSS中z-index属性在使用opacity后失效.md","articles/2020-05-02-CSS中z-index属性在使用opacity后失效.md",{"_path":3273,"_dir":12,"_draft":13,"_partial":13,"_locale":14,"_empty":13,"title":3274,"description":3275,"excerpt":3276,"date":3226,"tags":3282,"body":3284,"_type":3211,"_id":5095,"_source":3213,"_file":5096,"_extension":3215},"/articles/2020-05-02-js","深入 JS 之作用域和闭包","本篇博客主要是对 Javcscript 作用域和闭包学习理解",{"type":21,"children":3277},[3278],{"type":24,"tag":25,"props":3279,"children":3280},{},[3281],{"type":29,"value":3275},[3283,19],"Closure",{"type":21,"children":3285,"toc":5088},[3286,3290,3295,3300,3309,3314,3319,3324,3329,3337,3342,3347,3476,3481,3486,3491,3515,3520,3525,3538,3543,3548,3553,3561,3566,3571,3579,3584,3592,3597,3602,3607,3615,3620,3628,3633,3638,3765,3770,4146,4151,4156,4829,4834,4842,4847,5041,5046,5051,5059,5064,5069,5074,5079,5084],{"type":24,"tag":25,"props":3287,"children":3288},{},[3289],{"type":29,"value":3275},{"type":24,"tag":31,"props":3291,"children":3293},{"id":3292},"作用域",[3294],{"type":29,"value":3292},{"type":24,"tag":25,"props":3296,"children":3297},{},[3298],{"type":29,"value":3299},"编译原理对作用域的定义：",{"type":24,"tag":3301,"props":3302,"children":3303},"blockquote",{},[3304],{"type":24,"tag":25,"props":3305,"children":3306},{},[3307],{"type":29,"value":3308},"作用域是指声明的变量在程序中的一个区域，在其中对变量的使用都指向这个声明。如果仅通过阅读程序就可以确定一个变量的作用域，那么语言使用的是词法作用域，否则，这个语言使用的是动态作用域。",{"type":24,"tag":25,"props":3310,"children":3311},{},[3312],{"type":29,"value":3313},"作用域用一句话概括就是规定如何查找变量，检查是否对变量有访问权限。",{"type":24,"tag":25,"props":3315,"children":3316},{},[3317],{"type":29,"value":3318},"JavaScript 采用词法作用域，也叫静态作用域。",{"type":24,"tag":31,"props":3320,"children":3322},{"id":3321},"编译",[3323],{"type":29,"value":3321},{"type":24,"tag":25,"props":3325,"children":3326},{},[3327],{"type":29,"value":3328},"MDN 对 JavaScript 的定义为：",{"type":24,"tag":3301,"props":3330,"children":3331},{},[3332],{"type":24,"tag":25,"props":3333,"children":3334},{},[3335],{"type":29,"value":3336},"JavaScript 是一种解释型或即时编译型的编程语言。",{"type":24,"tag":25,"props":3338,"children":3339},{},[3340],{"type":29,"value":3341},"JavaScript 语言是解释型语言，解释型语言的特点是逐个语句地执行源程序，会出现性能低下问题。而谷歌团队为解决 web 前端工作者的 JavaScript 性能低下问题，首次在脚本引擎（V8）中使用的即时编译（JIT），加上使用隐藏类和内联缓存等方法，使 JavaScript 语言拥有堪比主流编程语言（Java）的执行速度。",{"type":24,"tag":25,"props":3343,"children":3344},{},[3345],{"type":29,"value":3346},"思考下面 🌰 ：",{"type":24,"tag":159,"props":3348,"children":3350},{"code":3349,"language":162,"meta":163},"var greeting = \"Hello\";\r\n\r\nconsole.log(greeting);\r\n\r\nvar greeting = .\"Hello\";\r\n\r\n// SyntaxError: Unexpected token '.'\n",[3351],{"type":24,"tag":166,"props":3352,"children":3353},{},[3354],{"type":24,"tag":159,"props":3355,"children":3356},{"__ignoreMap":14},[3357,3390,3397,3425,3432,3460,3467],{"type":24,"tag":173,"props":3358,"children":3359},{"class":175,"line":176},[3360,3365,3370,3376,3380,3386],{"type":24,"tag":173,"props":3361,"children":3363},{"class":3362},"ct-c42d0a",[3364],{"type":29,"value":1054},{"type":24,"tag":173,"props":3366,"children":3368},{"class":3367},"ct-3909c3",[3369],{"type":29,"value":189},{"type":24,"tag":173,"props":3371,"children":3373},{"class":3372},"ct-e43f92",[3374],{"type":29,"value":3375},"greeting",{"type":24,"tag":173,"props":3377,"children":3378},{"class":3367},[3379],{"type":29,"value":1068},{"type":24,"tag":173,"props":3381,"children":3383},{"class":3382},"ct-8bd768",[3384],{"type":29,"value":3385},"\"Hello\"",{"type":24,"tag":173,"props":3387,"children":3388},{"class":3367},[3389],{"type":29,"value":1321},{"type":24,"tag":173,"props":3391,"children":3392},{"class":175,"line":214},[3393],{"type":24,"tag":173,"props":3394,"children":3395},{},[3396],{"type":29,"value":261},{"type":24,"tag":173,"props":3398,"children":3399},{"class":175,"line":229},[3400,3404,3408,3413,3417,3421],{"type":24,"tag":173,"props":3401,"children":3402},{"class":3372},[3403],{"type":29,"value":2297},{"type":24,"tag":173,"props":3405,"children":3406},{"class":3367},[3407],{"type":29,"value":388},{"type":24,"tag":173,"props":3409,"children":3411},{"class":3410},"ct-43df80",[3412],{"type":29,"value":2306},{"type":24,"tag":173,"props":3414,"children":3415},{"class":3367},[3416],{"type":29,"value":200},{"type":24,"tag":173,"props":3418,"children":3419},{"class":3372},[3420],{"type":29,"value":3375},{"type":24,"tag":173,"props":3422,"children":3423},{"class":3367},[3424],{"type":29,"value":417},{"type":24,"tag":173,"props":3426,"children":3427},{"class":175,"line":246},[3428],{"type":24,"tag":173,"props":3429,"children":3430},{},[3431],{"type":29,"value":261},{"type":24,"tag":173,"props":3433,"children":3434},{"class":175,"line":255},[3435,3439,3443,3447,3452,3456],{"type":24,"tag":173,"props":3436,"children":3437},{"class":3362},[3438],{"type":29,"value":1054},{"type":24,"tag":173,"props":3440,"children":3441},{"class":3367},[3442],{"type":29,"value":189},{"type":24,"tag":173,"props":3444,"children":3445},{"class":3372},[3446],{"type":29,"value":3375},{"type":24,"tag":173,"props":3448,"children":3449},{"class":3367},[3450],{"type":29,"value":3451}," = .",{"type":24,"tag":173,"props":3453,"children":3454},{"class":3382},[3455],{"type":29,"value":3385},{"type":24,"tag":173,"props":3457,"children":3458},{"class":3367},[3459],{"type":29,"value":1321},{"type":24,"tag":173,"props":3461,"children":3462},{"class":175,"line":264},[3463],{"type":24,"tag":173,"props":3464,"children":3465},{},[3466],{"type":29,"value":261},{"type":24,"tag":173,"props":3468,"children":3469},{"class":175,"line":286},[3470],{"type":24,"tag":173,"props":3471,"children":3473},{"class":3472},"ct-b1851e",[3474],{"type":29,"value":3475},"// SyntaxError: Unexpected token '.'",{"type":24,"tag":25,"props":3477,"children":3478},{},[3479],{"type":29,"value":3480},"首先，根据解释型语言的定义，代码会在执行时被编译且逐行执行。上面代码执行结果应是先输出变量，接着赋值报错。但是实际结果是直接报错。是由于执行程序的前一刻会进行编译。",{"type":24,"tag":25,"props":3482,"children":3483},{},[3484],{"type":29,"value":3485},"JavaScript 脚本引擎的工作方式来进一步理解上面的 🌰：",{"type":24,"tag":25,"props":3487,"children":3488},{},[3489],{"type":29,"value":3490},"脚本引擎要开始解释执行，得通过词法分析和语法分析得到语法分析树后才可以。当要执行 script 代码段，它的执行顺序如下：",{"type":24,"tag":3492,"props":3493,"children":3494},"ol",{},[3495,3500,3505,3510],{"type":24,"tag":52,"props":3496,"children":3497},{},[3498],{"type":29,"value":3499},"读入代码。",{"type":24,"tag":52,"props":3501,"children":3502},{},[3503],{"type":29,"value":3504},"做词法分析和语法分析，有错则报语法错误。",{"type":24,"tag":52,"props":3506,"children":3507},{},[3508],{"type":29,"value":3509},"对 var 变量和 function 定义做“预解析”。",{"type":24,"tag":52,"props":3511,"children":3512},{},[3513],{"type":29,"value":3514},"执行代码，有错则报错。",{"type":24,"tag":25,"props":3516,"children":3517},{},[3518],{"type":29,"value":3519},"最后，我们可以清楚的明白，代码在程序执行的前一刻在编译做语法分析的时候，遇到语法错误所以直接报错，区别与传统的解释型语言，JavaScript 是解析器和编译器混合使用。程序最后其实并没有执行。",{"type":24,"tag":25,"props":3521,"children":3522},{},[3523],{"type":29,"value":3524},"上面过程，可以将 JavaScript 引擎工作方式归结两个阶段：解析和执行。",{"type":24,"tag":48,"props":3526,"children":3527},{},[3528,3533],{"type":24,"tag":52,"props":3529,"children":3530},{},[3531],{"type":29,"value":3532},"解析：通过语法分析和预解析构造合法的语法分析树。",{"type":24,"tag":52,"props":3534,"children":3535},{},[3536],{"type":29,"value":3537},"执行：执行具体的某个 function， JavaScript 引擎在执行每个函数实例时， 都会创建一个执行环境 (Execution Context) 和活动对象 (Active Object) 。",{"type":24,"tag":31,"props":3539,"children":3541},{"id":3540},"词法作用域",[3542],{"type":29,"value":3540},{"type":24,"tag":25,"props":3544,"children":3545},{},[3546],{"type":29,"value":3547},"要真正理解首先要先了解几个比较重要的概念。",{"type":24,"tag":25,"props":3549,"children":3550},{},[3551],{"type":29,"value":3552},"词法作用域定义：",{"type":24,"tag":3301,"props":3554,"children":3555},{},[3556],{"type":24,"tag":25,"props":3557,"children":3558},{},[3559],{"type":29,"value":3560},"词法作用域指变量的作用域不是执行时决定而是在定义时决定，也就是说通过静态分析就能确定，词法作用域取决于源码，因此词法作用域也叫做静态作用域。",{"type":24,"tag":25,"props":3562,"children":3563},{},[3564],{"type":29,"value":3565},"ES5中使用词法环境管理词法作用域。ES6中作用域的概念变成了词法环境概念。",{"type":24,"tag":25,"props":3567,"children":3568},{},[3569],{"type":29,"value":3570},"编译原理对环境和状态的定义：",{"type":24,"tag":3301,"props":3572,"children":3573},{},[3574],{"type":24,"tag":25,"props":3575,"children":3576},{},[3577],{"type":29,"value":3578},"环境指的是名字到变量的映射（内存位置）。状态是内存位置到它们值的映射。",{"type":24,"tag":25,"props":3580,"children":3581},{},[3582],{"type":29,"value":3583},"词法环境的定义：",{"type":24,"tag":3301,"props":3585,"children":3586},{},[3587],{"type":24,"tag":25,"props":3588,"children":3589},{},[3590],{"type":29,"value":3591},"词法环境 是一个用于定义特定变量和函数标识符在 ECMAScript 代码的词法嵌套结构上关联关系的规范类型。简单来说是 JavaScript 引擎内部用来跟踪标识符和变量之间的映射关系。",{"type":24,"tag":25,"props":3593,"children":3594},{},[3595],{"type":29,"value":3596},"词法环境由一个环境记录项和可能为空的外部词法环境引用构成。",{"type":24,"tag":25,"props":3598,"children":3599},{},[3600],{"type":29,"value":3601},"变量环境组件和词法环境，又统称为词法环境。",{"type":24,"tag":25,"props":3603,"children":3604},{},[3605],{"type":29,"value":3606},"变量环境的定义：",{"type":24,"tag":3301,"props":3608,"children":3609},{},[3610],{"type":24,"tag":25,"props":3611,"children":3612},{},[3613],{"type":29,"value":3614},"变量标识符和函数标识符对内存位置的映射，简单来说声明的变量函数它们知道自己的数据存储在哪里。（等同于词法环境）",{"type":24,"tag":25,"props":3616,"children":3617},{},[3618],{"type":29,"value":3619},"执行环境（也称执行上下文）的定义：",{"type":24,"tag":3301,"props":3621,"children":3622},{},[3623],{"type":24,"tag":25,"props":3624,"children":3625},{},[3626],{"type":29,"value":3627},"执行环境就是当前 JavaScript 代码被解析和执行时所在环境的抽象概念， JavaScript 中运行任何的代码都是在执行环境中运行。",{"type":24,"tag":25,"props":3629,"children":3630},{},[3631],{"type":29,"value":3632},"每调用一个函数就会生成一个函数执行环境，script 标签里的代码可以看成是一个立即执行的“匿名函数”，这个被称为全局执行环境。",{"type":24,"tag":25,"props":3634,"children":3635},{},[3636],{"type":29,"value":3637},"ES5 执行环境组成部分：",{"type":24,"tag":159,"props":3639,"children":3641},{"code":3640,"language":162,"meta":163},"ExecutionContext = {\r\n  ThisBinding: \u003Cthis value>,\r\n  VariableEnvironment: { ... }, // 变量环境\r\n  LexicalEnvironment: { ... }   // 词法环境\r\n}\n",[3642],{"type":24,"tag":166,"props":3643,"children":3644},{},[3645],{"type":24,"tag":159,"props":3646,"children":3647},{"__ignoreMap":14},[3648,3661,3706,3733,3758],{"type":24,"tag":173,"props":3649,"children":3650},{"class":175,"line":176},[3651,3656],{"type":24,"tag":173,"props":3652,"children":3653},{"class":3372},[3654],{"type":29,"value":3655},"ExecutionContext",{"type":24,"tag":173,"props":3657,"children":3658},{"class":3367},[3659],{"type":29,"value":3660}," = {\n",{"type":24,"tag":173,"props":3662,"children":3663},{"class":175,"line":214},[3664,3668,3673,3677,3683,3688,3692,3696,3701],{"type":24,"tag":173,"props":3665,"children":3666},{"class":3367},[3667],{"type":29,"value":220},{"type":24,"tag":173,"props":3669,"children":3670},{"class":3372},[3671],{"type":29,"value":3672},"ThisBinding:",{"type":24,"tag":173,"props":3674,"children":3675},{"class":3367},[3676],{"type":29,"value":189},{"type":24,"tag":173,"props":3678,"children":3680},{"class":3679},"ct-053ab1",[3681],{"type":29,"value":3682},"\u003C",{"type":24,"tag":173,"props":3684,"children":3685},{"class":3362},[3686],{"type":29,"value":3687},"this",{"type":24,"tag":173,"props":3689,"children":3690},{"class":3367},[3691],{"type":29,"value":189},{"type":24,"tag":173,"props":3693,"children":3694},{"class":3372},[3695],{"type":29,"value":2073},{"type":24,"tag":173,"props":3697,"children":3698},{"class":3679},[3699],{"type":29,"value":3700},">",{"type":24,"tag":173,"props":3702,"children":3703},{"class":3367},[3704],{"type":29,"value":3705},",\n",{"type":24,"tag":173,"props":3707,"children":3708},{"class":175,"line":229},[3709,3714,3719,3724,3728],{"type":24,"tag":173,"props":3710,"children":3711},{"class":3367},[3712],{"type":29,"value":3713},"  VariableEnvironment: ",{"type":24,"tag":173,"props":3715,"children":3716},{"class":3362},[3717],{"type":29,"value":3718},"{",{"type":24,"tag":173,"props":3720,"children":3721},{"class":3367},[3722],{"type":29,"value":3723}," ... ",{"type":24,"tag":173,"props":3725,"children":3726},{"class":3362},[3727],{"type":29,"value":544},{"type":24,"tag":173,"props":3729,"children":3730},{"class":3367},[3731],{"type":29,"value":3732},", // 变量环境\n",{"type":24,"tag":173,"props":3734,"children":3735},{"class":175,"line":246},[3736,3741,3745,3749,3753],{"type":24,"tag":173,"props":3737,"children":3738},{"class":3367},[3739],{"type":29,"value":3740},"  LexicalEnvironment: ",{"type":24,"tag":173,"props":3742,"children":3743},{"class":3362},[3744],{"type":29,"value":3718},{"type":24,"tag":173,"props":3746,"children":3747},{"class":3367},[3748],{"type":29,"value":3723},{"type":24,"tag":173,"props":3750,"children":3751},{"class":3362},[3752],{"type":29,"value":544},{"type":24,"tag":173,"props":3754,"children":3755},{"class":3367},[3756],{"type":29,"value":3757},"   // 词法环境\n",{"type":24,"tag":173,"props":3759,"children":3760},{"class":175,"line":255},[3761],{"type":24,"tag":173,"props":3762,"children":3763},{"class":3367},[3764],{"type":29,"value":544},{"type":24,"tag":25,"props":3766,"children":3767},{},[3768],{"type":29,"value":3769},"进一步理解，来看下面 🌰：",{"type":24,"tag":159,"props":3771,"children":3773},{"code":3772,"language":162,"meta":163},"// __outer__：外部词法环境引用，x、y：环境记录项。\r\n// 全局环境变量 VariableEnvironment (global) = { __outer__: null }\r\n// 词法环境 LexicalEnvironment = VariableEnvironment (global)\r\n\r\n// 立即执行函数foo\r\n(function foo() {\r\n  //1、 这里命名为A（随便取用于区分下面） 的变量环境\r\n  //（可以理解为执行之前分配内存空间，初始化为undefined）\r\n  // VariableEnvironment (A) = { x: undefined, __outer__: global } \r\n  \r\n  //2、 词法环境等同于变量环境的原因，变量环境是词法环境的引用\r\n  // LexicalEnvironment = VariableEnvironment (A) \r\n\r\n  var x;\r\n  // 立即执行函数bar\r\n  (function bar(){\r\n    // 初始化词法环境\r\n    // VariableEnvironment (B) = { y: undefined, __outer__: A }\r\n    // LexicalEnvironment = VariableEnvironment (B)\r\n\r\n    var y;\r\n\r\n    x = 2;\r\n    // 初始化词法环境完成之后，立即执行 x=2 语句，通过__outer__找到外部的x\r\n    // VariableEnvironment (A) = { x: 2, __outer__: global }\r\n    // bar LexicalEnvironment 仍然是 VariableEnvironment (B)\r\n\r\n  })();\r\n\r\n})();\n",[3774],{"type":24,"tag":166,"props":3775,"children":3776},{},[3777],{"type":24,"tag":159,"props":3778,"children":3779},{"__ignoreMap":14},[3780,3788,3796,3804,3811,3819,3843,3855,3867,3879,3887,3899,3911,3918,3941,3953,3978,3990,4002,4014,4021,4044,4051,4075,4087,4099,4112,4120,4129,4137],{"type":24,"tag":173,"props":3781,"children":3782},{"class":175,"line":176},[3783],{"type":24,"tag":173,"props":3784,"children":3785},{"class":3472},[3786],{"type":29,"value":3787},"// __outer__：外部词法环境引用，x、y：环境记录项。\n",{"type":24,"tag":173,"props":3789,"children":3790},{"class":175,"line":214},[3791],{"type":24,"tag":173,"props":3792,"children":3793},{"class":3472},[3794],{"type":29,"value":3795},"// 全局环境变量 VariableEnvironment (global) = { __outer__: null }\n",{"type":24,"tag":173,"props":3797,"children":3798},{"class":175,"line":229},[3799],{"type":24,"tag":173,"props":3800,"children":3801},{"class":3472},[3802],{"type":29,"value":3803},"// 词法环境 LexicalEnvironment = VariableEnvironment (global)\n",{"type":24,"tag":173,"props":3805,"children":3806},{"class":175,"line":246},[3807],{"type":24,"tag":173,"props":3808,"children":3809},{},[3810],{"type":29,"value":261},{"type":24,"tag":173,"props":3812,"children":3813},{"class":175,"line":255},[3814],{"type":24,"tag":173,"props":3815,"children":3816},{"class":3472},[3817],{"type":29,"value":3818},"// 立即执行函数foo\n",{"type":24,"tag":173,"props":3820,"children":3821},{"class":175,"line":264},[3822,3826,3830,3834,3839],{"type":24,"tag":173,"props":3823,"children":3824},{"class":3367},[3825],{"type":29,"value":200},{"type":24,"tag":173,"props":3827,"children":3828},{"class":3362},[3829],{"type":29,"value":183},{"type":24,"tag":173,"props":3831,"children":3832},{"class":3367},[3833],{"type":29,"value":189},{"type":24,"tag":173,"props":3835,"children":3836},{"class":3410},[3837],{"type":29,"value":3838},"foo",{"type":24,"tag":173,"props":3840,"children":3841},{"class":3367},[3842],{"type":29,"value":283},{"type":24,"tag":173,"props":3844,"children":3845},{"class":175,"line":286},[3846,3850],{"type":24,"tag":173,"props":3847,"children":3848},{"class":3367},[3849],{"type":29,"value":220},{"type":24,"tag":173,"props":3851,"children":3852},{"class":3472},[3853],{"type":29,"value":3854},"//1、 这里命名为A（随便取用于区分下面） 的变量环境\n",{"type":24,"tag":173,"props":3856,"children":3857},{"class":175,"line":298},[3858,3862],{"type":24,"tag":173,"props":3859,"children":3860},{"class":3367},[3861],{"type":29,"value":220},{"type":24,"tag":173,"props":3863,"children":3864},{"class":3472},[3865],{"type":29,"value":3866},"//（可以理解为执行之前分配内存空间，初始化为undefined）\n",{"type":24,"tag":173,"props":3868,"children":3869},{"class":175,"line":306},[3870,3874],{"type":24,"tag":173,"props":3871,"children":3872},{"class":3367},[3873],{"type":29,"value":220},{"type":24,"tag":173,"props":3875,"children":3876},{"class":3472},[3877],{"type":29,"value":3878},"// VariableEnvironment (A) = { x: undefined, __outer__: global } \n",{"type":24,"tag":173,"props":3880,"children":3881},{"class":175,"line":314},[3882],{"type":24,"tag":173,"props":3883,"children":3884},{"class":3367},[3885],{"type":29,"value":3886},"  \n",{"type":24,"tag":173,"props":3888,"children":3889},{"class":175,"line":849},[3890,3894],{"type":24,"tag":173,"props":3891,"children":3892},{"class":3367},[3893],{"type":29,"value":220},{"type":24,"tag":173,"props":3895,"children":3896},{"class":3472},[3897],{"type":29,"value":3898},"//2、 词法环境等同于变量环境的原因，变量环境是词法环境的引用\n",{"type":24,"tag":173,"props":3900,"children":3901},{"class":175,"line":857},[3902,3906],{"type":24,"tag":173,"props":3903,"children":3904},{"class":3367},[3905],{"type":29,"value":220},{"type":24,"tag":173,"props":3907,"children":3908},{"class":3472},[3909],{"type":29,"value":3910},"// LexicalEnvironment = VariableEnvironment (A) \n",{"type":24,"tag":173,"props":3912,"children":3913},{"class":175,"line":866},[3914],{"type":24,"tag":173,"props":3915,"children":3916},{},[3917],{"type":29,"value":261},{"type":24,"tag":173,"props":3919,"children":3920},{"class":175,"line":1598},[3921,3925,3929,3933,3937],{"type":24,"tag":173,"props":3922,"children":3923},{"class":3367},[3924],{"type":29,"value":220},{"type":24,"tag":173,"props":3926,"children":3927},{"class":3362},[3928],{"type":29,"value":1054},{"type":24,"tag":173,"props":3930,"children":3931},{"class":3367},[3932],{"type":29,"value":189},{"type":24,"tag":173,"props":3934,"children":3935},{"class":3372},[3936],{"type":29,"value":1869},{"type":24,"tag":173,"props":3938,"children":3939},{"class":3367},[3940],{"type":29,"value":1321},{"type":24,"tag":173,"props":3942,"children":3943},{"class":175,"line":1624},[3944,3948],{"type":24,"tag":173,"props":3945,"children":3946},{"class":3367},[3947],{"type":29,"value":220},{"type":24,"tag":173,"props":3949,"children":3950},{"class":3472},[3951],{"type":29,"value":3952},"// 立即执行函数bar\n",{"type":24,"tag":173,"props":3954,"children":3955},{"class":175,"line":1648},[3956,3961,3965,3969,3974],{"type":24,"tag":173,"props":3957,"children":3958},{"class":3367},[3959],{"type":29,"value":3960},"  (",{"type":24,"tag":173,"props":3962,"children":3963},{"class":3362},[3964],{"type":29,"value":183},{"type":24,"tag":173,"props":3966,"children":3967},{"class":3367},[3968],{"type":29,"value":189},{"type":24,"tag":173,"props":3970,"children":3971},{"class":3410},[3972],{"type":29,"value":3973},"bar",{"type":24,"tag":173,"props":3975,"children":3976},{"class":3367},[3977],{"type":29,"value":1167},{"type":24,"tag":173,"props":3979,"children":3980},{"class":175,"line":2855},[3981,3985],{"type":24,"tag":173,"props":3982,"children":3983},{"class":3367},[3984],{"type":29,"value":476},{"type":24,"tag":173,"props":3986,"children":3987},{"class":3472},[3988],{"type":29,"value":3989},"// 初始化词法环境\n",{"type":24,"tag":173,"props":3991,"children":3992},{"class":175,"line":2863},[3993,3997],{"type":24,"tag":173,"props":3994,"children":3995},{"class":3367},[3996],{"type":29,"value":476},{"type":24,"tag":173,"props":3998,"children":3999},{"class":3472},[4000],{"type":29,"value":4001},"// VariableEnvironment (B) = { y: undefined, __outer__: A }\n",{"type":24,"tag":173,"props":4003,"children":4004},{"class":175,"line":2871},[4005,4009],{"type":24,"tag":173,"props":4006,"children":4007},{"class":3367},[4008],{"type":29,"value":476},{"type":24,"tag":173,"props":4010,"children":4011},{"class":3472},[4012],{"type":29,"value":4013},"// LexicalEnvironment = VariableEnvironment (B)\n",{"type":24,"tag":173,"props":4015,"children":4016},{"class":175,"line":2880},[4017],{"type":24,"tag":173,"props":4018,"children":4019},{},[4020],{"type":29,"value":261},{"type":24,"tag":173,"props":4022,"children":4023},{"class":175,"line":2917},[4024,4028,4032,4036,4040],{"type":24,"tag":173,"props":4025,"children":4026},{"class":3367},[4027],{"type":29,"value":476},{"type":24,"tag":173,"props":4029,"children":4030},{"class":3362},[4031],{"type":29,"value":1054},{"type":24,"tag":173,"props":4033,"children":4034},{"class":3367},[4035],{"type":29,"value":189},{"type":24,"tag":173,"props":4037,"children":4038},{"class":3372},[4039],{"type":29,"value":1894},{"type":24,"tag":173,"props":4041,"children":4042},{"class":3367},[4043],{"type":29,"value":1321},{"type":24,"tag":173,"props":4045,"children":4046},{"class":175,"line":2965},[4047],{"type":24,"tag":173,"props":4048,"children":4049},{},[4050],{"type":29,"value":261},{"type":24,"tag":173,"props":4052,"children":4053},{"class":175,"line":3013},[4054,4058,4062,4066,4071],{"type":24,"tag":173,"props":4055,"children":4056},{"class":3367},[4057],{"type":29,"value":476},{"type":24,"tag":173,"props":4059,"children":4060},{"class":3372},[4061],{"type":29,"value":1869},{"type":24,"tag":173,"props":4063,"children":4064},{"class":3367},[4065],{"type":29,"value":1068},{"type":24,"tag":173,"props":4067,"children":4069},{"class":4068},"ct-4d4437",[4070],{"type":29,"value":1920},{"type":24,"tag":173,"props":4072,"children":4073},{"class":3367},[4074],{"type":29,"value":1321},{"type":24,"tag":173,"props":4076,"children":4077},{"class":175,"line":3053},[4078,4082],{"type":24,"tag":173,"props":4079,"children":4080},{"class":3367},[4081],{"type":29,"value":476},{"type":24,"tag":173,"props":4083,"children":4084},{"class":3472},[4085],{"type":29,"value":4086},"// 初始化词法环境完成之后，立即执行 x=2 语句，通过__outer__找到外部的x\n",{"type":24,"tag":173,"props":4088,"children":4089},{"class":175,"line":3093},[4090,4094],{"type":24,"tag":173,"props":4091,"children":4092},{"class":3367},[4093],{"type":29,"value":476},{"type":24,"tag":173,"props":4095,"children":4096},{"class":3472},[4097],{"type":29,"value":4098},"// VariableEnvironment (A) = { x: 2, __outer__: global }\n",{"type":24,"tag":173,"props":4100,"children":4102},{"class":175,"line":4101},26,[4103,4107],{"type":24,"tag":173,"props":4104,"children":4105},{"class":3367},[4106],{"type":29,"value":476},{"type":24,"tag":173,"props":4108,"children":4109},{"class":3472},[4110],{"type":29,"value":4111},"// bar LexicalEnvironment 仍然是 VariableEnvironment (B)\n",{"type":24,"tag":173,"props":4113,"children":4115},{"class":175,"line":4114},27,[4116],{"type":24,"tag":173,"props":4117,"children":4118},{},[4119],{"type":29,"value":261},{"type":24,"tag":173,"props":4121,"children":4123},{"class":175,"line":4122},28,[4124],{"type":24,"tag":173,"props":4125,"children":4126},{"class":3367},[4127],{"type":29,"value":4128},"  })();\n",{"type":24,"tag":173,"props":4130,"children":4132},{"class":175,"line":4131},29,[4133],{"type":24,"tag":173,"props":4134,"children":4135},{},[4136],{"type":29,"value":261},{"type":24,"tag":173,"props":4138,"children":4140},{"class":175,"line":4139},30,[4141],{"type":24,"tag":173,"props":4142,"children":4143},{"class":3367},[4144],{"type":29,"value":4145},"})();",{"type":24,"tag":25,"props":4147,"children":4148},{},[4149],{"type":29,"value":4150},"创建执行环境时，变量环境和词法环境最初是同一个值（变量环境指向词法环境），在执行环境执行相关代码过程中，变量环境组件永远不变，而词法环境组件有可能改变（with、eval可以改变词法环境），在函数即将执行前，会对var和function声明进行预解析，然后执行代码。",{"type":24,"tag":25,"props":4152,"children":4153},{},[4154],{"type":29,"value":4155},"再看一个 🌰：",{"type":24,"tag":159,"props":4157,"children":4159},{"code":4158,"language":162,"meta":163},"var x = 10; // 语句会拆成两个阶段，预解析var x；执行代码 x = 10；\r\n\r\nfunction foo() {\r\n  var y = 20;\r\n console.log(x + y); // 30\r\n}\r\n\r\n// 词法环境由一个环境记录项（environmentRecord）和可能为空的\r\n// 外部词法环境 （outer environment）引用构成。\r\n\r\n// 执行环境执行之前的结果（创建函数阶段）\r\nVariableEnvironment (global) = {\r\n  environmentRecord: {\r\n    // 分配内存默认为undefined；\r\n    x: undefined\r\n  },\r\n  outer: null // 没有外部环境\r\n};\r\n\r\n//  \"foo\" 函数变量环境\r\nVariableEnvironment (foo) = {\r\n  environmentRecord: {\r\n    y: undefined\r\n  },\r\n  outer: globalEnvironment // 指向全局环境\r\n};\r\n\r\n\r\n// 全局作用域下的环境执行之后的结果\r\nVariableEnvironment (global) = {\r\n  environmentRecord: {\r\n    // 绑定的值\r\n    x: 10\r\n  },\r\n  outer: null // 没有外部环境\r\n};\r\n\r\n//  \"foo\" 函数环境\r\nVariableEnvironment (foo) = {\r\n  environmentRecord: {\r\n    y: 20\r\n  },\r\n  outer: globalEnvironment // 指向全局环境\r\n};\n",[4160],{"type":24,"tag":166,"props":4161,"children":4162},{},[4163],{"type":24,"tag":159,"props":4164,"children":4165},{"__ignoreMap":14},[4166,4200,4207,4226,4258,4302,4309,4316,4324,4332,4339,4347,4369,4386,4398,4419,4427,4457,4464,4471,4479,4498,4513,4533,4540,4569,4576,4583,4590,4598,4617,4633,4646,4667,4675,4703,4711,4719,4728,4748,4764,4785,4793,4821],{"type":24,"tag":173,"props":4167,"children":4168},{"class":175,"line":176},[4169,4173,4177,4181,4185,4190,4195],{"type":24,"tag":173,"props":4170,"children":4171},{"class":3362},[4172],{"type":29,"value":1054},{"type":24,"tag":173,"props":4174,"children":4175},{"class":3367},[4176],{"type":29,"value":189},{"type":24,"tag":173,"props":4178,"children":4179},{"class":3372},[4180],{"type":29,"value":1869},{"type":24,"tag":173,"props":4182,"children":4183},{"class":3367},[4184],{"type":29,"value":1068},{"type":24,"tag":173,"props":4186,"children":4187},{"class":4068},[4188],{"type":29,"value":4189},"10",{"type":24,"tag":173,"props":4191,"children":4192},{"class":3367},[4193],{"type":29,"value":4194},"; ",{"type":24,"tag":173,"props":4196,"children":4197},{"class":3472},[4198],{"type":29,"value":4199},"// 语句会拆成两个阶段，预解析var x；执行代码 x = 10；\n",{"type":24,"tag":173,"props":4201,"children":4202},{"class":175,"line":214},[4203],{"type":24,"tag":173,"props":4204,"children":4205},{},[4206],{"type":29,"value":261},{"type":24,"tag":173,"props":4208,"children":4209},{"class":175,"line":229},[4210,4214,4218,4222],{"type":24,"tag":173,"props":4211,"children":4212},{"class":3362},[4213],{"type":29,"value":183},{"type":24,"tag":173,"props":4215,"children":4216},{"class":3367},[4217],{"type":29,"value":189},{"type":24,"tag":173,"props":4219,"children":4220},{"class":3410},[4221],{"type":29,"value":3838},{"type":24,"tag":173,"props":4223,"children":4224},{"class":3367},[4225],{"type":29,"value":283},{"type":24,"tag":173,"props":4227,"children":4228},{"class":175,"line":246},[4229,4233,4237,4241,4245,4249,4254],{"type":24,"tag":173,"props":4230,"children":4231},{"class":3367},[4232],{"type":29,"value":220},{"type":24,"tag":173,"props":4234,"children":4235},{"class":3362},[4236],{"type":29,"value":1054},{"type":24,"tag":173,"props":4238,"children":4239},{"class":3367},[4240],{"type":29,"value":189},{"type":24,"tag":173,"props":4242,"children":4243},{"class":3372},[4244],{"type":29,"value":1894},{"type":24,"tag":173,"props":4246,"children":4247},{"class":3367},[4248],{"type":29,"value":1068},{"type":24,"tag":173,"props":4250,"children":4251},{"class":4068},[4252],{"type":29,"value":4253},"20",{"type":24,"tag":173,"props":4255,"children":4256},{"class":3367},[4257],{"type":29,"value":1321},{"type":24,"tag":173,"props":4259,"children":4260},{"class":175,"line":255},[4261,4265,4269,4273,4277,4281,4285,4289,4293,4297],{"type":24,"tag":173,"props":4262,"children":4263},{"class":3367},[4264],{"type":29,"value":189},{"type":24,"tag":173,"props":4266,"children":4267},{"class":3372},[4268],{"type":29,"value":2297},{"type":24,"tag":173,"props":4270,"children":4271},{"class":3367},[4272],{"type":29,"value":388},{"type":24,"tag":173,"props":4274,"children":4275},{"class":3410},[4276],{"type":29,"value":2306},{"type":24,"tag":173,"props":4278,"children":4279},{"class":3367},[4280],{"type":29,"value":200},{"type":24,"tag":173,"props":4282,"children":4283},{"class":3372},[4284],{"type":29,"value":1869},{"type":24,"tag":173,"props":4286,"children":4287},{"class":3367},[4288],{"type":29,"value":1915},{"type":24,"tag":173,"props":4290,"children":4291},{"class":3372},[4292],{"type":29,"value":1894},{"type":24,"tag":173,"props":4294,"children":4295},{"class":3367},[4296],{"type":29,"value":513},{"type":24,"tag":173,"props":4298,"children":4299},{"class":3472},[4300],{"type":29,"value":4301},"// 30\n",{"type":24,"tag":173,"props":4303,"children":4304},{"class":175,"line":264},[4305],{"type":24,"tag":173,"props":4306,"children":4307},{"class":3367},[4308],{"type":29,"value":252},{"type":24,"tag":173,"props":4310,"children":4311},{"class":175,"line":286},[4312],{"type":24,"tag":173,"props":4313,"children":4314},{},[4315],{"type":29,"value":261},{"type":24,"tag":173,"props":4317,"children":4318},{"class":175,"line":298},[4319],{"type":24,"tag":173,"props":4320,"children":4321},{"class":3472},[4322],{"type":29,"value":4323},"// 词法环境由一个环境记录项（environmentRecord）和可能为空的\n",{"type":24,"tag":173,"props":4325,"children":4326},{"class":175,"line":306},[4327],{"type":24,"tag":173,"props":4328,"children":4329},{"class":3472},[4330],{"type":29,"value":4331},"// 外部词法环境 （outer environment）引用构成。\n",{"type":24,"tag":173,"props":4333,"children":4334},{"class":175,"line":314},[4335],{"type":24,"tag":173,"props":4336,"children":4337},{},[4338],{"type":29,"value":261},{"type":24,"tag":173,"props":4340,"children":4341},{"class":175,"line":849},[4342],{"type":24,"tag":173,"props":4343,"children":4344},{"class":3472},[4345],{"type":29,"value":4346},"// 执行环境执行之前的结果（创建函数阶段）\n",{"type":24,"tag":173,"props":4348,"children":4349},{"class":175,"line":857},[4350,4355,4359,4364],{"type":24,"tag":173,"props":4351,"children":4352},{"class":3410},[4353],{"type":29,"value":4354},"VariableEnvironment",{"type":24,"tag":173,"props":4356,"children":4357},{"class":3367},[4358],{"type":29,"value":1372},{"type":24,"tag":173,"props":4360,"children":4361},{"class":3372},[4362],{"type":29,"value":4363},"global",{"type":24,"tag":173,"props":4365,"children":4366},{"class":3367},[4367],{"type":29,"value":4368},") = {\n",{"type":24,"tag":173,"props":4370,"children":4371},{"class":175,"line":866},[4372,4376,4381],{"type":24,"tag":173,"props":4373,"children":4374},{"class":3367},[4375],{"type":29,"value":220},{"type":24,"tag":173,"props":4377,"children":4378},{"class":3372},[4379],{"type":29,"value":4380},"environmentRecord:",{"type":24,"tag":173,"props":4382,"children":4383},{"class":3367},[4384],{"type":29,"value":4385}," {\n",{"type":24,"tag":173,"props":4387,"children":4388},{"class":175,"line":1598},[4389,4393],{"type":24,"tag":173,"props":4390,"children":4391},{"class":3367},[4392],{"type":29,"value":476},{"type":24,"tag":173,"props":4394,"children":4395},{"class":3472},[4396],{"type":29,"value":4397},"// 分配内存默认为undefined；\n",{"type":24,"tag":173,"props":4399,"children":4400},{"class":175,"line":1624},[4401,4405,4410,4414],{"type":24,"tag":173,"props":4402,"children":4403},{"class":3367},[4404],{"type":29,"value":476},{"type":24,"tag":173,"props":4406,"children":4407},{"class":3372},[4408],{"type":29,"value":4409},"x:",{"type":24,"tag":173,"props":4411,"children":4412},{"class":3367},[4413],{"type":29,"value":189},{"type":24,"tag":173,"props":4415,"children":4416},{"class":3362},[4417],{"type":29,"value":4418},"undefined\n",{"type":24,"tag":173,"props":4420,"children":4421},{"class":175,"line":1648},[4422],{"type":24,"tag":173,"props":4423,"children":4424},{"class":3367},[4425],{"type":29,"value":4426},"  },\n",{"type":24,"tag":173,"props":4428,"children":4429},{"class":175,"line":2855},[4430,4434,4439,4443,4448,4452],{"type":24,"tag":173,"props":4431,"children":4432},{"class":3367},[4433],{"type":29,"value":220},{"type":24,"tag":173,"props":4435,"children":4436},{"class":3372},[4437],{"type":29,"value":4438},"outer:",{"type":24,"tag":173,"props":4440,"children":4441},{"class":3367},[4442],{"type":29,"value":189},{"type":24,"tag":173,"props":4444,"children":4445},{"class":3362},[4446],{"type":29,"value":4447},"null",{"type":24,"tag":173,"props":4449,"children":4450},{"class":3367},[4451],{"type":29,"value":189},{"type":24,"tag":173,"props":4453,"children":4454},{"class":3472},[4455],{"type":29,"value":4456},"// 没有外部环境\n",{"type":24,"tag":173,"props":4458,"children":4459},{"class":175,"line":2863},[4460],{"type":24,"tag":173,"props":4461,"children":4462},{"class":3367},[4463],{"type":29,"value":2641},{"type":24,"tag":173,"props":4465,"children":4466},{"class":175,"line":2871},[4467],{"type":24,"tag":173,"props":4468,"children":4469},{},[4470],{"type":29,"value":261},{"type":24,"tag":173,"props":4472,"children":4473},{"class":175,"line":2880},[4474],{"type":24,"tag":173,"props":4475,"children":4476},{"class":3472},[4477],{"type":29,"value":4478},"//  \"foo\" 函数变量环境\n",{"type":24,"tag":173,"props":4480,"children":4481},{"class":175,"line":2917},[4482,4486,4490,4494],{"type":24,"tag":173,"props":4483,"children":4484},{"class":3410},[4485],{"type":29,"value":4354},{"type":24,"tag":173,"props":4487,"children":4488},{"class":3367},[4489],{"type":29,"value":1372},{"type":24,"tag":173,"props":4491,"children":4492},{"class":3372},[4493],{"type":29,"value":3838},{"type":24,"tag":173,"props":4495,"children":4496},{"class":3367},[4497],{"type":29,"value":4368},{"type":24,"tag":173,"props":4499,"children":4500},{"class":175,"line":2965},[4501,4505,4509],{"type":24,"tag":173,"props":4502,"children":4503},{"class":3367},[4504],{"type":29,"value":220},{"type":24,"tag":173,"props":4506,"children":4507},{"class":3372},[4508],{"type":29,"value":4380},{"type":24,"tag":173,"props":4510,"children":4511},{"class":3367},[4512],{"type":29,"value":4385},{"type":24,"tag":173,"props":4514,"children":4515},{"class":175,"line":3013},[4516,4520,4525,4529],{"type":24,"tag":173,"props":4517,"children":4518},{"class":3367},[4519],{"type":29,"value":476},{"type":24,"tag":173,"props":4521,"children":4522},{"class":3372},[4523],{"type":29,"value":4524},"y:",{"type":24,"tag":173,"props":4526,"children":4527},{"class":3367},[4528],{"type":29,"value":189},{"type":24,"tag":173,"props":4530,"children":4531},{"class":3362},[4532],{"type":29,"value":4418},{"type":24,"tag":173,"props":4534,"children":4535},{"class":175,"line":3053},[4536],{"type":24,"tag":173,"props":4537,"children":4538},{"class":3367},[4539],{"type":29,"value":4426},{"type":24,"tag":173,"props":4541,"children":4542},{"class":175,"line":3093},[4543,4547,4551,4555,4560,4564],{"type":24,"tag":173,"props":4544,"children":4545},{"class":3367},[4546],{"type":29,"value":220},{"type":24,"tag":173,"props":4548,"children":4549},{"class":3372},[4550],{"type":29,"value":4438},{"type":24,"tag":173,"props":4552,"children":4553},{"class":3367},[4554],{"type":29,"value":189},{"type":24,"tag":173,"props":4556,"children":4557},{"class":3372},[4558],{"type":29,"value":4559},"globalEnvironment",{"type":24,"tag":173,"props":4561,"children":4562},{"class":3367},[4563],{"type":29,"value":189},{"type":24,"tag":173,"props":4565,"children":4566},{"class":3472},[4567],{"type":29,"value":4568},"// 指向全局环境\n",{"type":24,"tag":173,"props":4570,"children":4571},{"class":175,"line":4101},[4572],{"type":24,"tag":173,"props":4573,"children":4574},{"class":3367},[4575],{"type":29,"value":2641},{"type":24,"tag":173,"props":4577,"children":4578},{"class":175,"line":4114},[4579],{"type":24,"tag":173,"props":4580,"children":4581},{},[4582],{"type":29,"value":261},{"type":24,"tag":173,"props":4584,"children":4585},{"class":175,"line":4122},[4586],{"type":24,"tag":173,"props":4587,"children":4588},{},[4589],{"type":29,"value":261},{"type":24,"tag":173,"props":4591,"children":4592},{"class":175,"line":4131},[4593],{"type":24,"tag":173,"props":4594,"children":4595},{"class":3472},[4596],{"type":29,"value":4597},"// 全局作用域下的环境执行之后的结果\n",{"type":24,"tag":173,"props":4599,"children":4600},{"class":175,"line":4139},[4601,4605,4609,4613],{"type":24,"tag":173,"props":4602,"children":4603},{"class":3410},[4604],{"type":29,"value":4354},{"type":24,"tag":173,"props":4606,"children":4607},{"class":3367},[4608],{"type":29,"value":1372},{"type":24,"tag":173,"props":4610,"children":4611},{"class":3372},[4612],{"type":29,"value":4363},{"type":24,"tag":173,"props":4614,"children":4615},{"class":3367},[4616],{"type":29,"value":4368},{"type":24,"tag":173,"props":4618,"children":4620},{"class":175,"line":4619},31,[4621,4625,4629],{"type":24,"tag":173,"props":4622,"children":4623},{"class":3367},[4624],{"type":29,"value":220},{"type":24,"tag":173,"props":4626,"children":4627},{"class":3372},[4628],{"type":29,"value":4380},{"type":24,"tag":173,"props":4630,"children":4631},{"class":3367},[4632],{"type":29,"value":4385},{"type":24,"tag":173,"props":4634,"children":4636},{"class":175,"line":4635},32,[4637,4641],{"type":24,"tag":173,"props":4638,"children":4639},{"class":3367},[4640],{"type":29,"value":476},{"type":24,"tag":173,"props":4642,"children":4643},{"class":3472},[4644],{"type":29,"value":4645},"// 绑定的值\n",{"type":24,"tag":173,"props":4647,"children":4649},{"class":175,"line":4648},33,[4650,4654,4658,4662],{"type":24,"tag":173,"props":4651,"children":4652},{"class":3367},[4653],{"type":29,"value":476},{"type":24,"tag":173,"props":4655,"children":4656},{"class":3372},[4657],{"type":29,"value":4409},{"type":24,"tag":173,"props":4659,"children":4660},{"class":3367},[4661],{"type":29,"value":189},{"type":24,"tag":173,"props":4663,"children":4664},{"class":4068},[4665],{"type":29,"value":4666},"10\n",{"type":24,"tag":173,"props":4668,"children":4670},{"class":175,"line":4669},34,[4671],{"type":24,"tag":173,"props":4672,"children":4673},{"class":3367},[4674],{"type":29,"value":4426},{"type":24,"tag":173,"props":4676,"children":4678},{"class":175,"line":4677},35,[4679,4683,4687,4691,4695,4699],{"type":24,"tag":173,"props":4680,"children":4681},{"class":3367},[4682],{"type":29,"value":220},{"type":24,"tag":173,"props":4684,"children":4685},{"class":3372},[4686],{"type":29,"value":4438},{"type":24,"tag":173,"props":4688,"children":4689},{"class":3367},[4690],{"type":29,"value":189},{"type":24,"tag":173,"props":4692,"children":4693},{"class":3362},[4694],{"type":29,"value":4447},{"type":24,"tag":173,"props":4696,"children":4697},{"class":3367},[4698],{"type":29,"value":189},{"type":24,"tag":173,"props":4700,"children":4701},{"class":3472},[4702],{"type":29,"value":4456},{"type":24,"tag":173,"props":4704,"children":4706},{"class":175,"line":4705},36,[4707],{"type":24,"tag":173,"props":4708,"children":4709},{"class":3367},[4710],{"type":29,"value":2641},{"type":24,"tag":173,"props":4712,"children":4714},{"class":175,"line":4713},37,[4715],{"type":24,"tag":173,"props":4716,"children":4717},{},[4718],{"type":29,"value":261},{"type":24,"tag":173,"props":4720,"children":4722},{"class":175,"line":4721},38,[4723],{"type":24,"tag":173,"props":4724,"children":4725},{"class":3472},[4726],{"type":29,"value":4727},"//  \"foo\" 函数环境\n",{"type":24,"tag":173,"props":4729,"children":4731},{"class":175,"line":4730},39,[4732,4736,4740,4744],{"type":24,"tag":173,"props":4733,"children":4734},{"class":3410},[4735],{"type":29,"value":4354},{"type":24,"tag":173,"props":4737,"children":4738},{"class":3367},[4739],{"type":29,"value":1372},{"type":24,"tag":173,"props":4741,"children":4742},{"class":3372},[4743],{"type":29,"value":3838},{"type":24,"tag":173,"props":4745,"children":4746},{"class":3367},[4747],{"type":29,"value":4368},{"type":24,"tag":173,"props":4749,"children":4751},{"class":175,"line":4750},40,[4752,4756,4760],{"type":24,"tag":173,"props":4753,"children":4754},{"class":3367},[4755],{"type":29,"value":220},{"type":24,"tag":173,"props":4757,"children":4758},{"class":3372},[4759],{"type":29,"value":4380},{"type":24,"tag":173,"props":4761,"children":4762},{"class":3367},[4763],{"type":29,"value":4385},{"type":24,"tag":173,"props":4765,"children":4767},{"class":175,"line":4766},41,[4768,4772,4776,4780],{"type":24,"tag":173,"props":4769,"children":4770},{"class":3367},[4771],{"type":29,"value":476},{"type":24,"tag":173,"props":4773,"children":4774},{"class":3372},[4775],{"type":29,"value":4524},{"type":24,"tag":173,"props":4777,"children":4778},{"class":3367},[4779],{"type":29,"value":189},{"type":24,"tag":173,"props":4781,"children":4782},{"class":4068},[4783],{"type":29,"value":4784},"20\n",{"type":24,"tag":173,"props":4786,"children":4788},{"class":175,"line":4787},42,[4789],{"type":24,"tag":173,"props":4790,"children":4791},{"class":3367},[4792],{"type":29,"value":4426},{"type":24,"tag":173,"props":4794,"children":4796},{"class":175,"line":4795},43,[4797,4801,4805,4809,4813,4817],{"type":24,"tag":173,"props":4798,"children":4799},{"class":3367},[4800],{"type":29,"value":220},{"type":24,"tag":173,"props":4802,"children":4803},{"class":3372},[4804],{"type":29,"value":4438},{"type":24,"tag":173,"props":4806,"children":4807},{"class":3367},[4808],{"type":29,"value":189},{"type":24,"tag":173,"props":4810,"children":4811},{"class":3372},[4812],{"type":29,"value":4559},{"type":24,"tag":173,"props":4814,"children":4815},{"class":3367},[4816],{"type":29,"value":189},{"type":24,"tag":173,"props":4818,"children":4819},{"class":3472},[4820],{"type":29,"value":4568},{"type":24,"tag":173,"props":4822,"children":4824},{"class":175,"line":4823},44,[4825],{"type":24,"tag":173,"props":4826,"children":4827},{"class":3367},[4828],{"type":29,"value":3099},{"type":24,"tag":25,"props":4830,"children":4831},{},[4832],{"type":29,"value":4833},"执行结果流程图：",{"type":24,"tag":25,"props":4835,"children":4836},{},[4837],{"type":24,"tag":4838,"props":4839,"children":4841},"img",{"alt":14,"src":4840},"https://user-gold-cdn.xitu.io/2020/4/16/1717ea3374f17dff?w=452&h=333&f=png&s=40934",[],{"type":24,"tag":25,"props":4843,"children":4844},{},[4845],{"type":29,"value":4846},"通过上面个栗子，无论何时调用函数都会创建一个新的执行环境，被推入执行上下文栈，此外还会创建与之关联的词法环境和变量环境。新建的词法环境通过外部环境引用进行关联。在执行代码之前，词法环境会访问并注册在当前词法作用域中所声明的变量，词法环境通过变量环境跟踪变量的作用域。特别注意是对 var 声明的变量和 function 声明函数！！！",{"type":24,"tag":159,"props":4848,"children":4850},{"code":4849,"language":162,"meta":163},"console.log(a);\r\n// Cannot access 'a' before initialization\r\n\r\nlet a = 1\r\n\r\nconsole.log(b)\r\n// undefined\r\n\r\nvar b = function() {\r\n    console.log(\"我调用了个函数\")\r\n}\n",[4851],{"type":24,"tag":166,"props":4852,"children":4853},{},[4854],{"type":24,"tag":159,"props":4855,"children":4856},{"__ignoreMap":14},[4857,4885,4893,4900,4925,4932,4960,4968,4975,5002,5034],{"type":24,"tag":173,"props":4858,"children":4859},{"class":175,"line":176},[4860,4864,4868,4872,4876,4881],{"type":24,"tag":173,"props":4861,"children":4862},{"class":3372},[4863],{"type":29,"value":2297},{"type":24,"tag":173,"props":4865,"children":4866},{"class":3367},[4867],{"type":29,"value":388},{"type":24,"tag":173,"props":4869,"children":4870},{"class":3410},[4871],{"type":29,"value":2306},{"type":24,"tag":173,"props":4873,"children":4874},{"class":3367},[4875],{"type":29,"value":200},{"type":24,"tag":173,"props":4877,"children":4878},{"class":3372},[4879],{"type":29,"value":4880},"a",{"type":24,"tag":173,"props":4882,"children":4883},{"class":3367},[4884],{"type":29,"value":417},{"type":24,"tag":173,"props":4886,"children":4887},{"class":175,"line":214},[4888],{"type":24,"tag":173,"props":4889,"children":4890},{"class":3472},[4891],{"type":29,"value":4892},"// Cannot access 'a' before initialization\n",{"type":24,"tag":173,"props":4894,"children":4895},{"class":175,"line":229},[4896],{"type":24,"tag":173,"props":4897,"children":4898},{},[4899],{"type":29,"value":261},{"type":24,"tag":173,"props":4901,"children":4902},{"class":175,"line":246},[4903,4908,4912,4916,4920],{"type":24,"tag":173,"props":4904,"children":4905},{"class":3362},[4906],{"type":29,"value":4907},"let",{"type":24,"tag":173,"props":4909,"children":4910},{"class":3367},[4911],{"type":29,"value":189},{"type":24,"tag":173,"props":4913,"children":4914},{"class":3372},[4915],{"type":29,"value":4880},{"type":24,"tag":173,"props":4917,"children":4918},{"class":3367},[4919],{"type":29,"value":1068},{"type":24,"tag":173,"props":4921,"children":4922},{"class":4068},[4923],{"type":29,"value":4924},"1\n",{"type":24,"tag":173,"props":4926,"children":4927},{"class":175,"line":255},[4928],{"type":24,"tag":173,"props":4929,"children":4930},{},[4931],{"type":29,"value":261},{"type":24,"tag":173,"props":4933,"children":4934},{"class":175,"line":264},[4935,4939,4943,4947,4951,4956],{"type":24,"tag":173,"props":4936,"children":4937},{"class":3372},[4938],{"type":29,"value":2297},{"type":24,"tag":173,"props":4940,"children":4941},{"class":3367},[4942],{"type":29,"value":388},{"type":24,"tag":173,"props":4944,"children":4945},{"class":3410},[4946],{"type":29,"value":2306},{"type":24,"tag":173,"props":4948,"children":4949},{"class":3367},[4950],{"type":29,"value":200},{"type":24,"tag":173,"props":4952,"children":4953},{"class":3372},[4954],{"type":29,"value":4955},"b",{"type":24,"tag":173,"props":4957,"children":4958},{"class":3367},[4959],{"type":29,"value":1621},{"type":24,"tag":173,"props":4961,"children":4962},{"class":175,"line":286},[4963],{"type":24,"tag":173,"props":4964,"children":4965},{"class":3472},[4966],{"type":29,"value":4967},"// undefined\n",{"type":24,"tag":173,"props":4969,"children":4970},{"class":175,"line":298},[4971],{"type":24,"tag":173,"props":4972,"children":4973},{},[4974],{"type":29,"value":261},{"type":24,"tag":173,"props":4976,"children":4977},{"class":175,"line":306},[4978,4982,4986,4990,4994,4998],{"type":24,"tag":173,"props":4979,"children":4980},{"class":3362},[4981],{"type":29,"value":1054},{"type":24,"tag":173,"props":4983,"children":4984},{"class":3367},[4985],{"type":29,"value":189},{"type":24,"tag":173,"props":4987,"children":4988},{"class":3410},[4989],{"type":29,"value":4955},{"type":24,"tag":173,"props":4991,"children":4992},{"class":3367},[4993],{"type":29,"value":1068},{"type":24,"tag":173,"props":4995,"children":4996},{"class":3362},[4997],{"type":29,"value":183},{"type":24,"tag":173,"props":4999,"children":5000},{"class":3367},[5001],{"type":29,"value":283},{"type":24,"tag":173,"props":5003,"children":5004},{"class":175,"line":314},[5005,5009,5013,5017,5021,5025,5030],{"type":24,"tag":173,"props":5006,"children":5007},{"class":3367},[5008],{"type":29,"value":476},{"type":24,"tag":173,"props":5010,"children":5011},{"class":3372},[5012],{"type":29,"value":2297},{"type":24,"tag":173,"props":5014,"children":5015},{"class":3367},[5016],{"type":29,"value":388},{"type":24,"tag":173,"props":5018,"children":5019},{"class":3410},[5020],{"type":29,"value":2306},{"type":24,"tag":173,"props":5022,"children":5023},{"class":3367},[5024],{"type":29,"value":200},{"type":24,"tag":173,"props":5026,"children":5027},{"class":3382},[5028],{"type":29,"value":5029},"\"我调用了个函数\"",{"type":24,"tag":173,"props":5031,"children":5032},{"class":3367},[5033],{"type":29,"value":1621},{"type":24,"tag":173,"props":5035,"children":5036},{"class":175,"line":849},[5037],{"type":24,"tag":173,"props":5038,"children":5039},{"class":3367},[5040],{"type":29,"value":544},{"type":24,"tag":31,"props":5042,"children":5044},{"id":5043},"闭包",[5045],{"type":29,"value":5043},{"type":24,"tag":25,"props":5047,"children":5048},{},[5049],{"type":29,"value":5050},"MDN 中对闭包的定义：",{"type":24,"tag":3301,"props":5052,"children":5053},{},[5054],{"type":24,"tag":25,"props":5055,"children":5056},{},[5057],{"type":29,"value":5058},"函数和对其周围状态（词法环境）的引用捆绑在一起构成闭包。",{"type":24,"tag":25,"props":5060,"children":5061},{},[5062],{"type":29,"value":5063},"面试官问什么是闭包？",{"type":24,"tag":25,"props":5065,"children":5066},{},[5067],{"type":29,"value":5068},"我想大部分小伙伴都是闭包就是能够读取其他函数内部变量的函数。",{"type":24,"tag":25,"props":5070,"children":5071},{},[5072],{"type":29,"value":5073},"说实话没深入研究之前，我也是背背表面概念（毕竟网上一大堆都是这样说的）。通过对上面词法作用域的理解以后，我们突然会觉得上面的 MDN 定义太准确了。仔细分析就是外函数里面嵌套一个内函数并返回内函数，但调用内函数的时候，会创建词法环境，外部环境引用（上文的outer）指向外函数词法环境，直到全局词法环境执行指向 null。即使外函数词法环境已经消失，但还是可以通过内函数的词法环境外部环境指向访问到，这就是闭包。调用 N 次内函数，就会创建 N 个词法环境和 N 个闭包。",{"type":24,"tag":31,"props":5075,"children":5077},{"id":5076},"写在最后",[5078],{"type":29,"value":5076},{"type":24,"tag":25,"props":5080,"children":5081},{},[5082],{"type":29,"value":5083},"用心写篇文章不易，如果内容中有不妥的地方欢迎指正，当然博客只是学习参考的依据，真正要学到掌握还是需要自己下功夫和研究的。毕竟别人的理解并不一定是自己的理解。如果对你有所帮助欢迎点赞收藏，码字不易，大家加油！！！",{"type":24,"tag":3196,"children":5085},[5086],{"type":29,"value":5087},".ct-4d4437{color:#B5CEA8}\n.ct-053ab1{color:#808080}\n.ct-b1851e{color:#6A9955}\n.ct-43df80{color:#DCDCAA}\n.ct-8bd768{color:#CE9178}\n.ct-e43f92{color:#9CDCFE}\n.ct-3909c3{color:#D4D4D4}\n.ct-c42d0a{color:#569CD6}",{"title":14,"searchDepth":214,"depth":214,"links":5089},[5090,5091,5092,5093,5094],{"id":3292,"depth":214,"text":3292},{"id":3321,"depth":214,"text":3321},{"id":3540,"depth":214,"text":3540},{"id":5043,"depth":214,"text":5043},{"id":5076,"depth":214,"text":5076},"content:articles:2020-05-02-深入Js之我是如何搞懂作用域和闭包的.md","articles/2020-05-02-深入Js之我是如何搞懂作用域和闭包的.md",{},1701249350152]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{locales:[],defaultLocale:"",integrity:1701249314642,experimental:{stripQueryParameters:false,clientDB:false,advancedIgnoresPattern:false},api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{preload:["javascript","typescript","vue","vue-html"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,anchorLinks:{depth:4,exclude:[1]}},device:{enabled:true,defaultUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.39 Safari/537.36",refreshOnResize:false}},app:{baseURL:"/myblog/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script><script type="module" src="/myblog/_nuxt/entry.10d87d8f.js" crossorigin></script></body>
</html>